diff --git a/patches/dev300/apply b/patches/dev300/apply
index a6011bb..baf2fae 100644
--- openoffice.org-3.2.0/ooo-build-3-2-0-99-3/patches/dev300/apply
+++ openoffice.org-3.2.0/ooo-build-3-2-0-99-3/patches/dev300/apply
@@ -83,7 +83,7 @@ SUSE-reduced:NovellBase,BerkeleyDB43, ReducedDefaults
 Slackware : LinuxCommon, SlackwareOnly, NotDebian, Mono, msaccess, CairoFonts
 # Debian
 DebianBase : LinuxCommon, DebianBaseOnly, GCCSTL, BerkeleyDB43, Split, PostgreSQL
-Debian : DebianBase, DebianOnly, DebianSidOnly, Debian32Only, CairoFonts, HPPA, AXP
+Debian : DebianBase, DebianOnly, DebianSidOnly, Debian32Only, CairoFonts, HPPA, AXP, kFreeBSD
 DebianEtch : DebianBase, DebianOnly, DebianEtchOnly, Debian32Only
 # Ubuntu
 UbuntuBased : DebianBase, UbuntuOnly
@@ -3738,6 +3738,9 @@ oox-pptx-export-update-to-ooo320.diff, rodo
 oox-chart-export-part1.diff, Fong
 docx-fixes02.diff, n#581604, cbosdo

+[ kFreeBSD ]
+cws-kfreebsdport01v2.diff, rengelha
+
 [ HPPA < dev300-m66 ]
 cws-linuxhppa1.diff, i#107051

--- /dev/null	2010-04-14 03:44:50.008165136 +0200
+++ openoffice.org-3.2.0/ooo-build-3-2-0-99-3/patches/dev300/cws-kfreebsdport01v2.diff	2010-04-17 15:10:04.000000000 +0200
@@ -0,0 +1,9796 @@
+diff --git a/config.guess b/config.guess
+--- config.guess
++++ config.guess
+@@ -1,9 +1,10 @@
+ #! /bin/sh
+ # Attempt to guess a canonical system name.
+ #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
+-#   2000, 2001, 2002, 2003, 2004 Free Software Foundation, Inc.
++#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010
++#   Free Software Foundation, Inc.
+ 
+-timestamp='2004-11-12'
++timestamp='2009-12-30'
+ 
+ # This file is free software; you can redistribute it and/or modify it
+ # under the terms of the GNU General Public License as published by
+@@ -17,23 +18,25 @@
+ #
+ # You should have received a copy of the GNU General Public License
+ # along with this program; if not, write to the Free Software
+-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
++# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
++# 02110-1301, USA.
+ #
+ # As a special exception to the GNU General Public License, if you
+ # distribute this file as part of a program that contains a
+ # configuration script generated by Autoconf, you may include it under
+ # the same distribution terms that you use for the rest of that program.
+ 
+-# Originally written by Per Bothner <per@bothner.com>.
+-# Please send patches to <config-patches@gnu.org>.  Submit a context
+-# diff and a properly formatted ChangeLog entry.
++
++# Originally written by Per Bothner.  Please send patches (context
++# diff format) to <config-patches@gnu.org> and include a ChangeLog
++# entry.
+ #
+ # This script attempts to guess a canonical system name similar to
+ # config.sub.  If it succeeds, it prints the system name on stdout, and
+ # exits with 0.  Otherwise, it exits with 1.
+ #
+-# The plan is that this can be called by configure scripts if you
+-# don't specify an explicit build system type.
++# You can get the latest version of this script from:
++# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
+ 
+ me=`echo "$0" | sed -e 's,.*/,,'`
+ 
+@@ -53,8 +56,9 @@
+ GNU config.guess ($timestamp)
+ 
+ Originally written by Per Bothner.
+-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004
+-Free Software Foundation, Inc.
++Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
++2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free
++Software Foundation, Inc.
+ 
+ This is free software; see the source for copying conditions.  There is NO
+ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
+@@ -66,11 +70,11 @@
+ while test $# -gt 0 ; do
+   case $1 in
+     --time-stamp | --time* | -t )
+-       echo "$timestamp" ; exit 0 ;;
++       echo "$timestamp" ; exit ;;
+     --version | -v )
+-       echo "$version" ; exit 0 ;;
++       echo "$version" ; exit ;;
+     --help | --h* | -h )
+-       echo "$usage"; exit 0 ;;
++       echo "$usage"; exit ;;
+     -- )     # Stop option processing
+        shift; break ;;
+     - )	# Use stdin as input.
+@@ -104,7 +108,7 @@
+ trap "exitcode=\$?; (rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null) && exit \$exitcode" 0 ;
+ trap "rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null; exit 1" 1 2 13 15 ;
+ : ${TMPDIR=/tmp} ;
+- { tmp=`(umask 077 && mktemp -d -q "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
++ { tmp=`(umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
+  { test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir $tmp) ; } ||
+  { tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir $tmp) && echo "Warning: creating insecure temp directory" >&2 ; } ||
+  { echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; } ;
+@@ -123,7 +127,7 @@
+ 	;;
+  ,,*)   CC_FOR_BUILD=$CC ;;
+  ,*,*)  CC_FOR_BUILD=$HOST_CC ;;
+-esac ;'
++esac ; set_cc_for_build= ;'
+ 
+ # This is needed to find uname on a Pyramid OSx when run in the BSD universe.
+ # (ghazi@noc.rutgers.edu 1994-08-24)
+@@ -158,6 +162,7 @@
+ 	    arm*) machine=arm-unknown ;;
+ 	    sh3el) machine=shl-unknown ;;
+ 	    sh3eb) machine=sh-unknown ;;
++	    sh5el) machine=sh5le-unknown ;;
+ 	    *) machine=${UNAME_MACHINE_ARCH}-unknown ;;
+ 	esac
+ 	# The Operating System including object format, if it has switched
+@@ -166,7 +171,7 @@
+ 	    arm*|i386|m68k|ns32k|sh3*|sparc|vax)
+ 		eval $set_cc_for_build
+ 		if echo __ELF__ | $CC_FOR_BUILD -E - 2>/dev/null \
+-			| grep __ELF__ >/dev/null
++			| grep -q __ELF__
+ 		then
+ 		    # Once all utilities can be ECOFF (netbsdecoff) or a.out (netbsdaout).
+ 		    # Return netbsd for either.  FIX?
+@@ -196,55 +201,23 @@
+ 	# contains redundant information, the shorter form:
+ 	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
+ 	echo "${machine}-${os}${release}"
+-	exit 0 ;;
+-    amd64:OpenBSD:*:*)
+-	echo x86_64-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    amiga:OpenBSD:*:*)
+-	echo m68k-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    cats:OpenBSD:*:*)
+-	echo arm-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    hp300:OpenBSD:*:*)
+-	echo m68k-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    luna88k:OpenBSD:*:*)
+-    	echo m88k-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    mac68k:OpenBSD:*:*)
+-	echo m68k-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    macppc:OpenBSD:*:*)
+-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    mvme68k:OpenBSD:*:*)
+-	echo m68k-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    mvme88k:OpenBSD:*:*)
+-	echo m88k-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    mvmeppc:OpenBSD:*:*)
+-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    sgi:OpenBSD:*:*)
+-	echo mips64-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
+-    sun3:OpenBSD:*:*)
+-	echo m68k-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     *:OpenBSD:*:*)
+-	echo ${UNAME_MACHINE}-unknown-openbsd${UNAME_RELEASE}
+-	exit 0 ;;
++	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`
++	echo ${UNAME_MACHINE_ARCH}-unknown-openbsd${UNAME_RELEASE}
++	exit ;;
+     *:ekkoBSD:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-ekkobsd${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
++    *:SolidBSD:*:*)
++	echo ${UNAME_MACHINE}-unknown-solidbsd${UNAME_RELEASE}
++	exit ;;
+     macppc:MirBSD:*:*)
+-	echo powerppc-unknown-mirbsd${UNAME_RELEASE}
+-	exit 0 ;;
++	echo powerpc-unknown-mirbsd${UNAME_RELEASE}
++	exit ;;
+     *:MirBSD:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-mirbsd${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     alpha:OSF1:*:*)
+ 	case $UNAME_RELEASE in
+ 	*4.0)
+@@ -297,40 +270,43 @@
+ 	# A Xn.n version is an unreleased experimental baselevel.
+ 	# 1.2 uses "1.2" for uname -r.
+ 	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[PVTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
+-	exit 0 ;;
++	exit ;;
+     Alpha\ *:Windows_NT*:*)
+ 	# How do we know it's Interix rather than the generic POSIX subsystem?
+ 	# Should we change UNAME_MACHINE based on the output of uname instead
+ 	# of the specific Alpha model?
+ 	echo alpha-pc-interix
+-	exit 0 ;;
++	exit ;;
+     21064:Windows_NT:50:3)
+ 	echo alpha-dec-winnt3.5
+-	exit 0 ;;
++	exit ;;
+     Amiga*:UNIX_System_V:4.0:*)
+ 	echo m68k-unknown-sysv4
+-	exit 0;;
++	exit ;;
+     *:[Aa]miga[Oo][Ss]:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-amigaos
+-	exit 0 ;;
++	exit ;;
+     *:[Mm]orph[Oo][Ss]:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-morphos
+-	exit 0 ;;
++	exit ;;
+     *:OS/390:*:*)
+ 	echo i370-ibm-openedition
+-	exit 0 ;;
++	exit ;;
+     *:z/VM:*:*)
+ 	echo s390-ibm-zvmoe
+-	exit 0 ;;
++	exit ;;
+     *:OS400:*:*)
+         echo powerpc-ibm-os400
+-	exit 0 ;;
++	exit ;;
+     arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
+ 	echo arm-acorn-riscix${UNAME_RELEASE}
+-	exit 0;;
++	exit ;;
++    arm:riscos:*:*|arm:RISCOS:*:*)
++	echo arm-unknown-riscos
++	exit ;;
+     SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
+ 	echo hppa1.1-hitachi-hiuxmpp
+-	exit 0;;
++	exit ;;
+     Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
+ 	# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.
+ 	if test "`(/bin/universe) 2>/dev/null`" = att ; then
+@@ -338,32 +314,51 @@
+ 	else
+ 		echo pyramid-pyramid-bsd
+ 	fi
+-	exit 0 ;;
++	exit ;;
+     NILE*:*:*:dcosx)
+ 	echo pyramid-pyramid-svr4
+-	exit 0 ;;
++	exit ;;
+     DRS?6000:unix:4.0:6*)
+ 	echo sparc-icl-nx6
+-	exit 0 ;;
++	exit ;;
+     DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)
+ 	case `/usr/bin/uname -p` in
+-	    sparc) echo sparc-icl-nx7 && exit 0 ;;
++	    sparc) echo sparc-icl-nx7; exit ;;
+ 	esac ;;
++    s390x:SunOS:*:*)
++	echo ${UNAME_MACHINE}-ibm-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
++	exit ;;
+     sun4H:SunOS:5.*:*)
+ 	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+-	exit 0 ;;
++	exit ;;
+     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
+ 	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+-	exit 0 ;;
+-    i86pc:SunOS:5.*:*)
+-	echo i386-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+-	exit 0 ;;
++	exit ;;
++    i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
++	echo i386-pc-auroraux${UNAME_RELEASE}
++	exit ;;
++    i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
++	eval $set_cc_for_build
++	SUN_ARCH="i386"
++	# If there is a compiler, see if it is configured for 64-bit objects.
++	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.
++	# This test works for both compilers.
++	if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
++	    if (echo '#ifdef __amd64'; echo IS_64BIT_ARCH; echo '#endif') | \
++		(CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
++		grep IS_64BIT_ARCH >/dev/null
++	    then
++		SUN_ARCH="x86_64"
++	    fi
++	fi
++	echo ${SUN_ARCH}-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
++	exit ;;
+     sun4*:SunOS:6*:*)
+ 	# According to config.sub, this is the proper way to canonicalize
+ 	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
+ 	# it's likely to be more like Solaris than SunOS4.
+ 	echo sparc-sun-solaris3`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+-	exit 0 ;;
++	exit ;;
+     sun4*:SunOS:*:*)
+ 	case "`/usr/bin/arch -k`" in
+ 	    Series*|S4*)
+@@ -372,10 +367,10 @@
+ 	esac
+ 	# Japanese Language versions have a version number like `4.1.3-JL'.
+ 	echo sparc-sun-sunos`echo ${UNAME_RELEASE}|sed -e 's/-/_/'`
+-	exit 0 ;;
++	exit ;;
+     sun3*:SunOS:*:*)
+ 	echo m68k-sun-sunos${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     sun*:*:4.2BSD:*)
+ 	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
+ 	test "x${UNAME_RELEASE}" = "x" && UNAME_RELEASE=3
+@@ -387,10 +382,10 @@
+ 		echo sparc-sun-sunos${UNAME_RELEASE}
+ 		;;
+ 	esac
+-	exit 0 ;;
++	exit ;;
+     aushp:SunOS:*:*)
+ 	echo sparc-auspex-sunos${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     # The situation for MiNT is a little confusing.  The machine name
+     # can be virtually everything (everything which is not
+     # "atarist" or "atariste" at least should have a processor
+@@ -401,40 +396,40 @@
+     # be no problem.
+     atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
+         echo m68k-atari-mint${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
+ 	echo m68k-atari-mint${UNAME_RELEASE}
+-        exit 0 ;;
++        exit ;;
+     *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
+         echo m68k-atari-mint${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
+         echo m68k-milan-mint${UNAME_RELEASE}
+-        exit 0 ;;
++        exit ;;
+     hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
+         echo m68k-hades-mint${UNAME_RELEASE}
+-        exit 0 ;;
++        exit ;;
+     *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
+         echo m68k-unknown-mint${UNAME_RELEASE}
+-        exit 0 ;;
++        exit ;;
+     m68k:machten:*:*)
+ 	echo m68k-apple-machten${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     powerpc:machten:*:*)
+ 	echo powerpc-apple-machten${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     RISC*:Mach:*:*)
+ 	echo mips-dec-mach_bsd4.3
+-	exit 0 ;;
++	exit ;;
+     RISC*:ULTRIX:*:*)
+ 	echo mips-dec-ultrix${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     VAX*:ULTRIX*:*:*)
+ 	echo vax-dec-ultrix${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     2020:CLIX:*:* | 2430:CLIX:*:*)
+ 	echo clipper-intergraph-clix${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     mips:*:*:UMIPS | mips:*:*:RISCos)
+ 	eval $set_cc_for_build
+ 	sed 's/^	//' << EOF >$dummy.c
+@@ -458,32 +453,33 @@
+ 	  exit (-1);
+ 	}
+ EOF
+-	$CC_FOR_BUILD -o $dummy $dummy.c \
+-	  && $dummy `echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` \
+-	  && exit 0
++	$CC_FOR_BUILD -o $dummy $dummy.c &&
++	  dummyarg=`echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` &&
++	  SYSTEM_NAME=`$dummy $dummyarg` &&
++	    { echo "$SYSTEM_NAME"; exit; }
+ 	echo mips-mips-riscos${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     Motorola:PowerMAX_OS:*:*)
+ 	echo powerpc-motorola-powermax
+-	exit 0 ;;
++	exit ;;
+     Motorola:*:4.3:PL8-*)
+ 	echo powerpc-harris-powermax
+-	exit 0 ;;
++	exit ;;
+     Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)
+ 	echo powerpc-harris-powermax
+-	exit 0 ;;
++	exit ;;
+     Night_Hawk:Power_UNIX:*:*)
+ 	echo powerpc-harris-powerunix
+-	exit 0 ;;
++	exit ;;
+     m88k:CX/UX:7*:*)
+ 	echo m88k-harris-cxux7
+-	exit 0 ;;
++	exit ;;
+     m88k:*:4*:R4*)
+ 	echo m88k-motorola-sysv4
+-	exit 0 ;;
++	exit ;;
+     m88k:*:3*:R3*)
+ 	echo m88k-motorola-sysv3
+-	exit 0 ;;
++	exit ;;
+     AViiON:dgux:*:*)
+         # DG/UX returns AViiON for all architectures
+         UNAME_PROCESSOR=`/usr/bin/uname -p`
+@@ -499,29 +495,29 @@
+ 	else
+ 	    echo i586-dg-dgux${UNAME_RELEASE}
+ 	fi
+- 	exit 0 ;;
++ 	exit ;;
+     M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
+ 	echo m88k-dolphin-sysv3
+-	exit 0 ;;
++	exit ;;
+     M88*:*:R3*:*)
+ 	# Delta 88k system running SVR3
+ 	echo m88k-motorola-sysv3
+-	exit 0 ;;
++	exit ;;
+     XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)
+ 	echo m88k-tektronix-sysv3
+-	exit 0 ;;
++	exit ;;
+     Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)
+ 	echo m68k-tektronix-bsd
+-	exit 0 ;;
++	exit ;;
+     *:IRIX*:*:*)
+ 	echo mips-sgi-irix`echo ${UNAME_RELEASE}|sed -e 's/-/_/g'`
+-	exit 0 ;;
++	exit ;;
+     ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
+-	echo romp-ibm-aix      # uname -m gives an 8 hex-code CPU id
+-	exit 0 ;;              # Note that: echo "'`uname -s`'" gives 'AIX '
++	echo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id
++	exit ;;               # Note that: echo "'`uname -s`'" gives 'AIX '
+     i*86:AIX:*:*)
+ 	echo i386-ibm-aix
+-	exit 0 ;;
++	exit ;;
+     ia64:AIX:*:*)
+ 	if [ -x /usr/bin/oslevel ] ; then
+ 		IBM_REV=`/usr/bin/oslevel`
+@@ -529,7 +525,7 @@
+ 		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
+ 	fi
+ 	echo ${UNAME_MACHINE}-ibm-aix${IBM_REV}
+-	exit 0 ;;
++	exit ;;
+     *:AIX:2:3)
+ 	if grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then
+ 		eval $set_cc_for_build
+@@ -544,15 +540,19 @@
+ 			exit(0);
+ 			}
+ EOF
+-		$CC_FOR_BUILD -o $dummy $dummy.c && $dummy && exit 0
+-		echo rs6000-ibm-aix3.2.5
++		if $CC_FOR_BUILD -o $dummy $dummy.c && SYSTEM_NAME=`$dummy`
++		then
++			echo "$SYSTEM_NAME"
++		else
++			echo rs6000-ibm-aix3.2.5
++		fi
+ 	elif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then
+ 		echo rs6000-ibm-aix3.2.4
+ 	else
+ 		echo rs6000-ibm-aix3.2
+ 	fi
+-	exit 0 ;;
+-    *:AIX:*:[45])
++	exit ;;
++    *:AIX:*:[456])
+ 	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
+ 	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/dev/null 2>&1; then
+ 		IBM_ARCH=rs6000
+@@ -565,28 +565,28 @@
+ 		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
+ 	fi
+ 	echo ${IBM_ARCH}-ibm-aix${IBM_REV}
+-	exit 0 ;;
++	exit ;;
+     *:AIX:*:*)
+ 	echo rs6000-ibm-aix
+-	exit 0 ;;
++	exit ;;
+     ibmrt:4.4BSD:*|romp-ibm:BSD:*)
+ 	echo romp-ibm-bsd4.4
+-	exit 0 ;;
++	exit ;;
+     ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
+ 	echo romp-ibm-bsd${UNAME_RELEASE}   # 4.3 with uname added to
+-	exit 0 ;;                           # report: romp-ibm BSD 4.3
++	exit ;;                             # report: romp-ibm BSD 4.3
+     *:BOSX:*:*)
+ 	echo rs6000-bull-bosx
+-	exit 0 ;;
++	exit ;;
+     DPX/2?00:B.O.S.:*:*)
+ 	echo m68k-bull-sysv3
+-	exit 0 ;;
++	exit ;;
+     9000/[34]??:4.3bsd:1.*:*)
+ 	echo m68k-hp-bsd
+-	exit 0 ;;
++	exit ;;
+     hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)
+ 	echo m68k-hp-bsd4.4
+-	exit 0 ;;
++	exit ;;
+     9000/[34678]??:HP-UX:*:*)
+ 	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
+ 	case "${UNAME_MACHINE}" in
+@@ -648,9 +648,19 @@
+ 	esac
+ 	if [ ${HP_ARCH} = "hppa2.0w" ]
+ 	then
+-	    # avoid double evaluation of $set_cc_for_build
+-	    test -n "$CC_FOR_BUILD" || eval $set_cc_for_build
+-	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E -) | grep __LP64__ >/dev/null
++	    eval $set_cc_for_build
++
++	    # hppa2.0w-hp-hpux* has a 64-bit kernel and a compiler generating
++	    # 32-bit code.  hppa64-hp-hpux* has the same kernel and a compiler
++	    # generating 64-bit code.  GNU and HP use different nomenclature:
++	    #
++	    # $ CC_FOR_BUILD=cc ./config.guess
++	    # => hppa2.0w-hp-hpux11.23
++	    # $ CC_FOR_BUILD="cc +DA2.0w" ./config.guess
++	    # => hppa64-hp-hpux11.23
++
++	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) |
++		grep -q __LP64__
+ 	    then
+ 		HP_ARCH="hppa2.0w"
+ 	    else
+@@ -658,11 +668,11 @@
+ 	    fi
+ 	fi
+ 	echo ${HP_ARCH}-hp-hpux${HPUX_REV}
+-	exit 0 ;;
++	exit ;;
+     ia64:HP-UX:*:*)
+ 	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
+ 	echo ia64-hp-hpux${HPUX_REV}
+-	exit 0 ;;
++	exit ;;
+     3050*:HI-UX:*:*)
+ 	eval $set_cc_for_build
+ 	sed 's/^	//' << EOF >$dummy.c
+@@ -690,202 +700,164 @@
+ 	  exit (0);
+ 	}
+ EOF
+-	$CC_FOR_BUILD -o $dummy $dummy.c && $dummy && exit 0
++	$CC_FOR_BUILD -o $dummy $dummy.c && SYSTEM_NAME=`$dummy` &&
++		{ echo "$SYSTEM_NAME"; exit; }
+ 	echo unknown-hitachi-hiuxwe2
+-	exit 0 ;;
++	exit ;;
+     9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:* )
+ 	echo hppa1.1-hp-bsd
+-	exit 0 ;;
++	exit ;;
+     9000/8??:4.3bsd:*:*)
+ 	echo hppa1.0-hp-bsd
+-	exit 0 ;;
++	exit ;;
+     *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
+ 	echo hppa1.0-hp-mpeix
+-	exit 0 ;;
++	exit ;;
+     hp7??:OSF1:*:* | hp8?[79]:OSF1:*:* )
+ 	echo hppa1.1-hp-osf
+-	exit 0 ;;
++	exit ;;
+     hp8??:OSF1:*:*)
+ 	echo hppa1.0-hp-osf
+-	exit 0 ;;
++	exit ;;
+     i*86:OSF1:*:*)
+ 	if [ -x /usr/sbin/sysversion ] ; then
+ 	    echo ${UNAME_MACHINE}-unknown-osf1mk
+ 	else
+ 	    echo ${UNAME_MACHINE}-unknown-osf1
+ 	fi
+-	exit 0 ;;
++	exit ;;
+     parisc*:Lites*:*:*)
+ 	echo hppa1.1-hp-lites
+-	exit 0 ;;
++	exit ;;
+     C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
+ 	echo c1-convex-bsd
+-        exit 0 ;;
++        exit ;;
+     C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
+ 	if getsysinfo -f scalar_acc
+ 	then echo c32-convex-bsd
+ 	else echo c2-convex-bsd
+ 	fi
+-        exit 0 ;;
++        exit ;;
+     C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
+ 	echo c34-convex-bsd
+-        exit 0 ;;
++        exit ;;
+     C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
+ 	echo c38-convex-bsd
+-        exit 0 ;;
++        exit ;;
+     C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
+ 	echo c4-convex-bsd
+-        exit 0 ;;
++        exit ;;
+     CRAY*Y-MP:*:*:*)
+ 	echo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+-	exit 0 ;;
++	exit ;;
+     CRAY*[A-Z]90:*:*:*)
+ 	echo ${UNAME_MACHINE}-cray-unicos${UNAME_RELEASE} \
+ 	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
+ 	      -e y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/ \
+ 	      -e 's/\.[^.]*$/.X/'
+-	exit 0 ;;
++	exit ;;
+     CRAY*TS:*:*:*)
+ 	echo t90-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+-	exit 0 ;;
++	exit ;;
+     CRAY*T3E:*:*:*)
+ 	echo alphaev5-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+-	exit 0 ;;
++	exit ;;
+     CRAY*SV1:*:*:*)
+ 	echo sv1-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+-	exit 0 ;;
++	exit ;;
+     *:UNICOS/mp:*:*)
+ 	echo craynv-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+-	exit 0 ;;
++	exit ;;
+     F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
+ 	FUJITSU_PROC=`uname -m | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
+         FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
+         FUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`
+         echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
+-        exit 0 ;;
++        exit ;;
+     5000:UNIX_System_V:4.*:*)
+         FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
+         FUJITSU_REL=`echo ${UNAME_RELEASE} | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/ /_/'`
+         echo "sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
+-	exit 0 ;;
++	exit ;;
+     i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
+ 	echo ${UNAME_MACHINE}-pc-bsdi${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     sparc*:BSD/OS:*:*)
+ 	echo sparc-unknown-bsdi${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     *:BSD/OS:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     *:FreeBSD:*:*)
+-	echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
+-	exit 0 ;;
++	case ${UNAME_MACHINE} in
++	    pc98)
++		echo i386-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
++	    amd64)
++		echo x86_64-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
++	    *)
++		echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
++	esac
++	exit ;;
+     i*:CYGWIN*:*)
+ 	echo ${UNAME_MACHINE}-pc-cygwin
+-	exit 0 ;;
+-    i*:MINGW*:*)
++	exit ;;
++    *:MINGW*:*)
+ 	echo ${UNAME_MACHINE}-pc-mingw32
+-	exit 0 ;;
++	exit ;;
++    i*:windows32*:*)
++    	# uname -m includes "-pc" on this system.
++    	echo ${UNAME_MACHINE}-mingw32
++	exit ;;
+     i*:PW*:*)
+ 	echo ${UNAME_MACHINE}-pc-pw32
+-	exit 0 ;;
+-    x86:Interix*:[3-6]*)
+-	echo i586-pc-interix${UNAME_RELEASE}|sed -e 's/\..*//'
+-	exit 0 ;;
++	exit ;;
++    *:Interix*:*)
++    	case ${UNAME_MACHINE} in
++	    x86)
++		echo i586-pc-interix${UNAME_RELEASE}
++		exit ;;
++	    authenticamd | genuineintel | EM64T)
++		echo x86_64-unknown-interix${UNAME_RELEASE}
++		exit ;;
++	    IA64)
++		echo ia64-unknown-interix${UNAME_RELEASE}
++		exit ;;
++	esac ;;
+     [345]86:Windows_95:* | [345]86:Windows_98:* | [345]86:Windows_NT:*)
+ 	echo i${UNAME_MACHINE}-pc-mks
+-	exit 0 ;;
++	exit ;;
++    8664:Windows_NT:*)
++	echo x86_64-pc-mks
++	exit ;;
+     i*:Windows_NT*:* | Pentium*:Windows_NT*:*)
+ 	# How do we know it's Interix rather than the generic POSIX subsystem?
+ 	# It also conflicts with pre-2.0 versions of AT&T UWIN. Should we
+ 	# UNAME_MACHINE based on the output of uname instead of i386?
+ 	echo i586-pc-interix
+-	exit 0 ;;
++	exit ;;
+     i*:UWIN*:*)
+ 	echo ${UNAME_MACHINE}-pc-uwin
+-	exit 0 ;;
++	exit ;;
++    amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
++	echo x86_64-unknown-cygwin
++	exit ;;
+     p*:CYGWIN*:*)
+ 	echo powerpcle-unknown-cygwin
+-	exit 0 ;;
++	exit ;;
+     prep*:SunOS:5.*:*)
+ 	echo powerpcle-unknown-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+-	exit 0 ;;
++	exit ;;
+     *:GNU:*:*)
+ 	# the GNU system
+ 	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
+-	exit 0 ;;
++	exit ;;
+     *:GNU/*:*:*)
+ 	# other systems with GNU libc and userland
+ 	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-gnu
+-	exit 0 ;;
++	exit ;;
+     i*86:Minix:*:*)
+ 	echo ${UNAME_MACHINE}-pc-minix
+-	exit 0 ;;
+-    arm*:Linux:*:*)
+-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+-	exit 0 ;;
+-    cris:Linux:*:*)
+-	echo cris-axis-linux-gnu
+-	exit 0 ;;
+-    crisv32:Linux:*:*)
+-	echo crisv32-axis-linux-gnu
+-	exit 0 ;;
+-    frv:Linux:*:*)
+-    	echo frv-unknown-linux-gnu
+-	exit 0 ;;
+-    ia64:Linux:*:*)
+-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+-	exit 0 ;;
+-    m32r*:Linux:*:*)
+-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+-	exit 0 ;;
+-    m68*:Linux:*:*)
+-	echo ${UNAME_MACHINE}-unknown-linux-gnu
+-	exit 0 ;;
+-    mips:Linux:*:*)
+-	eval $set_cc_for_build
+-	sed 's/^	//' << EOF >$dummy.c
+-	#undef CPU
+-	#undef mips
+-	#undef mipsel
+-	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
+-	CPU=mipsel
+-	#else
+-	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
+-	CPU=mips
+-	#else
+-	CPU=
+-	#endif
+-	#endif
+-EOF
+-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
+-	test x"${CPU}" != x && echo "${CPU}-unknown-linux-gnu" && exit 0
+-	;;
+-    mips64:Linux:*:*)
+-	eval $set_cc_for_build
+-	sed 's/^	//' << EOF >$dummy.c
+-	#undef CPU
+-	#undef mips64
+-	#undef mips64el
+-	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
+-	CPU=mips64el
+-	#else
+-	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
+-	CPU=mips64
+-	#else
+-	CPU=
+-	#endif
+-	#endif
+-EOF
+-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
+-	test x"${CPU}" != x && echo "${CPU}-unknown-linux-gnu" && exit 0
+-	;;
+-    ppc:Linux:*:*)
+-	echo powerpc-unknown-linux-gnu
+-	exit 0 ;;
+-    ppc64:Linux:*:*)
+-	echo powerpc64-unknown-linux-gnu
+-	exit 0 ;;
++	exit ;;
+     alpha:Linux:*:*)
+ 	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
+ 	  EV5)   UNAME_MACHINE=alphaev5 ;;
+@@ -896,10 +868,80 @@
+ 	  EV67)  UNAME_MACHINE=alphaev67 ;;
+ 	  EV68*) UNAME_MACHINE=alphaev68 ;;
+         esac
+-	objdump --private-headers /bin/sh | grep ld.so.1 >/dev/null
++	objdump --private-headers /bin/sh | grep -q ld.so.1
+ 	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
+ 	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
+-	exit 0 ;;
++	exit ;;
++    arm*:Linux:*:*)
++	eval $set_cc_for_build
++	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
++	    | grep -q __ARM_EABI__
++	then
++	    echo ${UNAME_MACHINE}-unknown-linux-gnu
++	else
++	    echo ${UNAME_MACHINE}-unknown-linux-gnueabi
++	fi
++	exit ;;
++    avr32*:Linux:*:*)
++	echo ${UNAME_MACHINE}-unknown-linux-gnu
++	exit ;;
++    cris:Linux:*:*)
++	echo cris-axis-linux-gnu
++	exit ;;
++    crisv32:Linux:*:*)
++	echo crisv32-axis-linux-gnu
++	exit ;;
++    frv:Linux:*:*)
++    	echo frv-unknown-linux-gnu
++	exit ;;
++    i*86:Linux:*:*)
++	LIBC=gnu
++	eval $set_cc_for_build
++	sed 's/^	//' << EOF >$dummy.c
++	#ifdef __dietlibc__
++	LIBC=dietlibc
++	#endif
++EOF
++	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC'`
++	echo "${UNAME_MACHINE}-pc-linux-${LIBC}"
++	exit ;;
++    ia64:Linux:*:*)
++	echo ${UNAME_MACHINE}-unknown-linux-gnu
++	exit ;;
++    m32r*:Linux:*:*)
++	echo ${UNAME_MACHINE}-unknown-linux-gnu
++	exit ;;
++    m68*:Linux:*:*)
++	echo ${UNAME_MACHINE}-unknown-linux-gnu
++	exit ;;
++    mips:Linux:*:* | mips64:Linux:*:*)
++	eval $set_cc_for_build
++	sed 's/^	//' << EOF >$dummy.c
++	#undef CPU
++	#undef ${UNAME_MACHINE}
++	#undef ${UNAME_MACHINE}el
++	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
++	CPU=${UNAME_MACHINE}el
++	#else
++	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
++	CPU=${UNAME_MACHINE}
++	#else
++	CPU=
++	#endif
++	#endif
++EOF
++	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^CPU'`
++	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
++	;;
++    or32:Linux:*:*)
++	echo or32-unknown-linux-gnu
++	exit ;;
++    padre:Linux:*:*)
++	echo sparc-unknown-linux-gnu
++	exit ;;
++    parisc64:Linux:*:* | hppa64:Linux:*:*)
++	echo hppa64-unknown-linux-gnu
++	exit ;;
+     parisc:Linux:*:* | hppa:Linux:*:*)
+ 	# Look for CPU level
+ 	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
+@@ -907,87 +949,40 @@
+ 	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
+ 	  *)    echo hppa-unknown-linux-gnu ;;
+ 	esac
+-	exit 0 ;;
+-    parisc64:Linux:*:* | hppa64:Linux:*:*)
+-	echo hppa64-unknown-linux-gnu
+-	exit 0 ;;
++	exit ;;
++    ppc64:Linux:*:*)
++	echo powerpc64-unknown-linux-gnu
++	exit ;;
++    ppc:Linux:*:*)
++	echo powerpc-unknown-linux-gnu
++	exit ;;
+     s390:Linux:*:* | s390x:Linux:*:*)
+ 	echo ${UNAME_MACHINE}-ibm-linux
+-	exit 0 ;;
++	exit ;;
+     sh64*:Linux:*:*)
+     	echo ${UNAME_MACHINE}-unknown-linux-gnu
+-	exit 0 ;;
++	exit ;;
+     sh*:Linux:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-linux-gnu
+-	exit 0 ;;
++	exit ;;
+     sparc:Linux:*:* | sparc64:Linux:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-linux-gnu
+-	exit 0 ;;
++	exit ;;
++    vax:Linux:*:*)
++	echo ${UNAME_MACHINE}-dec-linux-gnu
++	exit ;;
+     x86_64:Linux:*:*)
+ 	echo x86_64-unknown-linux-gnu
+-	exit 0 ;;
+-    i*86:Linux:*:*)
+-	# The BFD linker knows what the default object file format is, so
+-	# first see if it will tell us. cd to the root directory to prevent
+-	# problems with other programs or directories called `ld' in the path.
+-	# Set LC_ALL=C to ensure ld outputs messages in English.
+-	ld_supported_targets=`cd /; LC_ALL=C ld --help 2>&1 \
+-			 | sed -ne '/supported targets:/!d
+-				    s/[ 	][ 	]*/ /g
+-				    s/.*supported targets: *//
+-				    s/ .*//
+-				    p'`
+-        case "$ld_supported_targets" in
+-	  elf32-i386)
+-		TENTATIVE="${UNAME_MACHINE}-pc-linux-gnu"
+-		;;
+-	  a.out-i386-linux)
+-		echo "${UNAME_MACHINE}-pc-linux-gnuaout"
+-		exit 0 ;;
+-	  coff-i386)
+-		echo "${UNAME_MACHINE}-pc-linux-gnucoff"
+-		exit 0 ;;
+-	  "")
+-		# Either a pre-BFD a.out linker (linux-gnuoldld) or
+-		# one that does not give us useful --help.
+-		echo "${UNAME_MACHINE}-pc-linux-gnuoldld"
+-		exit 0 ;;
+-	esac
+-	# Determine whether the default compiler is a.out or elf
+-	eval $set_cc_for_build
+-	sed 's/^	//' << EOF >$dummy.c
+-	#include <features.h>
+-	#ifdef __ELF__
+-	# ifdef __GLIBC__
+-	#  if __GLIBC__ >= 2
+-	LIBC=gnu
+-	#  else
+-	LIBC=gnulibc1
+-	#  endif
+-	# else
+-	LIBC=gnulibc1
+-	# endif
+-	#else
+-	#ifdef __INTEL_COMPILER
+-	LIBC=gnu
+-	#else
+-	LIBC=gnuaout
+-	#endif
+-	#endif
+-	#ifdef __dietlibc__
+-	LIBC=dietlibc
+-	#endif
+-EOF
+-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
+-	test x"${LIBC}" != x && echo "${UNAME_MACHINE}-pc-linux-${LIBC}" && exit 0
+-	test x"${TENTATIVE}" != x && echo "${TENTATIVE}" && exit 0
+-	;;
++	exit ;;
++    xtensa*:Linux:*:*)
++    	echo ${UNAME_MACHINE}-unknown-linux-gnu
++	exit ;;
+     i*86:DYNIX/ptx:4*:*)
+ 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
+ 	# earlier versions are messed up and put the nodename in both
+ 	# sysname and nodename.
+ 	echo i386-sequent-sysv4
+-	exit 0 ;;
++	exit ;;
+     i*86:UNIX_SV:4.2MP:2.*)
+         # Unixware is an offshoot of SVR4, but it has its own version
+         # number series starting with 2...
+@@ -995,27 +990,27 @@
+ 	# I just have to hope.  -- rms.
+         # Use sysv4.2uw... so that sysv4* matches it.
+ 	echo ${UNAME_MACHINE}-pc-sysv4.2uw${UNAME_VERSION}
+-	exit 0 ;;
++	exit ;;
+     i*86:OS/2:*:*)
+ 	# If we were able to find `uname', then EMX Unix compatibility
+ 	# is probably installed.
+ 	echo ${UNAME_MACHINE}-pc-os2-emx
+-	exit 0 ;;
++	exit ;;
+     i*86:XTS-300:*:STOP)
+ 	echo ${UNAME_MACHINE}-unknown-stop
+-	exit 0 ;;
++	exit ;;
+     i*86:atheos:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-atheos
+-	exit 0 ;;
+-	i*86:syllable:*:*)
++	exit ;;
++    i*86:syllable:*:*)
+ 	echo ${UNAME_MACHINE}-pc-syllable
+-	exit 0 ;;
+-    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.0*:*)
++	exit ;;
++    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.[02]*:*)
+ 	echo i386-unknown-lynxos${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     i*86:*DOS:*:*)
+ 	echo ${UNAME_MACHINE}-pc-msdosdjgpp
+-	exit 0 ;;
++	exit ;;
+     i*86:*:4.*:* | i*86:SYSTEM_V:4.*:*)
+ 	UNAME_REL=`echo ${UNAME_RELEASE} | sed 's/\/MP$//'`
+ 	if grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then
+@@ -1023,15 +1018,16 @@
+ 	else
+ 		echo ${UNAME_MACHINE}-pc-sysv${UNAME_REL}
+ 	fi
+-	exit 0 ;;
+-    i*86:*:5:[78]*)
++	exit ;;
++    i*86:*:5:[678]*)
++    	# UnixWare 7.x, OpenUNIX and OpenServer 6.
+ 	case `/bin/uname -X | grep "^Machine"` in
+ 	    *486*)	     UNAME_MACHINE=i486 ;;
+ 	    *Pentium)	     UNAME_MACHINE=i586 ;;
+ 	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
+ 	esac
+ 	echo ${UNAME_MACHINE}-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
+-	exit 0 ;;
++	exit ;;
+     i*86:*:3.2:*)
+ 	if test -f /usr/options/cb.name; then
+ 		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
+@@ -1049,73 +1045,86 @@
+ 	else
+ 		echo ${UNAME_MACHINE}-pc-sysv32
+ 	fi
+-	exit 0 ;;
++	exit ;;
+     pc:*:*:*)
+ 	# Left here for compatibility:
+         # uname -m prints for DJGPP always 'pc', but it prints nothing about
+-        # the processor, so we play safe by assuming i386.
+-	echo i386-pc-msdosdjgpp
+-        exit 0 ;;
++        # the processor, so we play safe by assuming i586.
++	# Note: whatever this is, it MUST be the same as what config.sub
++	# prints for the "djgpp" host, or else GDB configury will decide that
++	# this is a cross-build.
++	echo i586-pc-msdosdjgpp
++        exit ;;
+     Intel:Mach:3*:*)
+ 	echo i386-pc-mach3
+-	exit 0 ;;
++	exit ;;
+     paragon:*:*:*)
+ 	echo i860-intel-osf1
+-	exit 0 ;;
++	exit ;;
+     i860:*:4.*:*) # i860-SVR4
+ 	if grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then
+ 	  echo i860-stardent-sysv${UNAME_RELEASE} # Stardent Vistra i860-SVR4
+ 	else # Add other i860-SVR4 vendors below as they are discovered.
+ 	  echo i860-unknown-sysv${UNAME_RELEASE}  # Unknown i860-SVR4
+ 	fi
+-	exit 0 ;;
++	exit ;;
+     mini*:CTIX:SYS*5:*)
+ 	# "miniframe"
+ 	echo m68010-convergent-sysv
+-	exit 0 ;;
++	exit ;;
+     mc68k:UNIX:SYSTEM5:3.51m)
+ 	echo m68k-convergent-sysv
+-	exit 0 ;;
++	exit ;;
+     M680?0:D-NIX:5.3:*)
+ 	echo m68k-diab-dnix
+-	exit 0 ;;
++	exit ;;
+     M68*:*:R3V[5678]*:*)
+-	test -r /sysV68 && echo 'm68k-motorola-sysv' && exit 0 ;;
++	test -r /sysV68 && { echo 'm68k-motorola-sysv'; exit; } ;;
+     3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)
+ 	OS_REL=''
+ 	test -r /etc/.relid \
+ 	&& OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
+ 	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+-	  && echo i486-ncr-sysv4.3${OS_REL} && exit 0
++	  && { echo i486-ncr-sysv4.3${OS_REL}; exit; }
+ 	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
+-	  && echo i586-ncr-sysv4.3${OS_REL} && exit 0 ;;
++	  && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
+     3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
+         /bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+-          && echo i486-ncr-sysv4 && exit 0 ;;
++          && { echo i486-ncr-sysv4; exit; } ;;
++    NCR*:*:4.2:* | MPRAS*:*:4.2:*)
++	OS_REL='.3'
++	test -r /etc/.relid \
++	    && OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
++	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
++	    && { echo i486-ncr-sysv4.3${OS_REL}; exit; }
++	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
++	    && { echo i586-ncr-sysv4.3${OS_REL}; exit; }
++	/bin/uname -p 2>/dev/null | /bin/grep pteron >/dev/null \
++	    && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
+     m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
+ 	echo m68k-unknown-lynxos${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     mc68030:UNIX_System_V:4.*:*)
+ 	echo m68k-atari-sysv4
+-	exit 0 ;;
++	exit ;;
+     TSUNAMI:LynxOS:2.*:*)
+ 	echo sparc-unknown-lynxos${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     rs6000:LynxOS:2.*:*)
+ 	echo rs6000-unknown-lynxos${UNAME_RELEASE}
+-	exit 0 ;;
+-    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.0*:*)
++	exit ;;
++    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.[02]*:*)
+ 	echo powerpc-unknown-lynxos${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     SM[BE]S:UNIX_SV:*:*)
+ 	echo mips-dde-sysv${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     RM*:ReliantUNIX-*:*:*)
+ 	echo mips-sni-sysv4
+-	exit 0 ;;
++	exit ;;
+     RM*:SINIX-*:*:*)
+ 	echo mips-sni-sysv4
+-	exit 0 ;;
++	exit ;;
+     *:SINIX-*:*:*)
+ 	if uname -p 2>/dev/null >/dev/null ; then
+ 		UNAME_MACHINE=`(uname -p) 2>/dev/null`
+@@ -1123,69 +1132,94 @@
+ 	else
+ 		echo ns32k-sni-sysv
+ 	fi
+-	exit 0 ;;
++	exit ;;
+     PENTIUM:*:4.0*:*) # Unisys `ClearPath HMP IX 4000' SVR4/MP effort
+                       # says <Richard.M.Bartel@ccMail.Census.GOV>
+         echo i586-unisys-sysv4
+-        exit 0 ;;
++        exit ;;
+     *:UNIX_System_V:4*:FTX*)
+ 	# From Gerald Hewes <hewes@openmarket.com>.
+ 	# How about differentiating between stratus architectures? -djm
+ 	echo hppa1.1-stratus-sysv4
+-	exit 0 ;;
++	exit ;;
+     *:*:*:FTX*)
+ 	# From seanf@swdc.stratus.com.
+ 	echo i860-stratus-sysv4
+-	exit 0 ;;
++	exit ;;
++    i*86:VOS:*:*)
++	# From Paul.Green@stratus.com.
++	echo ${UNAME_MACHINE}-stratus-vos
++	exit ;;
+     *:VOS:*:*)
+ 	# From Paul.Green@stratus.com.
+ 	echo hppa1.1-stratus-vos
+-	exit 0 ;;
++	exit ;;
+     mc68*:A/UX:*:*)
+ 	echo m68k-apple-aux${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     news*:NEWS-OS:6*:*)
+ 	echo mips-sony-newsos6
+-	exit 0 ;;
++	exit ;;
+     R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
+ 	if [ -d /usr/nec ]; then
+ 	        echo mips-nec-sysv${UNAME_RELEASE}
+ 	else
+ 	        echo mips-unknown-sysv${UNAME_RELEASE}
+ 	fi
+-        exit 0 ;;
++        exit ;;
+     BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
+ 	echo powerpc-be-beos
+-	exit 0 ;;
++	exit ;;
+     BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.
+ 	echo powerpc-apple-beos
+-	exit 0 ;;
++	exit ;;
+     BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
+ 	echo i586-pc-beos
+-	exit 0 ;;
++	exit ;;
++    BePC:Haiku:*:*)	# Haiku running on Intel PC compatible.
++	echo i586-pc-haiku
++	exit ;;
+     SX-4:SUPER-UX:*:*)
+ 	echo sx4-nec-superux${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     SX-5:SUPER-UX:*:*)
+ 	echo sx5-nec-superux${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     SX-6:SUPER-UX:*:*)
+ 	echo sx6-nec-superux${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
++    SX-7:SUPER-UX:*:*)
++	echo sx7-nec-superux${UNAME_RELEASE}
++	exit ;;
++    SX-8:SUPER-UX:*:*)
++	echo sx8-nec-superux${UNAME_RELEASE}
++	exit ;;
++    SX-8R:SUPER-UX:*:*)
++	echo sx8r-nec-superux${UNAME_RELEASE}
++	exit ;;
+     Power*:Rhapsody:*:*)
+ 	echo powerpc-apple-rhapsody${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     *:Rhapsody:*:*)
+ 	echo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     *:Darwin:*:*)
+ 	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
+ 	case $UNAME_PROCESSOR in
+-	    *86) UNAME_PROCESSOR=i686 ;;
++	    i386)
++		eval $set_cc_for_build
++		if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
++		  if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
++		      (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
++		      grep IS_64BIT_ARCH >/dev/null
++		  then
++		      UNAME_PROCESSOR="x86_64"
++		  fi
++		fi ;;
+ 	    unknown) UNAME_PROCESSOR=powerpc ;;
+ 	esac
+ 	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     *:procnto*:*:* | *:QNX:[0123456789]*:*)
+ 	UNAME_PROCESSOR=`uname -p`
+ 	if test "$UNAME_PROCESSOR" = "x86"; then
+@@ -1193,22 +1227,25 @@
+ 		UNAME_MACHINE=pc
+ 	fi
+ 	echo ${UNAME_PROCESSOR}-${UNAME_MACHINE}-nto-qnx${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     *:QNX:*:4*)
+ 	echo i386-pc-qnx
+-	exit 0 ;;
++	exit ;;
++    NSE-?:NONSTOP_KERNEL:*:*)
++	echo nse-tandem-nsk${UNAME_RELEASE}
++	exit ;;
+     NSR-?:NONSTOP_KERNEL:*:*)
+ 	echo nsr-tandem-nsk${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     *:NonStop-UX:*:*)
+ 	echo mips-compaq-nonstopux
+-	exit 0 ;;
++	exit ;;
+     BS2000:POSIX*:*:*)
+ 	echo bs2000-siemens-sysv
+-	exit 0 ;;
++	exit ;;
+     DS/*:UNIX_System_V:*:*)
+ 	echo ${UNAME_MACHINE}-${UNAME_SYSTEM}-${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     *:Plan9:*:*)
+ 	# "uname -m" is not consistent, so use $cputype instead. 386
+ 	# is converted to i386 for consistency with other x86
+@@ -1219,41 +1256,50 @@
+ 	    UNAME_MACHINE="$cputype"
+ 	fi
+ 	echo ${UNAME_MACHINE}-unknown-plan9
+-	exit 0 ;;
++	exit ;;
+     *:TOPS-10:*:*)
+ 	echo pdp10-unknown-tops10
+-	exit 0 ;;
++	exit ;;
+     *:TENEX:*:*)
+ 	echo pdp10-unknown-tenex
+-	exit 0 ;;
++	exit ;;
+     KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)
+ 	echo pdp10-dec-tops20
+-	exit 0 ;;
++	exit ;;
+     XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)
+ 	echo pdp10-xkl-tops20
+-	exit 0 ;;
++	exit ;;
+     *:TOPS-20:*:*)
+ 	echo pdp10-unknown-tops20
+-	exit 0 ;;
++	exit ;;
+     *:ITS:*:*)
+ 	echo pdp10-unknown-its
+-	exit 0 ;;
++	exit ;;
+     SEI:*:*:SEIUX)
+         echo mips-sei-seiux${UNAME_RELEASE}
+-	exit 0 ;;
++	exit ;;
+     *:DragonFly:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-dragonfly`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
+-	exit 0 ;;
++	exit ;;
+     *:*VMS:*:*)
+     	UNAME_MACHINE=`(uname -p) 2>/dev/null`
+ 	case "${UNAME_MACHINE}" in
+-	    A*) echo alpha-dec-vms && exit 0 ;;
+-	    I*) echo ia64-dec-vms && exit 0 ;;
+-	    V*) echo vax-dec-vms && exit 0 ;;
++	    A*) echo alpha-dec-vms ; exit ;;
++	    I*) echo ia64-dec-vms ; exit ;;
++	    V*) echo vax-dec-vms ; exit ;;
+ 	esac ;;
+     *:XENIX:*:SysV)
+ 	echo i386-pc-xenix
+-	exit 0 ;;
++	exit ;;
++    i*86:skyos:*:*)
++	echo ${UNAME_MACHINE}-pc-skyos`echo ${UNAME_RELEASE}` | sed -e 's/ .*$//'
++	exit ;;
++    i*86:rdos:*:*)
++	echo ${UNAME_MACHINE}-pc-rdos
++	exit ;;
++    i*86:AROS:*:*)
++	echo ${UNAME_MACHINE}-pc-aros
++	exit ;;
+ esac
+ 
+ #echo '(No uname command or uname output not recognized.)' 1>&2
+@@ -1285,7 +1331,7 @@
+ #endif
+ 
+ #if defined (__arm) && defined (__acorn) && defined (__unix)
+-  printf ("arm-acorn-riscix"); exit (0);
++  printf ("arm-acorn-riscix\n"); exit (0);
+ #endif
+ 
+ #if defined (hp300) && !defined (hpux)
+@@ -1374,11 +1420,12 @@
+ }
+ EOF
+ 
+-$CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && $dummy && exit 0
++$CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && SYSTEM_NAME=`$dummy` &&
++	{ echo "$SYSTEM_NAME"; exit; }
+ 
+ # Apollos put the system type in the environment.
+ 
+-test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit 0; }
++test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit; }
+ 
+ # Convex versions that predate uname can use getsysinfo(1)
+ 
+@@ -1387,22 +1434,22 @@
+     case `getsysinfo -f cpu_type` in
+     c1*)
+ 	echo c1-convex-bsd
+-	exit 0 ;;
++	exit ;;
+     c2*)
+ 	if getsysinfo -f scalar_acc
+ 	then echo c32-convex-bsd
+ 	else echo c2-convex-bsd
+ 	fi
+-	exit 0 ;;
++	exit ;;
+     c34*)
+ 	echo c34-convex-bsd
+-	exit 0 ;;
++	exit ;;
+     c38*)
+ 	echo c38-convex-bsd
+-	exit 0 ;;
++	exit ;;
+     c4*)
+ 	echo c4-convex-bsd
+-	exit 0 ;;
++	exit ;;
+     esac
+ fi
+ 
+@@ -1413,7 +1460,9 @@
+ the operating system you are using. It is advised that you
+ download the most up to date version of the config scripts from
+ 
+-    ftp://ftp.gnu.org/pub/gnu/config/
++  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
++and
++  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD
+ 
+ If the version you run ($0) is already up to date, please
+ send the following data and any information you think might be
+diff --git a/config.sub b/config.sub
+--- config.sub
++++ config.sub
+@@ -1,9 +1,10 @@
+ #! /bin/sh
+ # Configuration validation subroutine script.
+ #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
+-#   2000, 2001, 2002, 2003, 2004 Free Software Foundation, Inc.
++#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010
++#   Free Software Foundation, Inc.
+ 
+-timestamp='2004-11-30'
++timestamp='2010-01-22'
+ 
+ # This file is (in principle) common to ALL GNU software.
+ # The presence of a machine in this file suggests that SOME GNU software
+@@ -21,22 +22,26 @@
+ #
+ # You should have received a copy of the GNU General Public License
+ # along with this program; if not, write to the Free Software
+-# Foundation, Inc., 59 Temple Place - Suite 330,
+-# Boston, MA 02111-1307, USA.
+-
++# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
++# 02110-1301, USA.
++#
+ # As a special exception to the GNU General Public License, if you
+ # distribute this file as part of a program that contains a
+ # configuration script generated by Autoconf, you may include it under
+ # the same distribution terms that you use for the rest of that program.
+ 
++
+ # Please send patches to <config-patches@gnu.org>.  Submit a context
+-# diff and a properly formatted ChangeLog entry.
++# diff and a properly formatted GNU ChangeLog entry.
+ #
+ # Configuration subroutine to validate and canonicalize a configuration type.
+ # Supply the specified configuration type as an argument.
+ # If it is invalid, we print an error message on stderr and exit with code 1.
+ # Otherwise, we print the canonical config type on stdout and succeed.
+ 
++# You can get the latest version of this script from:
++# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD
++
+ # This file is supposed to be the same for all GNU packages
+ # and recognize all the CPU types, system types and aliases
+ # that are meaningful with *any* GNU software.
+@@ -70,8 +75,9 @@
+ version="\
+ GNU config.sub ($timestamp)
+ 
+-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004
+-Free Software Foundation, Inc.
++Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
++2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free
++Software Foundation, Inc.
+ 
+ This is free software; see the source for copying conditions.  There is NO
+ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
+@@ -83,11 +89,11 @@
+ while test $# -gt 0 ; do
+   case $1 in
+     --time-stamp | --time* | -t )
+-       echo "$timestamp" ; exit 0 ;;
++       echo "$timestamp" ; exit ;;
+     --version | -v )
+-       echo "$version" ; exit 0 ;;
++       echo "$version" ; exit ;;
+     --help | --h* | -h )
+-       echo "$usage"; exit 0 ;;
++       echo "$usage"; exit ;;
+     -- )     # Stop option processing
+        shift; break ;;
+     - )	# Use stdin as input.
+@@ -99,7 +105,7 @@
+     *local*)
+        # First pass through any local machine types.
+        echo $1
+-       exit 0;;
++       exit ;;
+ 
+     * )
+        break ;;
+@@ -118,8 +124,10 @@
+ # Here we must recognize all the valid KERNEL-OS combinations.
+ maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
+ case $maybe_os in
+-  nto-qnx* | linux-gnu* | linux-dietlibc | linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | \
+-  kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* | storm-chaos* | os2-emx* | rtmk-nova*)
++  nto-qnx* | linux-gnu* | linux-dietlibc | linux-newlib* | linux-uclibc* | \
++  uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* | \
++  kopensolaris*-gnu* | \
++  storm-chaos* | os2-emx* | rtmk-nova*)
+     os=-$maybe_os
+     basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
+     ;;
+@@ -145,10 +153,13 @@
+ 	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
+ 	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
+ 	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
+-	-apple | -axis | -knuth | -cray)
++	-apple | -axis | -knuth | -cray | -microblaze)
+ 		os=
+ 		basic_machine=$1
+ 		;;
++        -bluegene*)
++	        os=-cnk
++		;;
+ 	-sim | -cisco | -oki | -wec | -winbond)
+ 		os=
+ 		basic_machine=$1
+@@ -170,6 +181,10 @@
+ 	-hiux*)
+ 		os=-hiuxwe2
+ 		;;
++	-sco6)
++		os=-sco5v6
++		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++		;;
+ 	-sco5)
+ 		os=-sco3.2v5
+ 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+@@ -186,6 +201,10 @@
+ 		# Don't forget version if it is 3.2v4 or newer.
+ 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+ 		;;
++	-sco5v6*)
++		# Don't forget version if it is 3.2v4 or newer.
++		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++		;;
+ 	-sco*)
+ 		os=-sco3.2v2
+ 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+@@ -230,22 +249,28 @@
+ 	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
+ 	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
+ 	| am33_2.0 \
+-	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr \
++	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr | avr32 \
++	| bfin \
+ 	| c4x | clipper \
+ 	| d10v | d30v | dlx | dsp16xx \
+-	| fr30 | frv \
++	| fido | fr30 | frv \
+ 	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
+ 	| i370 | i860 | i960 | ia64 \
+ 	| ip2k | iq2000 \
+-	| m32r | m32rle | m68000 | m68k | m88k | mcore \
++	| lm32 \
++	| m32c | m32r | m32rle | m68000 | m68k | m88k \
++	| maxq | mb | microblaze | mcore | mep | metag \
+ 	| mips | mipsbe | mipseb | mipsel | mipsle \
+ 	| mips16 \
+ 	| mips64 | mips64el \
++	| mips64octeon | mips64octeonel \
++	| mips64orion | mips64orionel \
++	| mips64r5900 | mips64r5900el \
+ 	| mips64vr | mips64vrel \
+-	| mips64orion | mips64orionel \
+ 	| mips64vr4100 | mips64vr4100el \
+ 	| mips64vr4300 | mips64vr4300el \
+ 	| mips64vr5000 | mips64vr5000el \
++	| mips64vr5900 | mips64vr5900el \
+ 	| mipsisa32 | mipsisa32el \
+ 	| mipsisa32r2 | mipsisa32r2el \
+ 	| mipsisa64 | mipsisa64el \
+@@ -254,30 +279,40 @@
+ 	| mipsisa64sr71k | mipsisa64sr71kel \
+ 	| mipstx39 | mipstx39el \
+ 	| mn10200 | mn10300 \
++	| moxie \
++	| mt \
+ 	| msp430 \
++	| nios | nios2 \
+ 	| ns16k | ns32k \
+-	| openrisc | or32 \
++	| or32 \
+ 	| pdp10 | pdp11 | pj | pjl \
+ 	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
+ 	| pyramid \
+-	| sh | sh[1234] | sh[23]e | sh[34]eb | shbe | shle | sh[1234]le | sh3ele \
++	| rx \
++	| score \
++	| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[34]eb | sheb | shbe | shle | sh[1234]le | sh3ele \
+ 	| sh64 | sh64le \
+-	| sparc | sparc64 | sparc86x | sparclet | sparclite | sparcv8 | sparcv9 | sparcv9b \
+-	| strongarm \
++	| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet | sparclite \
++	| sparcv8 | sparcv9 | sparcv9b | sparcv9v \
++	| spu | strongarm \
+ 	| tahoe | thumb | tic4x | tic80 | tron \
++	| ubicom32 \
+ 	| v850 | v850e \
+ 	| we32k \
+-	| x86 | xscale | xscalee[bl] | xstormy16 | xtensa \
+-	| z8k)
++	| x86 | xc16x | xscale | xscalee[bl] | xstormy16 | xtensa \
++	| z8k | z80)
+ 		basic_machine=$basic_machine-unknown
+ 		;;
+-	m6811 | m68hc11 | m6812 | m68hc12)
++	m6811 | m68hc11 | m6812 | m68hc12 | picochip)
+ 		# Motorola 68HC11/12.
+ 		basic_machine=$basic_machine-unknown
+ 		os=-none
+ 		;;
+ 	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
+ 		;;
++	ms1)
++		basic_machine=mt-unknown
++		;;
+ 
+ 	# We use `pc' rather than `unknown'
+ 	# because (1) that's what they normally are, and
+@@ -297,28 +332,32 @@
+ 	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
+ 	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \
+ 	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
+-	| avr-* \
+-	| bs2000-* \
++	| avr-* | avr32-* \
++	| bfin-* | bs2000-* \
+ 	| c[123]* | c30-* | [cjt]90-* | c4x-* | c54x-* | c55x-* | c6x-* \
+ 	| clipper-* | craynv-* | cydra-* \
+ 	| d10v-* | d30v-* | dlx-* \
+ 	| elxsi-* \
+-	| f30[01]-* | f700-* | fr30-* | frv-* | fx80-* \
++	| f30[01]-* | f700-* | fido-* | fr30-* | frv-* | fx80-* \
+ 	| h8300-* | h8500-* \
+ 	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
+ 	| i*86-* | i860-* | i960-* | ia64-* \
+ 	| ip2k-* | iq2000-* \
+-	| m32r-* | m32rle-* \
++	| lm32-* \
++	| m32c-* | m32r-* | m32rle-* \
+ 	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
+-	| m88110-* | m88k-* | mcore-* \
++	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* | microblaze-* \
+ 	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
+ 	| mips16-* \
+ 	| mips64-* | mips64el-* \
++	| mips64octeon-* | mips64octeonel-* \
++	| mips64orion-* | mips64orionel-* \
++	| mips64r5900-* | mips64r5900el-* \
+ 	| mips64vr-* | mips64vrel-* \
+-	| mips64orion-* | mips64orionel-* \
+ 	| mips64vr4100-* | mips64vr4100el-* \
+ 	| mips64vr4300-* | mips64vr4300el-* \
+ 	| mips64vr5000-* | mips64vr5000el-* \
++	| mips64vr5900-* | mips64vr5900el-* \
+ 	| mipsisa32-* | mipsisa32el-* \
+ 	| mipsisa32r2-* | mipsisa32r2el-* \
+ 	| mipsisa64-* | mipsisa64el-* \
+@@ -327,26 +366,35 @@
+ 	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
+ 	| mipstx39-* | mipstx39el-* \
+ 	| mmix-* \
++	| mt-* \
+ 	| msp430-* \
++	| nios-* | nios2-* \
+ 	| none-* | np1-* | ns16k-* | ns32k-* \
+ 	| orion-* \
+ 	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
+ 	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
+ 	| pyramid-* \
+-	| romp-* | rs6000-* \
+-	| sh-* | sh[1234]-* | sh[23]e-* | sh[34]eb-* | shbe-* \
++	| romp-* | rs6000-* | rx-* \
++	| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \
+ 	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
+-	| sparc-* | sparc64-* | sparc86x-* | sparclet-* | sparclite-* \
+-	| sparcv8-* | sparcv9-* | sparcv9b-* | strongarm-* | sv1-* | sx?-* \
++	| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \
++	| sparclite-* \
++	| sparcv8-* | sparcv9-* | sparcv9b-* | sparcv9v-* | strongarm-* | sv1-* | sx?-* \
+ 	| tahoe-* | thumb-* \
+ 	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
++	| tile-* | tilegx-* \
+ 	| tron-* \
++	| ubicom32-* \
+ 	| v850-* | v850e-* | vax-* \
+ 	| we32k-* \
+-	| x86-* | x86_64-* | xps100-* | xscale-* | xscalee[bl]-* \
+-	| xstormy16-* | xtensa-* \
++	| x86-* | x86_64-* | xc16x-* | xps100-* | xscale-* | xscalee[bl]-* \
++	| xstormy16-* | xtensa*-* \
+ 	| ymp-* \
+-	| z8k-*)
++	| z8k-* | z80-*)
++		;;
++	# Recognize the basic CPU types without company name, with glob match.
++	xtensa*)
++		basic_machine=$basic_machine-unknown
+ 		;;
+ 	# Recognize the various machine names and aliases which stand
+ 	# for a CPU type and a company and sometimes even an OS.
+@@ -410,6 +458,10 @@
+ 		basic_machine=m68k-apollo
+ 		os=-bsd
+ 		;;
++	aros)
++		basic_machine=i386-pc
++		os=-aros
++		;;
+ 	aux)
+ 		basic_machine=m68k-apple
+ 		os=-aux
+@@ -418,10 +470,26 @@
+ 		basic_machine=ns32k-sequent
+ 		os=-dynix
+ 		;;
++	blackfin)
++		basic_machine=bfin-unknown
++		os=-linux
++		;;
++	blackfin-*)
++		basic_machine=bfin-`echo $basic_machine | sed 's/^[^-]*-//'`
++		os=-linux
++		;;
++	bluegene*)
++		basic_machine=powerpc-ibm
++		os=-cnk
++		;;
+ 	c90)
+ 		basic_machine=c90-cray
+ 		os=-unicos
+ 		;;
++        cegcc)
++		basic_machine=arm-unknown
++		os=-cegcc
++		;;
+ 	convex-c1)
+ 		basic_machine=c1-convex
+ 		os=-bsd
+@@ -450,8 +518,8 @@
+ 		basic_machine=craynv-cray
+ 		os=-unicosmp
+ 		;;
+-	cr16c)
+-		basic_machine=cr16c-unknown
++	cr16)
++		basic_machine=cr16-unknown
+ 		os=-elf
+ 		;;
+ 	crds | unos)
+@@ -489,6 +557,10 @@
+ 		basic_machine=m88k-motorola
+ 		os=-sysv3
+ 		;;
++	dicos)
++		basic_machine=i686-pc
++		os=-dicos
++		;;
+ 	djgpp)
+ 		basic_machine=i586-pc
+ 		os=-msdosdjgpp
+@@ -643,6 +715,14 @@
+ 		basic_machine=m68k-isi
+ 		os=-sysv
+ 		;;
++	m68knommu)
++		basic_machine=m68k-unknown
++		os=-linux
++		;;
++	m68knommu-*)
++		basic_machine=m68k-`echo $basic_machine | sed 's/^[^-]*-//'`
++		os=-linux
++		;;
+ 	m88k-omron*)
+ 		basic_machine=m88k-omron
+ 		;;
+@@ -654,10 +734,17 @@
+ 		basic_machine=ns32k-utek
+ 		os=-sysv
+ 		;;
++        microblaze)
++		basic_machine=microblaze-xilinx
++		;;
+ 	mingw32)
+ 		basic_machine=i386-pc
+ 		os=-mingw32
+ 		;;
++	mingw32ce)
++		basic_machine=arm-unknown
++		os=-mingw32ce
++		;;
+ 	miniframe)
+ 		basic_machine=m68000-convergent
+ 		;;
+@@ -683,6 +770,9 @@
+ 		basic_machine=i386-pc
+ 		os=-msdos
+ 		;;
++	ms1-*)
++		basic_machine=`echo $basic_machine | sed -e 's/ms1-/mt-/'`
++		;;
+ 	mvs)
+ 		basic_machine=i370-ibm
+ 		os=-mvs
+@@ -758,9 +848,8 @@
+ 		basic_machine=hppa1.1-oki
+ 		os=-proelf
+ 		;;
+-	or32 | or32-*)
++	openrisc | openrisc-*)
+ 		basic_machine=or32-unknown
+-		os=-coff
+ 		;;
+ 	os400)
+ 		basic_machine=powerpc-ibm
+@@ -782,6 +871,14 @@
+ 		basic_machine=i860-intel
+ 		os=-osf
+ 		;;
++	parisc)
++		basic_machine=hppa-unknown
++		os=-linux
++		;;
++	parisc-*)
++		basic_machine=hppa-`echo $basic_machine | sed 's/^[^-]*-//'`
++		os=-linux
++		;;
+ 	pbd)
+ 		basic_machine=sparc-tti
+ 		;;
+@@ -791,6 +888,12 @@
+ 	pc532 | pc532-*)
+ 		basic_machine=ns32k-pc532
+ 		;;
++	pc98)
++		basic_machine=i386-pc
++		;;
++	pc98-*)
++		basic_machine=i386-`echo $basic_machine | sed 's/^[^-]*-//'`
++		;;
+ 	pentium | p5 | k5 | k6 | nexgen | viac3)
+ 		basic_machine=i586-pc
+ 		;;
+@@ -847,6 +950,10 @@
+ 		basic_machine=i586-unknown
+ 		os=-pw32
+ 		;;
++	rdos)
++		basic_machine=i386-pc
++		os=-rdos
++		;;
+ 	rom68k)
+ 		basic_machine=m68k-rom68k
+ 		os=-coff
+@@ -873,6 +980,10 @@
+ 	sb1el)
+ 		basic_machine=mipsisa64sb1el-unknown
+ 		;;
++	sde)
++		basic_machine=mipsisa32-sde
++		os=-elf
++		;;
+ 	sei)
+ 		basic_machine=mips-sei
+ 		os=-seiux
+@@ -884,6 +995,9 @@
+ 		basic_machine=sh-hitachi
+ 		os=-hms
+ 		;;
++	sh5el)
++		basic_machine=sh5le-unknown
++		;;
+ 	sh64)
+ 		basic_machine=sh64-unknown
+ 		;;
+@@ -973,6 +1087,15 @@
+ 		basic_machine=tic6x-unknown
+ 		os=-coff
+ 		;;
++        # This must be matched before tile*.
++        tilegx*)
++		basic_machine=tilegx-unknown
++		os=-linux-gnu
++		;;
++	tile*)
++		basic_machine=tile-unknown
++		os=-linux-gnu
++		;;
+ 	tx39)
+ 		basic_machine=mipstx39-unknown
+ 		;;
+@@ -1048,6 +1171,10 @@
+ 		basic_machine=z8k-unknown
+ 		os=-sim
+ 		;;
++	z80-*-coff)
++		basic_machine=z80-unknown
++		os=-sim
++		;;
+ 	none)
+ 		basic_machine=none-none
+ 		os=-none
+@@ -1086,13 +1213,10 @@
+ 	we32k)
+ 		basic_machine=we32k-att
+ 		;;
+-	sh3 | sh4 | sh[34]eb | sh[1234]le | sh[23]ele)
++	sh[1234] | sh[24]a | sh[24]aeb | sh[34]eb | sh[1234]le | sh[23]ele)
+ 		basic_machine=sh-unknown
+ 		;;
+-	sh64)
+-		basic_machine=sh64-unknown
+-		;;
+-	sparc | sparcv8 | sparcv9 | sparcv9b)
++	sparc | sparcv8 | sparcv9 | sparcv9b | sparcv9v)
+ 		basic_machine=sparc-sun
+ 		;;
+ 	cydra)
+@@ -1139,6 +1263,9 @@
+         # First match some system type aliases
+         # that might get confused with valid system types.
+ 	# -solaris* is a basic system type, with this one exception.
++        -auroraux)
++	        os=-auroraux
++		;;
+ 	-solaris1 | -solaris1.*)
+ 		os=`echo $os | sed -e 's|solaris1|sunos4|'`
+ 		;;
+@@ -1159,26 +1286,30 @@
+ 	# Each alternative MUST END IN A *, to match a version number.
+ 	# -sysv* is not here because it comes later, after sysvr4.
+ 	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
+-	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -sunos | -sunos[34]*\
+-	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -solaris* | -sym* \
++	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -cnk* | -sunos | -sunos[34]*\
++	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
++	      | -sym* | -kopensolaris* \
+ 	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
+-	      | -aos* \
++	      | -aos* | -aros* \
+ 	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
+ 	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
+-	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* | -openbsd* \
++	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
++	      | -openbsd* | -solidbsd* \
+ 	      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \
+ 	      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
+ 	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
+ 	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
+-	      | -chorusos* | -chorusrdb* \
++	      | -chorusos* | -chorusrdb* | -cegcc* \
+ 	      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
+-	      | -mingw32* | -linux-gnu* | -linux-uclibc* | -uxpv* | -beos* | -mpeix* | -udk* \
++	      | -mingw32* | -linux-gnu* | -linux-newlib* | -linux-uclibc* \
++	      | -uxpv* | -beos* | -mpeix* | -udk* \
+ 	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
+ 	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
+ 	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
+ 	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
+ 	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
+-	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly*)
++	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
++	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es*)
+ 	# Remember, each alternative MUST END IN *, to match a version number.
+ 		;;
+ 	-qnx*)
+@@ -1196,7 +1327,7 @@
+ 		os=`echo $os | sed -e 's|nto|nto-qnx|'`
+ 		;;
+ 	-sim | -es1800* | -hms* | -xray | -os68k* | -none* | -v88r* \
+-	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* \
++	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* | -haiku* \
+ 	      | -macos* | -mpw* | -magic* | -mmixware* | -mon960* | -lnews*)
+ 		;;
+ 	-mac*)
+@@ -1308,6 +1439,11 @@
+ 	-zvmoe)
+ 		os=-zvmoe
+ 		;;
++	-dicos*)
++		os=-dicos
++		;;
++        -nacl*)
++	        ;;
+ 	-none)
+ 		;;
+ 	*)
+@@ -1330,6 +1466,12 @@
+ # system, and we'll never get to this point.
+ 
+ case $basic_machine in
++        score-*)
++		os=-elf
++		;;
++        spu-*)
++		os=-elf
++		;;
+ 	*-acorn)
+ 		os=-riscix1.2
+ 		;;
+@@ -1339,9 +1481,9 @@
+ 	arm*-semi)
+ 		os=-aout
+ 		;;
+-    c4x-* | tic4x-*)
+-        os=-coff
+-        ;;
++        c4x-* | tic4x-*)
++        	os=-coff
++		;;
+ 	# This must come before the *-dec entry.
+ 	pdp10-*)
+ 		os=-tops20
+@@ -1367,6 +1509,9 @@
+ 	m68*-cisco)
+ 		os=-aout
+ 		;;
++        mep-*)
++		os=-elf
++		;;
+ 	mips*-cisco)
+ 		os=-elf
+ 		;;
+@@ -1385,6 +1530,9 @@
+ 	*-be)
+ 		os=-beos
+ 		;;
++	*-haiku)
++		os=-haiku
++		;;
+ 	*-ibm)
+ 		os=-aix
+ 		;;
+@@ -1493,7 +1641,7 @@
+ 			-sunos*)
+ 				vendor=sun
+ 				;;
+-			-aix*)
++			-cnk*|-aix*)
+ 				vendor=ibm
+ 				;;
+ 			-beos*)
+@@ -1556,7 +1704,7 @@
+ esac
+ 
+ echo $basic_machine$os
+-exit 0
++exit
+ 
+ # Local variables:
+ # eval: (add-hook 'write-file-hooks 'time-stamp)
+diff --git a/configure.in b/configure.in
+--- configure.in
++++ configure.in
+@@ -949,7 +949,7 @@
+       			AC_MSG_ERROR([only sparc and i386 processors are supported])
+    		fi
+ 		;;
+-	linux-gnu*)
++	linux-gnu*|k*bsd*-gnu*)
+ 		test_gtk=yes
+ 		test_cairo=yes
+ 		build_gstreamer=yes
+@@ -2485,7 +2485,13 @@
+    if test "$_os" = "Linux"; then
+      case "$build_cpu" in
+        i?86)
+-         DEFAULT_TO_STLPORT="yes"
++       case "$build_os" in k*bsd*-gnu*)
++              DEFAULT_TO_STLPORT="no"
++              ;;
++       *)
++              DEFAULT_TO_STLPORT="yes"
++              ;;
++        esac
+          ;;
+        *)
+          DEFAULT_TO_STLPORT="no"
+diff --git a/dmake/config.guess b/dmake/config.guess
+--- dmake/config.guess
++++ dmake/config.guess
+@@ -1,9 +1,10 @@
+ #! /bin/sh
+ # Attempt to guess a canonical system name.
+ #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
+-#   2000, 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.
++#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010
++#   Free Software Foundation, Inc.
+ 
+-timestamp='2005-07-08'
++timestamp='2009-12-30'
+ 
+ # This file is free software; you can redistribute it and/or modify it
+ # under the terms of the GNU General Public License as published by
+@@ -26,16 +27,16 @@
+ # the same distribution terms that you use for the rest of that program.
+ 
+ 
+-# Originally written by Per Bothner <per@bothner.com>.
+-# Please send patches to <config-patches@gnu.org>.  Submit a context
+-# diff and a properly formatted ChangeLog entry.
++# Originally written by Per Bothner.  Please send patches (context
++# diff format) to <config-patches@gnu.org> and include a ChangeLog
++# entry.
+ #
+ # This script attempts to guess a canonical system name similar to
+ # config.sub.  If it succeeds, it prints the system name on stdout, and
+ # exits with 0.  Otherwise, it exits with 1.
+ #
+-# The plan is that this can be called by configure scripts if you
+-# don't specify an explicit build system type.
++# You can get the latest version of this script from:
++# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
+ 
+ me=`echo "$0" | sed -e 's,.*/,,'`
+ 
+@@ -55,8 +56,9 @@
+ GNU config.guess ($timestamp)
+ 
+ Originally written by Per Bothner.
+-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005
+-Free Software Foundation, Inc.
++Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
++2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free
++Software Foundation, Inc.
+ 
+ This is free software; see the source for copying conditions.  There is NO
+ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
+@@ -106,7 +108,7 @@
+ trap "exitcode=\$?; (rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null) && exit \$exitcode" 0 ;
+ trap "rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null; exit 1" 1 2 13 15 ;
+ : ${TMPDIR=/tmp} ;
+- { tmp=`(umask 077 && mktemp -d -q "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
++ { tmp=`(umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
+  { test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir $tmp) ; } ||
+  { tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir $tmp) && echo "Warning: creating insecure temp directory" >&2 ; } ||
+  { echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; } ;
+@@ -160,6 +162,7 @@
+ 	    arm*) machine=arm-unknown ;;
+ 	    sh3el) machine=shl-unknown ;;
+ 	    sh3eb) machine=sh-unknown ;;
++	    sh5el) machine=sh5le-unknown ;;
+ 	    *) machine=${UNAME_MACHINE_ARCH}-unknown ;;
+ 	esac
+ 	# The Operating System including object format, if it has switched
+@@ -168,7 +171,7 @@
+ 	    arm*|i386|m68k|ns32k|sh3*|sparc|vax)
+ 		eval $set_cc_for_build
+ 		if echo __ELF__ | $CC_FOR_BUILD -E - 2>/dev/null \
+-			| grep __ELF__ >/dev/null
++			| grep -q __ELF__
+ 		then
+ 		    # Once all utilities can be ECOFF (netbsdecoff) or a.out (netbsdaout).
+ 		    # Return netbsd for either.  FIX?
+@@ -206,8 +209,11 @@
+     *:ekkoBSD:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-ekkobsd${UNAME_RELEASE}
+ 	exit ;;
++    *:SolidBSD:*:*)
++	echo ${UNAME_MACHINE}-unknown-solidbsd${UNAME_RELEASE}
++	exit ;;
+     macppc:MirBSD:*:*)
+-	echo powerppc-unknown-mirbsd${UNAME_RELEASE}
++	echo powerpc-unknown-mirbsd${UNAME_RELEASE}
+ 	exit ;;
+     *:MirBSD:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-mirbsd${UNAME_RELEASE}
+@@ -319,14 +325,33 @@
+ 	case `/usr/bin/uname -p` in
+ 	    sparc) echo sparc-icl-nx7; exit ;;
+ 	esac ;;
++    s390x:SunOS:*:*)
++	echo ${UNAME_MACHINE}-ibm-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
++	exit ;;
+     sun4H:SunOS:5.*:*)
+ 	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+ 	exit ;;
+     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
+ 	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+ 	exit ;;
+-    i86pc:SunOS:5.*:*)
+-	echo i386-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
++    i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
++	echo i386-pc-auroraux${UNAME_RELEASE}
++	exit ;;
++    i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
++	eval $set_cc_for_build
++	SUN_ARCH="i386"
++	# If there is a compiler, see if it is configured for 64-bit objects.
++	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.
++	# This test works for both compilers.
++	if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
++	    if (echo '#ifdef __amd64'; echo IS_64BIT_ARCH; echo '#endif') | \
++		(CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
++		grep IS_64BIT_ARCH >/dev/null
++	    then
++		SUN_ARCH="x86_64"
++	    fi
++	fi
++	echo ${SUN_ARCH}-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+ 	exit ;;
+     sun4*:SunOS:6*:*)
+ 	# According to config.sub, this is the proper way to canonicalize
+@@ -527,7 +552,7 @@
+ 		echo rs6000-ibm-aix3.2
+ 	fi
+ 	exit ;;
+-    *:AIX:*:[45])
++    *:AIX:*:[456])
+ 	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
+ 	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/dev/null 2>&1; then
+ 		IBM_ARCH=rs6000
+@@ -635,7 +660,7 @@
+ 	    # => hppa64-hp-hpux11.23
+ 
+ 	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) |
+-		grep __LP64__ >/dev/null
++		grep -q __LP64__
+ 	    then
+ 		HP_ARCH="hppa2.0w"
+ 	    else
+@@ -764,12 +789,19 @@
+ 	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
+ 	exit ;;
+     *:FreeBSD:*:*)
+-	echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
++	case ${UNAME_MACHINE} in
++	    pc98)
++		echo i386-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
++	    amd64)
++		echo x86_64-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
++	    *)
++		echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
++	esac
+ 	exit ;;
+     i*:CYGWIN*:*)
+ 	echo ${UNAME_MACHINE}-pc-cygwin
+ 	exit ;;
+-    i*:MINGW*:*)
++    *:MINGW*:*)
+ 	echo ${UNAME_MACHINE}-pc-mingw32
+ 	exit ;;
+     i*:windows32*:*)
+@@ -779,12 +811,24 @@
+     i*:PW*:*)
+ 	echo ${UNAME_MACHINE}-pc-pw32
+ 	exit ;;
+-    x86:Interix*:[34]*)
+-	echo i586-pc-interix${UNAME_RELEASE}|sed -e 's/\..*//'
+-	exit ;;
++    *:Interix*:*)
++    	case ${UNAME_MACHINE} in
++	    x86)
++		echo i586-pc-interix${UNAME_RELEASE}
++		exit ;;
++	    authenticamd | genuineintel | EM64T)
++		echo x86_64-unknown-interix${UNAME_RELEASE}
++		exit ;;
++	    IA64)
++		echo ia64-unknown-interix${UNAME_RELEASE}
++		exit ;;
++	esac ;;
+     [345]86:Windows_95:* | [345]86:Windows_98:* | [345]86:Windows_NT:*)
+ 	echo i${UNAME_MACHINE}-pc-mks
+ 	exit ;;
++    8664:Windows_NT:*)
++	echo x86_64-pc-mks
++	exit ;;
+     i*:Windows_NT*:* | Pentium*:Windows_NT*:*)
+ 	# How do we know it's Interix rather than the generic POSIX subsystem?
+ 	# It also conflicts with pre-2.0 versions of AT&T UWIN. Should we
+@@ -794,7 +838,7 @@
+     i*:UWIN*:*)
+ 	echo ${UNAME_MACHINE}-pc-uwin
+ 	exit ;;
+-    amd64:CYGWIN*:*:*)
++    amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
+ 	echo x86_64-unknown-cygwin
+ 	exit ;;
+     p*:CYGWIN*:*)
+@@ -814,7 +858,31 @@
+     i*86:Minix:*:*)
+ 	echo ${UNAME_MACHINE}-pc-minix
+ 	exit ;;
++    alpha:Linux:*:*)
++	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
++	  EV5)   UNAME_MACHINE=alphaev5 ;;
++	  EV56)  UNAME_MACHINE=alphaev56 ;;
++	  PCA56) UNAME_MACHINE=alphapca56 ;;
++	  PCA57) UNAME_MACHINE=alphapca56 ;;
++	  EV6)   UNAME_MACHINE=alphaev6 ;;
++	  EV67)  UNAME_MACHINE=alphaev67 ;;
++	  EV68*) UNAME_MACHINE=alphaev68 ;;
++        esac
++	objdump --private-headers /bin/sh | grep -q ld.so.1
++	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
++	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
++	exit ;;
+     arm*:Linux:*:*)
++	eval $set_cc_for_build
++	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
++	    | grep -q __ARM_EABI__
++	then
++	    echo ${UNAME_MACHINE}-unknown-linux-gnu
++	else
++	    echo ${UNAME_MACHINE}-unknown-linux-gnueabi
++	fi
++	exit ;;
++    avr32*:Linux:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-linux-gnu
+ 	exit ;;
+     cris:Linux:*:*)
+@@ -826,6 +894,17 @@
+     frv:Linux:*:*)
+     	echo frv-unknown-linux-gnu
+ 	exit ;;
++    i*86:Linux:*:*)
++	LIBC=gnu
++	eval $set_cc_for_build
++	sed 's/^	//' << EOF >$dummy.c
++	#ifdef __dietlibc__
++	LIBC=dietlibc
++	#endif
++EOF
++	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC'`
++	echo "${UNAME_MACHINE}-pc-linux-${LIBC}"
++	exit ;;
+     ia64:Linux:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-linux-gnu
+ 	exit ;;
+@@ -835,63 +914,33 @@
+     m68*:Linux:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-linux-gnu
+ 	exit ;;
+-    mips:Linux:*:*)
++    mips:Linux:*:* | mips64:Linux:*:*)
+ 	eval $set_cc_for_build
+ 	sed 's/^	//' << EOF >$dummy.c
+ 	#undef CPU
+-	#undef mips
+-	#undef mipsel
++	#undef ${UNAME_MACHINE}
++	#undef ${UNAME_MACHINE}el
+ 	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
+-	CPU=mipsel
++	CPU=${UNAME_MACHINE}el
+ 	#else
+ 	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
+-	CPU=mips
++	CPU=${UNAME_MACHINE}
+ 	#else
+ 	CPU=
+ 	#endif
+ 	#endif
+ EOF
+-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
++	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^CPU'`
+ 	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
+ 	;;
+-    mips64:Linux:*:*)
+-	eval $set_cc_for_build
+-	sed 's/^	//' << EOF >$dummy.c
+-	#undef CPU
+-	#undef mips64
+-	#undef mips64el
+-	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
+-	CPU=mips64el
+-	#else
+-	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
+-	CPU=mips64
+-	#else
+-	CPU=
+-	#endif
+-	#endif
+-EOF
+-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
+-	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
+-	;;
+-    ppc:Linux:*:*)
+-	echo powerpc-unknown-linux-gnu
++    or32:Linux:*:*)
++	echo or32-unknown-linux-gnu
+ 	exit ;;
+-    ppc64:Linux:*:*)
+-	echo powerpc64-unknown-linux-gnu
++    padre:Linux:*:*)
++	echo sparc-unknown-linux-gnu
+ 	exit ;;
+-    alpha:Linux:*:*)
+-	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
+-	  EV5)   UNAME_MACHINE=alphaev5 ;;
+-	  EV56)  UNAME_MACHINE=alphaev56 ;;
+-	  PCA56) UNAME_MACHINE=alphapca56 ;;
+-	  PCA57) UNAME_MACHINE=alphapca56 ;;
+-	  EV6)   UNAME_MACHINE=alphaev6 ;;
+-	  EV67)  UNAME_MACHINE=alphaev67 ;;
+-	  EV68*) UNAME_MACHINE=alphaev68 ;;
+-        esac
+-	objdump --private-headers /bin/sh | grep ld.so.1 >/dev/null
+-	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
+-	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
++    parisc64:Linux:*:* | hppa64:Linux:*:*)
++	echo hppa64-unknown-linux-gnu
+ 	exit ;;
+     parisc:Linux:*:* | hppa:Linux:*:*)
+ 	# Look for CPU level
+@@ -901,8 +950,11 @@
+ 	  *)    echo hppa-unknown-linux-gnu ;;
+ 	esac
+ 	exit ;;
+-    parisc64:Linux:*:* | hppa64:Linux:*:*)
+-	echo hppa64-unknown-linux-gnu
++    ppc64:Linux:*:*)
++	echo powerpc64-unknown-linux-gnu
++	exit ;;
++    ppc:Linux:*:*)
++	echo powerpc-unknown-linux-gnu
+ 	exit ;;
+     s390:Linux:*:* | s390x:Linux:*:*)
+ 	echo ${UNAME_MACHINE}-ibm-linux
+@@ -916,68 +968,15 @@
+     sparc:Linux:*:* | sparc64:Linux:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-linux-gnu
+ 	exit ;;
++    vax:Linux:*:*)
++	echo ${UNAME_MACHINE}-dec-linux-gnu
++	exit ;;
+     x86_64:Linux:*:*)
+ 	echo x86_64-unknown-linux-gnu
+ 	exit ;;
+-    i*86:Linux:*:*)
+-	# The BFD linker knows what the default object file format is, so
+-	# first see if it will tell us. cd to the root directory to prevent
+-	# problems with other programs or directories called `ld' in the path.
+-	# Set LC_ALL=C to ensure ld outputs messages in English.
+-	ld_supported_targets=`cd /; LC_ALL=C ld --help 2>&1 \
+-			 | sed -ne '/supported targets:/!d
+-				    s/[ 	][ 	]*/ /g
+-				    s/.*supported targets: *//
+-				    s/ .*//
+-				    p'`
+-        case "$ld_supported_targets" in
+-	  elf32-i386)
+-		TENTATIVE="${UNAME_MACHINE}-pc-linux-gnu"
+-		;;
+-	  a.out-i386-linux)
+-		echo "${UNAME_MACHINE}-pc-linux-gnuaout"
+-		exit ;;
+-	  coff-i386)
+-		echo "${UNAME_MACHINE}-pc-linux-gnucoff"
+-		exit ;;
+-	  "")
+-		# Either a pre-BFD a.out linker (linux-gnuoldld) or
+-		# one that does not give us useful --help.
+-		echo "${UNAME_MACHINE}-pc-linux-gnuoldld"
+-		exit ;;
+-	esac
+-	# Determine whether the default compiler is a.out or elf
+-	eval $set_cc_for_build
+-	sed 's/^	//' << EOF >$dummy.c
+-	#include <features.h>
+-	#ifdef __ELF__
+-	# ifdef __GLIBC__
+-	#  if __GLIBC__ >= 2
+-	LIBC=gnu
+-	#  else
+-	LIBC=gnulibc1
+-	#  endif
+-	# else
+-	LIBC=gnulibc1
+-	# endif
+-	#else
+-	#ifdef __INTEL_COMPILER
+-	LIBC=gnu
+-	#else
+-	LIBC=gnuaout
+-	#endif
+-	#endif
+-	#ifdef __dietlibc__
+-	LIBC=dietlibc
+-	#endif
+-EOF
+-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
+-	test x"${LIBC}" != x && {
+-		echo "${UNAME_MACHINE}-pc-linux-${LIBC}"
+-		exit
+-	}
+-	test x"${TENTATIVE}" != x && { echo "${TENTATIVE}"; exit; }
+-	;;
++    xtensa*:Linux:*:*)
++    	echo ${UNAME_MACHINE}-unknown-linux-gnu
++	exit ;;
+     i*86:DYNIX/ptx:4*:*)
+ 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
+ 	# earlier versions are messed up and put the nodename in both
+@@ -1006,7 +1005,7 @@
+     i*86:syllable:*:*)
+ 	echo ${UNAME_MACHINE}-pc-syllable
+ 	exit ;;
+-    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.0*:*)
++    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.[02]*:*)
+ 	echo i386-unknown-lynxos${UNAME_RELEASE}
+ 	exit ;;
+     i*86:*DOS:*:*)
+@@ -1050,8 +1049,11 @@
+     pc:*:*:*)
+ 	# Left here for compatibility:
+         # uname -m prints for DJGPP always 'pc', but it prints nothing about
+-        # the processor, so we play safe by assuming i386.
+-	echo i386-pc-msdosdjgpp
++        # the processor, so we play safe by assuming i586.
++	# Note: whatever this is, it MUST be the same as what config.sub
++	# prints for the "djgpp" host, or else GDB configury will decide that
++	# this is a cross-build.
++	echo i586-pc-msdosdjgpp
+         exit ;;
+     Intel:Mach:3*:*)
+ 	echo i386-pc-mach3
+@@ -1089,6 +1091,16 @@
+     3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
+         /bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+           && { echo i486-ncr-sysv4; exit; } ;;
++    NCR*:*:4.2:* | MPRAS*:*:4.2:*)
++	OS_REL='.3'
++	test -r /etc/.relid \
++	    && OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
++	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
++	    && { echo i486-ncr-sysv4.3${OS_REL}; exit; }
++	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
++	    && { echo i586-ncr-sysv4.3${OS_REL}; exit; }
++	/bin/uname -p 2>/dev/null | /bin/grep pteron >/dev/null \
++	    && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
+     m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
+ 	echo m68k-unknown-lynxos${UNAME_RELEASE}
+ 	exit ;;
+@@ -1101,7 +1113,7 @@
+     rs6000:LynxOS:2.*:*)
+ 	echo rs6000-unknown-lynxos${UNAME_RELEASE}
+ 	exit ;;
+-    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.0*:*)
++    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.[02]*:*)
+ 	echo powerpc-unknown-lynxos${UNAME_RELEASE}
+ 	exit ;;
+     SM[BE]S:UNIX_SV:*:*)
+@@ -1164,6 +1176,9 @@
+     BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
+ 	echo i586-pc-beos
+ 	exit ;;
++    BePC:Haiku:*:*)	# Haiku running on Intel PC compatible.
++	echo i586-pc-haiku
++	exit ;;
+     SX-4:SUPER-UX:*:*)
+ 	echo sx4-nec-superux${UNAME_RELEASE}
+ 	exit ;;
+@@ -1173,6 +1188,15 @@
+     SX-6:SUPER-UX:*:*)
+ 	echo sx6-nec-superux${UNAME_RELEASE}
+ 	exit ;;
++    SX-7:SUPER-UX:*:*)
++	echo sx7-nec-superux${UNAME_RELEASE}
++	exit ;;
++    SX-8:SUPER-UX:*:*)
++	echo sx8-nec-superux${UNAME_RELEASE}
++	exit ;;
++    SX-8R:SUPER-UX:*:*)
++	echo sx8r-nec-superux${UNAME_RELEASE}
++	exit ;;
+     Power*:Rhapsody:*:*)
+ 	echo powerpc-apple-rhapsody${UNAME_RELEASE}
+ 	exit ;;
+@@ -1182,7 +1206,16 @@
+     *:Darwin:*:*)
+ 	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
+ 	case $UNAME_PROCESSOR in
+-	    *86) UNAME_PROCESSOR=i686 ;;
++	    i386)
++		eval $set_cc_for_build
++		if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
++		  if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
++		      (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
++		      grep IS_64BIT_ARCH >/dev/null
++		  then
++		      UNAME_PROCESSOR="x86_64"
++		  fi
++		fi ;;
+ 	    unknown) UNAME_PROCESSOR=powerpc ;;
+ 	esac
+ 	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
+@@ -1261,6 +1294,12 @@
+     i*86:skyos:*:*)
+ 	echo ${UNAME_MACHINE}-pc-skyos`echo ${UNAME_RELEASE}` | sed -e 's/ .*$//'
+ 	exit ;;
++    i*86:rdos:*:*)
++	echo ${UNAME_MACHINE}-pc-rdos
++	exit ;;
++    i*86:AROS:*:*)
++	echo ${UNAME_MACHINE}-pc-aros
++	exit ;;
+ esac
+ 
+ #echo '(No uname command or uname output not recognized.)' 1>&2
+@@ -1421,9 +1460,9 @@
+ the operating system you are using. It is advised that you
+ download the most up to date version of the config scripts from
+ 
+-  http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.guess
++  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
+ and
+-  http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.sub
++  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD
+ 
+ If the version you run ($0) is already up to date, please
+ send the following data and any information you think might be
+diff --git a/dmake/config.sub b/dmake/config.sub
+--- dmake/config.sub
++++ dmake/config.sub
+@@ -1,9 +1,10 @@
+ #! /bin/sh
+ # Configuration validation subroutine script.
+ #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
+-#   2000, 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.
++#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010
++#   Free Software Foundation, Inc.
+ 
+-timestamp='2005-07-08'
++timestamp='2010-01-22'
+ 
+ # This file is (in principle) common to ALL GNU software.
+ # The presence of a machine in this file suggests that SOME GNU software
+@@ -31,13 +32,16 @@
+ 
+ 
+ # Please send patches to <config-patches@gnu.org>.  Submit a context
+-# diff and a properly formatted ChangeLog entry.
++# diff and a properly formatted GNU ChangeLog entry.
+ #
+ # Configuration subroutine to validate and canonicalize a configuration type.
+ # Supply the specified configuration type as an argument.
+ # If it is invalid, we print an error message on stderr and exit with code 1.
+ # Otherwise, we print the canonical config type on stdout and succeed.
+ 
++# You can get the latest version of this script from:
++# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD
++
+ # This file is supposed to be the same for all GNU packages
+ # and recognize all the CPU types, system types and aliases
+ # that are meaningful with *any* GNU software.
+@@ -71,8 +75,9 @@
+ version="\
+ GNU config.sub ($timestamp)
+ 
+-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005
+-Free Software Foundation, Inc.
++Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
++2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free
++Software Foundation, Inc.
+ 
+ This is free software; see the source for copying conditions.  There is NO
+ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
+@@ -119,8 +124,10 @@
+ # Here we must recognize all the valid KERNEL-OS combinations.
+ maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
+ case $maybe_os in
+-  nto-qnx* | linux-gnu* | linux-dietlibc | linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | \
+-  kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* | storm-chaos* | os2-emx* | rtmk-nova*)
++  nto-qnx* | linux-gnu* | linux-dietlibc | linux-newlib* | linux-uclibc* | \
++  uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* | \
++  kopensolaris*-gnu* | \
++  storm-chaos* | os2-emx* | rtmk-nova*)
+     os=-$maybe_os
+     basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
+     ;;
+@@ -146,10 +153,13 @@
+ 	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
+ 	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
+ 	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
+-	-apple | -axis | -knuth | -cray)
++	-apple | -axis | -knuth | -cray | -microblaze)
+ 		os=
+ 		basic_machine=$1
+ 		;;
++        -bluegene*)
++	        os=-cnk
++		;;
+ 	-sim | -cisco | -oki | -wec | -winbond)
+ 		os=
+ 		basic_machine=$1
+@@ -171,6 +181,10 @@
+ 	-hiux*)
+ 		os=-hiuxwe2
+ 		;;
++	-sco6)
++		os=-sco5v6
++		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++		;;
+ 	-sco5)
+ 		os=-sco3.2v5
+ 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+@@ -187,6 +201,10 @@
+ 		# Don't forget version if it is 3.2v4 or newer.
+ 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+ 		;;
++	-sco5v6*)
++		# Don't forget version if it is 3.2v4 or newer.
++		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++		;;
+ 	-sco*)
+ 		os=-sco3.2v2
+ 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+@@ -231,20 +249,24 @@
+ 	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
+ 	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
+ 	| am33_2.0 \
+-	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr \
++	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr | avr32 \
+ 	| bfin \
+ 	| c4x | clipper \
+ 	| d10v | d30v | dlx | dsp16xx \
+-	| fr30 | frv \
++	| fido | fr30 | frv \
+ 	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
+ 	| i370 | i860 | i960 | ia64 \
+ 	| ip2k | iq2000 \
+-	| m32r | m32rle | m68000 | m68k | m88k | maxq | mcore \
++	| lm32 \
++	| m32c | m32r | m32rle | m68000 | m68k | m88k \
++	| maxq | mb | microblaze | mcore | mep | metag \
+ 	| mips | mipsbe | mipseb | mipsel | mipsle \
+ 	| mips16 \
+ 	| mips64 | mips64el \
++	| mips64octeon | mips64octeonel \
++	| mips64orion | mips64orionel \
++	| mips64r5900 | mips64r5900el \
+ 	| mips64vr | mips64vrel \
+-	| mips64orion | mips64orionel \
+ 	| mips64vr4100 | mips64vr4100el \
+ 	| mips64vr4300 | mips64vr4300el \
+ 	| mips64vr5000 | mips64vr5000el \
+@@ -257,35 +279,40 @@
+ 	| mipsisa64sr71k | mipsisa64sr71kel \
+ 	| mipstx39 | mipstx39el \
+ 	| mn10200 | mn10300 \
+-	| ms1 \
++	| moxie \
++	| mt \
+ 	| msp430 \
++	| nios | nios2 \
+ 	| ns16k | ns32k \
+ 	| or32 \
+ 	| pdp10 | pdp11 | pj | pjl \
+ 	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
+ 	| pyramid \
+-	| sh | sh[1234] | sh[24]a | sh[23]e | sh[34]eb | shbe | shle | sh[1234]le | sh3ele \
++	| rx \
++	| score \
++	| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[34]eb | sheb | shbe | shle | sh[1234]le | sh3ele \
+ 	| sh64 | sh64le \
+-	| sparc | sparc64 | sparc64b | sparc86x | sparclet | sparclite \
+-	| sparcv8 | sparcv9 | sparcv9b \
+-	| strongarm \
++	| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet | sparclite \
++	| sparcv8 | sparcv9 | sparcv9b | sparcv9v \
++	| spu | strongarm \
+ 	| tahoe | thumb | tic4x | tic80 | tron \
++	| ubicom32 \
+ 	| v850 | v850e \
+ 	| we32k \
+-	| x86 | xscale | xscalee[bl] | xstormy16 | xtensa \
+-	| z8k)
++	| x86 | xc16x | xscale | xscalee[bl] | xstormy16 | xtensa \
++	| z8k | z80)
+ 		basic_machine=$basic_machine-unknown
+ 		;;
+-	m32c)
+-		basic_machine=$basic_machine-unknown
+-		;;
+-	m6811 | m68hc11 | m6812 | m68hc12)
++	m6811 | m68hc11 | m6812 | m68hc12 | picochip)
+ 		# Motorola 68HC11/12.
+ 		basic_machine=$basic_machine-unknown
+ 		os=-none
+ 		;;
+ 	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
+ 		;;
++	ms1)
++		basic_machine=mt-unknown
++		;;
+ 
+ 	# We use `pc' rather than `unknown'
+ 	# because (1) that's what they normally are, and
+@@ -305,25 +332,28 @@
+ 	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
+ 	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \
+ 	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
+-	| avr-* \
++	| avr-* | avr32-* \
+ 	| bfin-* | bs2000-* \
+ 	| c[123]* | c30-* | [cjt]90-* | c4x-* | c54x-* | c55x-* | c6x-* \
+ 	| clipper-* | craynv-* | cydra-* \
+ 	| d10v-* | d30v-* | dlx-* \
+ 	| elxsi-* \
+-	| f30[01]-* | f700-* | fr30-* | frv-* | fx80-* \
++	| f30[01]-* | f700-* | fido-* | fr30-* | frv-* | fx80-* \
+ 	| h8300-* | h8500-* \
+ 	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
+ 	| i*86-* | i860-* | i960-* | ia64-* \
+ 	| ip2k-* | iq2000-* \
+-	| m32r-* | m32rle-* \
++	| lm32-* \
++	| m32c-* | m32r-* | m32rle-* \
+ 	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
+-	| m88110-* | m88k-* | maxq-* | mcore-* \
++	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* | microblaze-* \
+ 	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
+ 	| mips16-* \
+ 	| mips64-* | mips64el-* \
++	| mips64octeon-* | mips64octeonel-* \
++	| mips64orion-* | mips64orionel-* \
++	| mips64r5900-* | mips64r5900el-* \
+ 	| mips64vr-* | mips64vrel-* \
+-	| mips64orion-* | mips64orionel-* \
+ 	| mips64vr4100-* | mips64vr4100el-* \
+ 	| mips64vr4300-* | mips64vr4300el-* \
+ 	| mips64vr5000-* | mips64vr5000el-* \
+@@ -336,30 +366,35 @@
+ 	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
+ 	| mipstx39-* | mipstx39el-* \
+ 	| mmix-* \
+-	| ms1-* \
++	| mt-* \
+ 	| msp430-* \
++	| nios-* | nios2-* \
+ 	| none-* | np1-* | ns16k-* | ns32k-* \
+ 	| orion-* \
+ 	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
+ 	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
+ 	| pyramid-* \
+-	| romp-* | rs6000-* \
+-	| sh-* | sh[1234]-* | sh[24]a-* | sh[23]e-* | sh[34]eb-* | shbe-* \
++	| romp-* | rs6000-* | rx-* \
++	| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \
+ 	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
+-	| sparc-* | sparc64-* | sparc64b-* | sparc86x-* | sparclet-* \
++	| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \
+ 	| sparclite-* \
+-	| sparcv8-* | sparcv9-* | sparcv9b-* | strongarm-* | sv1-* | sx?-* \
++	| sparcv8-* | sparcv9-* | sparcv9b-* | sparcv9v-* | strongarm-* | sv1-* | sx?-* \
+ 	| tahoe-* | thumb-* \
+ 	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
++	| tile-* | tilegx-* \
+ 	| tron-* \
++	| ubicom32-* \
+ 	| v850-* | v850e-* | vax-* \
+ 	| we32k-* \
+-	| x86-* | x86_64-* | xps100-* | xscale-* | xscalee[bl]-* \
+-	| xstormy16-* | xtensa-* \
++	| x86-* | x86_64-* | xc16x-* | xps100-* | xscale-* | xscalee[bl]-* \
++	| xstormy16-* | xtensa*-* \
+ 	| ymp-* \
+-	| z8k-*)
++	| z8k-* | z80-*)
+ 		;;
+-	m32c-*)
++	# Recognize the basic CPU types without company name, with glob match.
++	xtensa*)
++		basic_machine=$basic_machine-unknown
+ 		;;
+ 	# Recognize the various machine names and aliases which stand
+ 	# for a CPU type and a company and sometimes even an OS.
+@@ -423,6 +458,10 @@
+ 		basic_machine=m68k-apollo
+ 		os=-bsd
+ 		;;
++	aros)
++		basic_machine=i386-pc
++		os=-aros
++		;;
+ 	aux)
+ 		basic_machine=m68k-apple
+ 		os=-aux
+@@ -431,10 +470,26 @@
+ 		basic_machine=ns32k-sequent
+ 		os=-dynix
+ 		;;
++	blackfin)
++		basic_machine=bfin-unknown
++		os=-linux
++		;;
++	blackfin-*)
++		basic_machine=bfin-`echo $basic_machine | sed 's/^[^-]*-//'`
++		os=-linux
++		;;
++	bluegene*)
++		basic_machine=powerpc-ibm
++		os=-cnk
++		;;
+ 	c90)
+ 		basic_machine=c90-cray
+ 		os=-unicos
+ 		;;
++        cegcc)
++		basic_machine=arm-unknown
++		os=-cegcc
++		;;
+ 	convex-c1)
+ 		basic_machine=c1-convex
+ 		os=-bsd
+@@ -463,8 +518,8 @@
+ 		basic_machine=craynv-cray
+ 		os=-unicosmp
+ 		;;
+-	cr16c)
+-		basic_machine=cr16c-unknown
++	cr16)
++		basic_machine=cr16-unknown
+ 		os=-elf
+ 		;;
+ 	crds | unos)
+@@ -502,6 +557,10 @@
+ 		basic_machine=m88k-motorola
+ 		os=-sysv3
+ 		;;
++	dicos)
++		basic_machine=i686-pc
++		os=-dicos
++		;;
+ 	djgpp)
+ 		basic_machine=i586-pc
+ 		os=-msdosdjgpp
+@@ -656,6 +715,14 @@
+ 		basic_machine=m68k-isi
+ 		os=-sysv
+ 		;;
++	m68knommu)
++		basic_machine=m68k-unknown
++		os=-linux
++		;;
++	m68knommu-*)
++		basic_machine=m68k-`echo $basic_machine | sed 's/^[^-]*-//'`
++		os=-linux
++		;;
+ 	m88k-omron*)
+ 		basic_machine=m88k-omron
+ 		;;
+@@ -667,10 +734,17 @@
+ 		basic_machine=ns32k-utek
+ 		os=-sysv
+ 		;;
++        microblaze)
++		basic_machine=microblaze-xilinx
++		;;
+ 	mingw32)
+ 		basic_machine=i386-pc
+ 		os=-mingw32
+ 		;;
++	mingw32ce)
++		basic_machine=arm-unknown
++		os=-mingw32ce
++		;;
+ 	miniframe)
+ 		basic_machine=m68000-convergent
+ 		;;
+@@ -696,6 +770,9 @@
+ 		basic_machine=i386-pc
+ 		os=-msdos
+ 		;;
++	ms1-*)
++		basic_machine=`echo $basic_machine | sed -e 's/ms1-/mt-/'`
++		;;
+ 	mvs)
+ 		basic_machine=i370-ibm
+ 		os=-mvs
+@@ -794,6 +871,14 @@
+ 		basic_machine=i860-intel
+ 		os=-osf
+ 		;;
++	parisc)
++		basic_machine=hppa-unknown
++		os=-linux
++		;;
++	parisc-*)
++		basic_machine=hppa-`echo $basic_machine | sed 's/^[^-]*-//'`
++		os=-linux
++		;;
+ 	pbd)
+ 		basic_machine=sparc-tti
+ 		;;
+@@ -803,6 +888,12 @@
+ 	pc532 | pc532-*)
+ 		basic_machine=ns32k-pc532
+ 		;;
++	pc98)
++		basic_machine=i386-pc
++		;;
++	pc98-*)
++		basic_machine=i386-`echo $basic_machine | sed 's/^[^-]*-//'`
++		;;
+ 	pentium | p5 | k5 | k6 | nexgen | viac3)
+ 		basic_machine=i586-pc
+ 		;;
+@@ -859,6 +950,10 @@
+ 		basic_machine=i586-unknown
+ 		os=-pw32
+ 		;;
++	rdos)
++		basic_machine=i386-pc
++		os=-rdos
++		;;
+ 	rom68k)
+ 		basic_machine=m68k-rom68k
+ 		os=-coff
+@@ -885,6 +980,10 @@
+ 	sb1el)
+ 		basic_machine=mipsisa64sb1el-unknown
+ 		;;
++	sde)
++		basic_machine=mipsisa32-sde
++		os=-elf
++		;;
+ 	sei)
+ 		basic_machine=mips-sei
+ 		os=-seiux
+@@ -896,6 +995,9 @@
+ 		basic_machine=sh-hitachi
+ 		os=-hms
+ 		;;
++	sh5el)
++		basic_machine=sh5le-unknown
++		;;
+ 	sh64)
+ 		basic_machine=sh64-unknown
+ 		;;
+@@ -985,6 +1087,15 @@
+ 		basic_machine=tic6x-unknown
+ 		os=-coff
+ 		;;
++        # This must be matched before tile*.
++        tilegx*)
++		basic_machine=tilegx-unknown
++		os=-linux-gnu
++		;;
++	tile*)
++		basic_machine=tile-unknown
++		os=-linux-gnu
++		;;
+ 	tx39)
+ 		basic_machine=mipstx39-unknown
+ 		;;
+@@ -1060,6 +1171,10 @@
+ 		basic_machine=z8k-unknown
+ 		os=-sim
+ 		;;
++	z80-*-coff)
++		basic_machine=z80-unknown
++		os=-sim
++		;;
+ 	none)
+ 		basic_machine=none-none
+ 		os=-none
+@@ -1098,10 +1213,10 @@
+ 	we32k)
+ 		basic_machine=we32k-att
+ 		;;
+-	sh[1234] | sh[24]a | sh[34]eb | sh[1234]le | sh[23]ele)
++	sh[1234] | sh[24]a | sh[24]aeb | sh[34]eb | sh[1234]le | sh[23]ele)
+ 		basic_machine=sh-unknown
+ 		;;
+-	sparc | sparcv8 | sparcv9 | sparcv9b)
++	sparc | sparcv8 | sparcv9 | sparcv9b | sparcv9v)
+ 		basic_machine=sparc-sun
+ 		;;
+ 	cydra)
+@@ -1148,6 +1263,9 @@
+         # First match some system type aliases
+         # that might get confused with valid system types.
+ 	# -solaris* is a basic system type, with this one exception.
++        -auroraux)
++	        os=-auroraux
++		;;
+ 	-solaris1 | -solaris1.*)
+ 		os=`echo $os | sed -e 's|solaris1|sunos4|'`
+ 		;;
+@@ -1168,27 +1286,30 @@
+ 	# Each alternative MUST END IN A *, to match a version number.
+ 	# -sysv* is not here because it comes later, after sysvr4.
+ 	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
+-	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -sunos | -sunos[34]*\
+-	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -solaris* | -sym* \
++	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -cnk* | -sunos | -sunos[34]*\
++	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
++	      | -sym* | -kopensolaris* \
+ 	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
+-	      | -aos* \
++	      | -aos* | -aros* \
+ 	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
+ 	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
+-	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* | -openbsd* \
++	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
++	      | -openbsd* | -solidbsd* \
+ 	      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \
+ 	      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
+ 	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
+ 	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
+-	      | -chorusos* | -chorusrdb* \
++	      | -chorusos* | -chorusrdb* | -cegcc* \
+ 	      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
+-	      | -mingw32* | -linux-gnu* | -linux-uclibc* | -uxpv* | -beos* | -mpeix* | -udk* \
++	      | -mingw32* | -linux-gnu* | -linux-newlib* | -linux-uclibc* \
++	      | -uxpv* | -beos* | -mpeix* | -udk* \
+ 	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
+ 	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
+ 	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
+ 	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
+ 	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
+ 	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
+-	      | -skyos* | -haiku*)
++	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es*)
+ 	# Remember, each alternative MUST END IN *, to match a version number.
+ 		;;
+ 	-qnx*)
+@@ -1318,6 +1439,11 @@
+ 	-zvmoe)
+ 		os=-zvmoe
+ 		;;
++	-dicos*)
++		os=-dicos
++		;;
++        -nacl*)
++	        ;;
+ 	-none)
+ 		;;
+ 	*)
+@@ -1340,6 +1466,12 @@
+ # system, and we'll never get to this point.
+ 
+ case $basic_machine in
++        score-*)
++		os=-elf
++		;;
++        spu-*)
++		os=-elf
++		;;
+ 	*-acorn)
+ 		os=-riscix1.2
+ 		;;
+@@ -1349,9 +1481,9 @@
+ 	arm*-semi)
+ 		os=-aout
+ 		;;
+-    c4x-* | tic4x-*)
+-        os=-coff
+-        ;;
++        c4x-* | tic4x-*)
++        	os=-coff
++		;;
+ 	# This must come before the *-dec entry.
+ 	pdp10-*)
+ 		os=-tops20
+@@ -1377,6 +1509,9 @@
+ 	m68*-cisco)
+ 		os=-aout
+ 		;;
++        mep-*)
++		os=-elf
++		;;
+ 	mips*-cisco)
+ 		os=-elf
+ 		;;
+@@ -1506,7 +1641,7 @@
+ 			-sunos*)
+ 				vendor=sun
+ 				;;
+-			-aix*)
++			-cnk*|-aix*)
+ 				vendor=ibm
+ 				;;
+ 			-beos*)
+diff --git a/libtextcat/libtextcat-2.2.patch b/libtextcat/libtextcat-2.2.patch
+--- libtextcat/libtextcat-2.2.patch
++++ libtextcat/libtextcat-2.2.patch
+@@ -1,5 +1,14 @@
+ --- misc/libtextcat-2.2/configure	Thu May 22 13:39:55 2003
+ +++ misc/build/libtextcat-2.2/configure	Mon Mar 31 11:29:14 2008
++@@ -3451,7 +3451,7 @@
++   ;;
++ 
++ # This must be Linux ELF.
++-linux-gnu*)
+++linux-gnu*|k*bsd*-gnu*)
++   case $host_cpu in
++   alpha* | hppa* | i*86 | mips | mipsel | powerpc* | sparc* | ia64*)
++     lt_cv_deplibs_check_method=pass_all ;;
+ @@ -5391,7 +5391,8 @@
+  allow_undefined_flag=
+  no_undefined_flag=
+@@ -28,6 +37,15 @@
+    version_type=freebsd-$objformat
+    case $version_type in
+      freebsd-elf*)
++@@ -6365,7 +6365,7 @@
++   ;;
++ 
++ # This must be Linux ELF.
++-linux-gnu*)
+++linux-gnu*|k*bsd*-gnu*)
++   version_type=linux
++   need_lib_prefix=no
++   need_version=no
+ --- misc/libtextcat-2.2/src/Makefile.in	Thu May 22 13:39:52 2003
+ +++ misc/build/libtextcat-2.2/src/Makefile.in	Mon Mar 31 11:29:14 2008
+ @@ -124,20 +124,20 @@
+@@ -1585,3 +1603,2479 @@
+ +
+ +/* Define to `unsigned' if <sys/types.h> does not define. */
+ +/* #undef size_t */
++--- misc/libtextcat-2.2/config.guess	2010-04-15 09:20:04.000000000 +0000
+++++ misc/build/libtextcat-2.2/config.guess	2010-04-15 09:20:41.000000000 +0000
++@@ -1,9 +1,10 @@
++ #! /bin/sh
++ # Attempt to guess a canonical system name.
++ #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
++-#   2000, 2001, 2002 Free Software Foundation, Inc.
+++#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010
+++#   Free Software Foundation, Inc.
++ 
++-timestamp='2002-10-21'
+++timestamp='2009-12-30'
++ 
++ # This file is free software; you can redistribute it and/or modify it
++ # under the terms of the GNU General Public License as published by
++@@ -17,23 +18,25 @@
++ #
++ # You should have received a copy of the GNU General Public License
++ # along with this program; if not, write to the Free Software
++-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+++# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
+++# 02110-1301, USA.
++ #
++ # As a special exception to the GNU General Public License, if you
++ # distribute this file as part of a program that contains a
++ # configuration script generated by Autoconf, you may include it under
++ # the same distribution terms that you use for the rest of that program.
++ 
++-# Originally written by Per Bothner <per@bothner.com>.
++-# Please send patches to <config-patches@gnu.org>.  Submit a context
++-# diff and a properly formatted ChangeLog entry.
+++
+++# Originally written by Per Bothner.  Please send patches (context
+++# diff format) to <config-patches@gnu.org> and include a ChangeLog
+++# entry.
++ #
++ # This script attempts to guess a canonical system name similar to
++ # config.sub.  If it succeeds, it prints the system name on stdout, and
++ # exits with 0.  Otherwise, it exits with 1.
++ #
++-# The plan is that this can be called by configure scripts if you
++-# don't specify an explicit build system type.
+++# You can get the latest version of this script from:
+++# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
++ 
++ me=`echo "$0" | sed -e 's,.*/,,'`
++ 
++@@ -53,8 +56,9 @@
++ GNU config.guess ($timestamp)
++ 
++ Originally written by Per Bothner.
++-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
++-Free Software Foundation, Inc.
+++Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
+++2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free
+++Software Foundation, Inc.
++ 
++ This is free software; see the source for copying conditions.  There is NO
++ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
++@@ -66,11 +70,11 @@
++ while test $# -gt 0 ; do
++   case $1 in
++     --time-stamp | --time* | -t )
++-       echo "$timestamp" ; exit 0 ;;
+++       echo "$timestamp" ; exit ;;
++     --version | -v )
++-       echo "$version" ; exit 0 ;;
+++       echo "$version" ; exit ;;
++     --help | --h* | -h )
++-       echo "$usage"; exit 0 ;;
+++       echo "$usage"; exit ;;
++     -- )     # Stop option processing
++        shift; break ;;
++     - )	# Use stdin as input.
++@@ -98,14 +102,18 @@
++ # Historically, `CC_FOR_BUILD' used to be named `HOST_CC'. We still
++ # use `HOST_CC' if defined, but it is deprecated.
++ 
++-# This shell variable is my proudest work .. or something. --bje
+++# Portable tmp directory creation inspired by the Autoconf team.
++ 
++-set_cc_for_build='tmpdir=${TMPDIR-/tmp}/config-guess-$$ ;
++-(old=`umask` && umask 077 && mkdir $tmpdir && umask $old && unset old)
++-   || (echo "$me: cannot create $tmpdir" >&2 && exit 1) ;
++-dummy=$tmpdir/dummy ;
++-files="$dummy.c $dummy.o $dummy.rel $dummy" ;
++-trap '"'"'rm -f $files; rmdir $tmpdir; exit 1'"'"' 1 2 15 ;
+++set_cc_for_build='
+++trap "exitcode=\$?; (rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null) && exit \$exitcode" 0 ;
+++trap "rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null; exit 1" 1 2 13 15 ;
+++: ${TMPDIR=/tmp} ;
+++ { tmp=`(umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
+++ { test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir $tmp) ; } ||
+++ { tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir $tmp) && echo "Warning: creating insecure temp directory" >&2 ; } ||
+++ { echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; } ;
+++dummy=$tmp/dummy ;
+++tmpfiles="$dummy.c $dummy.o $dummy.rel $dummy" ;
++ case $CC_FOR_BUILD,$HOST_CC,$CC in
++  ,,)    echo "int x;" > $dummy.c ;
++ 	for c in cc gcc c89 c99 ; do
++@@ -113,15 +121,13 @@
++ 	     CC_FOR_BUILD="$c"; break ;
++ 	  fi ;
++ 	done ;
++-	rm -f $files ;
++ 	if test x"$CC_FOR_BUILD" = x ; then
++ 	  CC_FOR_BUILD=no_compiler_found ;
++ 	fi
++ 	;;
++  ,,*)   CC_FOR_BUILD=$CC ;;
++  ,*,*)  CC_FOR_BUILD=$HOST_CC ;;
++-esac ;
++-unset files'
+++esac ; set_cc_for_build= ;'
++ 
++ # This is needed to find uname on a Pyramid OSx when run in the BSD universe.
++ # (ghazi@noc.rutgers.edu 1994-08-24)
++@@ -156,6 +162,7 @@
++ 	    arm*) machine=arm-unknown ;;
++ 	    sh3el) machine=shl-unknown ;;
++ 	    sh3eb) machine=sh-unknown ;;
+++	    sh5el) machine=sh5le-unknown ;;
++ 	    *) machine=${UNAME_MACHINE_ARCH}-unknown ;;
++ 	esac
++ 	# The Operating System including object format, if it has switched
++@@ -164,7 +171,7 @@
++ 	    arm*|i386|m68k|ns32k|sh3*|sparc|vax)
++ 		eval $set_cc_for_build
++ 		if echo __ELF__ | $CC_FOR_BUILD -E - 2>/dev/null \
++-			| grep __ELF__ >/dev/null
+++			| grep -q __ELF__
++ 		then
++ 		    # Once all utilities can be ECOFF (netbsdecoff) or a.out (netbsdaout).
++ 		    # Return netbsd for either.  FIX?
++@@ -178,144 +185,128 @@
++ 		;;
++ 	esac
++ 	# The OS release
++-	release=`echo ${UNAME_RELEASE}|sed -e 's/[-_].*/\./'`
+++	# Debian GNU/NetBSD machines have a different userland, and
+++	# thus, need a distinct triplet. However, they do not need
+++	# kernel version information, so it can be replaced with a
+++	# suitable tag, in the style of linux-gnu.
+++	case "${UNAME_VERSION}" in
+++	    Debian*)
+++		release='-gnu'
+++		;;
+++	    *)
+++		release=`echo ${UNAME_RELEASE}|sed -e 's/[-_].*/\./'`
+++		;;
+++	esac
++ 	# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:
++ 	# contains redundant information, the shorter form:
++ 	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
++ 	echo "${machine}-${os}${release}"
++-	exit 0 ;;
++-    amiga:OpenBSD:*:*)
++-	echo m68k-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    arc:OpenBSD:*:*)
++-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    hp300:OpenBSD:*:*)
++-	echo m68k-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    mac68k:OpenBSD:*:*)
++-	echo m68k-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    macppc:OpenBSD:*:*)
++-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    mvme68k:OpenBSD:*:*)
++-	echo m68k-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    mvme88k:OpenBSD:*:*)
++-	echo m88k-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    mvmeppc:OpenBSD:*:*)
++-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    pmax:OpenBSD:*:*)
++-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    sgi:OpenBSD:*:*)
++-	echo mipseb-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    sun3:OpenBSD:*:*)
++-	echo m68k-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    wgrisc:OpenBSD:*:*)
++-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:OpenBSD:*:*)
++-	echo ${UNAME_MACHINE}-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
+++	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`
+++	echo ${UNAME_MACHINE_ARCH}-unknown-openbsd${UNAME_RELEASE}
+++	exit ;;
+++    *:ekkoBSD:*:*)
+++	echo ${UNAME_MACHINE}-unknown-ekkobsd${UNAME_RELEASE}
+++	exit ;;
+++    *:SolidBSD:*:*)
+++	echo ${UNAME_MACHINE}-unknown-solidbsd${UNAME_RELEASE}
+++	exit ;;
+++    macppc:MirBSD:*:*)
+++	echo powerpc-unknown-mirbsd${UNAME_RELEASE}
+++	exit ;;
+++    *:MirBSD:*:*)
+++	echo ${UNAME_MACHINE}-unknown-mirbsd${UNAME_RELEASE}
+++	exit ;;
++     alpha:OSF1:*:*)
++-	if test $UNAME_RELEASE = "V4.0"; then
+++	case $UNAME_RELEASE in
+++	*4.0)
++ 		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`
++-	fi
+++		;;
+++	*5.*)
+++	        UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $4}'`
+++		;;
+++	esac
+++	# According to Compaq, /usr/sbin/psrinfo has been available on
+++	# OSF/1 and Tru64 systems produced since 1995.  I hope that
+++	# covers most systems running today.  This code pipes the CPU
+++	# types through head -n 1, so we only detect the type of CPU 0.
+++	ALPHA_CPU_TYPE=`/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \(.*\) processor.*$/\1/p' | head -n 1`
+++	case "$ALPHA_CPU_TYPE" in
+++	    "EV4 (21064)")
+++		UNAME_MACHINE="alpha" ;;
+++	    "EV4.5 (21064)")
+++		UNAME_MACHINE="alpha" ;;
+++	    "LCA4 (21066/21068)")
+++		UNAME_MACHINE="alpha" ;;
+++	    "EV5 (21164)")
+++		UNAME_MACHINE="alphaev5" ;;
+++	    "EV5.6 (21164A)")
+++		UNAME_MACHINE="alphaev56" ;;
+++	    "EV5.6 (21164PC)")
+++		UNAME_MACHINE="alphapca56" ;;
+++	    "EV5.7 (21164PC)")
+++		UNAME_MACHINE="alphapca57" ;;
+++	    "EV6 (21264)")
+++		UNAME_MACHINE="alphaev6" ;;
+++	    "EV6.7 (21264A)")
+++		UNAME_MACHINE="alphaev67" ;;
+++	    "EV6.8CB (21264C)")
+++		UNAME_MACHINE="alphaev68" ;;
+++	    "EV6.8AL (21264B)")
+++		UNAME_MACHINE="alphaev68" ;;
+++	    "EV6.8CX (21264D)")
+++		UNAME_MACHINE="alphaev68" ;;
+++	    "EV6.9A (21264/EV69A)")
+++		UNAME_MACHINE="alphaev69" ;;
+++	    "EV7 (21364)")
+++		UNAME_MACHINE="alphaev7" ;;
+++	    "EV7.9 (21364A)")
+++		UNAME_MACHINE="alphaev79" ;;
+++	esac
+++	# A Pn.n version is a patched version.
++ 	# A Vn.n version is a released version.
++ 	# A Tn.n version is a released field test version.
++ 	# A Xn.n version is an unreleased experimental baselevel.
++ 	# 1.2 uses "1.2" for uname -r.
++-	eval $set_cc_for_build
++-	cat <<EOF >$dummy.s
++-	.data
++-\$Lformat:
++-	.byte 37,100,45,37,120,10,0	# "%d-%x\n"
++-
++-	.text
++-	.globl main
++-	.align 4
++-	.ent main
++-main:
++-	.frame \$30,16,\$26,0
++-	ldgp \$29,0(\$27)
++-	.prologue 1
++-	.long 0x47e03d80 # implver \$0
++-	lda \$2,-1
++-	.long 0x47e20c21 # amask \$2,\$1
++-	lda \$16,\$Lformat
++-	mov \$0,\$17
++-	not \$1,\$18
++-	jsr \$26,printf
++-	ldgp \$29,0(\$26)
++-	mov 0,\$16
++-	jsr \$26,exit
++-	.end main
++-EOF
++-	$CC_FOR_BUILD -o $dummy $dummy.s 2>/dev/null
++-	if test "$?" = 0 ; then
++-		case `$dummy` in
++-			0-0)
++-				UNAME_MACHINE="alpha"
++-				;;
++-			1-0)
++-				UNAME_MACHINE="alphaev5"
++-				;;
++-			1-1)
++-				UNAME_MACHINE="alphaev56"
++-				;;
++-			1-101)
++-				UNAME_MACHINE="alphapca56"
++-				;;
++-			2-303)
++-				UNAME_MACHINE="alphaev6"
++-				;;
++-			2-307)
++-				UNAME_MACHINE="alphaev67"
++-				;;
++-			2-1307)
++-				UNAME_MACHINE="alphaev68"
++-				;;
++-			3-1307)
++-				UNAME_MACHINE="alphaev7"
++-				;;
++-		esac
++-	fi
++-	rm -f $dummy.s $dummy && rmdir $tmpdir
++-	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[VTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
++-	exit 0 ;;
+++	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[PVTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
+++	exit ;;
++     Alpha\ *:Windows_NT*:*)
++ 	# How do we know it's Interix rather than the generic POSIX subsystem?
++ 	# Should we change UNAME_MACHINE based on the output of uname instead
++ 	# of the specific Alpha model?
++ 	echo alpha-pc-interix
++-	exit 0 ;;
+++	exit ;;
++     21064:Windows_NT:50:3)
++ 	echo alpha-dec-winnt3.5
++-	exit 0 ;;
+++	exit ;;
++     Amiga*:UNIX_System_V:4.0:*)
++ 	echo m68k-unknown-sysv4
++-	exit 0;;
+++	exit ;;
++     *:[Aa]miga[Oo][Ss]:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-amigaos
++-	exit 0 ;;
+++	exit ;;
++     *:[Mm]orph[Oo][Ss]:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-morphos
++-	exit 0 ;;
+++	exit ;;
++     *:OS/390:*:*)
++ 	echo i370-ibm-openedition
++-	exit 0 ;;
+++	exit ;;
+++    *:z/VM:*:*)
+++	echo s390-ibm-zvmoe
+++	exit ;;
+++    *:OS400:*:*)
+++        echo powerpc-ibm-os400
+++	exit ;;
++     arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
++ 	echo arm-acorn-riscix${UNAME_RELEASE}
++-	exit 0;;
+++	exit ;;
+++    arm:riscos:*:*|arm:RISCOS:*:*)
+++	echo arm-unknown-riscos
+++	exit ;;
++     SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
++ 	echo hppa1.1-hitachi-hiuxmpp
++-	exit 0;;
+++	exit ;;
++     Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
++ 	# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.
++ 	if test "`(/bin/universe) 2>/dev/null`" = att ; then
++@@ -323,29 +314,51 @@
++ 	else
++ 		echo pyramid-pyramid-bsd
++ 	fi
++-	exit 0 ;;
+++	exit ;;
++     NILE*:*:*:dcosx)
++ 	echo pyramid-pyramid-svr4
++-	exit 0 ;;
++-    DRS?6000:UNIX_SV:4.2*:7*)
+++	exit ;;
+++    DRS?6000:unix:4.0:6*)
+++	echo sparc-icl-nx6
+++	exit ;;
+++    DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)
++ 	case `/usr/bin/uname -p` in
++-	    sparc) echo sparc-icl-nx7 && exit 0 ;;
+++	    sparc) echo sparc-icl-nx7; exit ;;
++ 	esac ;;
+++    s390x:SunOS:*:*)
+++	echo ${UNAME_MACHINE}-ibm-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+++	exit ;;
++     sun4H:SunOS:5.*:*)
++ 	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
++-	exit 0 ;;
+++	exit ;;
++     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
++ 	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
++-	exit 0 ;;
++-    i86pc:SunOS:5.*:*)
++-	echo i386-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
++-	exit 0 ;;
+++	exit ;;
+++    i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
+++	echo i386-pc-auroraux${UNAME_RELEASE}
+++	exit ;;
+++    i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
+++	eval $set_cc_for_build
+++	SUN_ARCH="i386"
+++	# If there is a compiler, see if it is configured for 64-bit objects.
+++	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.
+++	# This test works for both compilers.
+++	if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
+++	    if (echo '#ifdef __amd64'; echo IS_64BIT_ARCH; echo '#endif') | \
+++		(CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
+++		grep IS_64BIT_ARCH >/dev/null
+++	    then
+++		SUN_ARCH="x86_64"
+++	    fi
+++	fi
+++	echo ${SUN_ARCH}-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+++	exit ;;
++     sun4*:SunOS:6*:*)
++ 	# According to config.sub, this is the proper way to canonicalize
++ 	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
++ 	# it's likely to be more like Solaris than SunOS4.
++ 	echo sparc-sun-solaris3`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
++-	exit 0 ;;
+++	exit ;;
++     sun4*:SunOS:*:*)
++ 	case "`/usr/bin/arch -k`" in
++ 	    Series*|S4*)
++@@ -354,10 +367,10 @@
++ 	esac
++ 	# Japanese Language versions have a version number like `4.1.3-JL'.
++ 	echo sparc-sun-sunos`echo ${UNAME_RELEASE}|sed -e 's/-/_/'`
++-	exit 0 ;;
+++	exit ;;
++     sun3*:SunOS:*:*)
++ 	echo m68k-sun-sunos${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     sun*:*:4.2BSD:*)
++ 	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
++ 	test "x${UNAME_RELEASE}" = "x" && UNAME_RELEASE=3
++@@ -369,10 +382,10 @@
++ 		echo sparc-sun-sunos${UNAME_RELEASE}
++ 		;;
++ 	esac
++-	exit 0 ;;
+++	exit ;;
++     aushp:SunOS:*:*)
++ 	echo sparc-auspex-sunos${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     # The situation for MiNT is a little confusing.  The machine name
++     # can be virtually everything (everything which is not
++     # "atarist" or "atariste" at least should have a processor
++@@ -383,37 +396,40 @@
++     # be no problem.
++     atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
++         echo m68k-atari-mint${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
++ 	echo m68k-atari-mint${UNAME_RELEASE}
++-        exit 0 ;;
+++        exit ;;
++     *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
++         echo m68k-atari-mint${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
++         echo m68k-milan-mint${UNAME_RELEASE}
++-        exit 0 ;;
+++        exit ;;
++     hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
++         echo m68k-hades-mint${UNAME_RELEASE}
++-        exit 0 ;;
+++        exit ;;
++     *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
++         echo m68k-unknown-mint${UNAME_RELEASE}
++-        exit 0 ;;
+++        exit ;;
+++    m68k:machten:*:*)
+++	echo m68k-apple-machten${UNAME_RELEASE}
+++	exit ;;
++     powerpc:machten:*:*)
++ 	echo powerpc-apple-machten${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     RISC*:Mach:*:*)
++ 	echo mips-dec-mach_bsd4.3
++-	exit 0 ;;
+++	exit ;;
++     RISC*:ULTRIX:*:*)
++ 	echo mips-dec-ultrix${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     VAX*:ULTRIX*:*:*)
++ 	echo vax-dec-ultrix${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     2020:CLIX:*:* | 2430:CLIX:*:*)
++ 	echo clipper-intergraph-clix${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     mips:*:*:UMIPS | mips:*:*:RISCos)
++ 	eval $set_cc_for_build
++ 	sed 's/^	//' << EOF >$dummy.c
++@@ -437,33 +453,33 @@
++ 	  exit (-1);
++ 	}
++ EOF
++-	$CC_FOR_BUILD -o $dummy $dummy.c \
++-	  && $dummy `echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` \
++-	  && rm -f $dummy.c $dummy && rmdir $tmpdir && exit 0
++-	rm -f $dummy.c $dummy && rmdir $tmpdir
+++	$CC_FOR_BUILD -o $dummy $dummy.c &&
+++	  dummyarg=`echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` &&
+++	  SYSTEM_NAME=`$dummy $dummyarg` &&
+++	    { echo "$SYSTEM_NAME"; exit; }
++ 	echo mips-mips-riscos${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     Motorola:PowerMAX_OS:*:*)
++ 	echo powerpc-motorola-powermax
++-	exit 0 ;;
+++	exit ;;
++     Motorola:*:4.3:PL8-*)
++ 	echo powerpc-harris-powermax
++-	exit 0 ;;
++-    Night_Hawk:*:*:PowerMAX_OS)
+++	exit ;;
+++    Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)
++ 	echo powerpc-harris-powermax
++-	exit 0 ;;
+++	exit ;;
++     Night_Hawk:Power_UNIX:*:*)
++ 	echo powerpc-harris-powerunix
++-	exit 0 ;;
+++	exit ;;
++     m88k:CX/UX:7*:*)
++ 	echo m88k-harris-cxux7
++-	exit 0 ;;
+++	exit ;;
++     m88k:*:4*:R4*)
++ 	echo m88k-motorola-sysv4
++-	exit 0 ;;
+++	exit ;;
++     m88k:*:3*:R3*)
++ 	echo m88k-motorola-sysv3
++-	exit 0 ;;
+++	exit ;;
++     AViiON:dgux:*:*)
++         # DG/UX returns AViiON for all architectures
++         UNAME_PROCESSOR=`/usr/bin/uname -p`
++@@ -479,29 +495,29 @@
++ 	else
++ 	    echo i586-dg-dgux${UNAME_RELEASE}
++ 	fi
++- 	exit 0 ;;
+++ 	exit ;;
++     M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
++ 	echo m88k-dolphin-sysv3
++-	exit 0 ;;
+++	exit ;;
++     M88*:*:R3*:*)
++ 	# Delta 88k system running SVR3
++ 	echo m88k-motorola-sysv3
++-	exit 0 ;;
+++	exit ;;
++     XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)
++ 	echo m88k-tektronix-sysv3
++-	exit 0 ;;
+++	exit ;;
++     Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)
++ 	echo m68k-tektronix-bsd
++-	exit 0 ;;
+++	exit ;;
++     *:IRIX*:*:*)
++ 	echo mips-sgi-irix`echo ${UNAME_RELEASE}|sed -e 's/-/_/g'`
++-	exit 0 ;;
+++	exit ;;
++     ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
++-	echo romp-ibm-aix      # uname -m gives an 8 hex-code CPU id
++-	exit 0 ;;              # Note that: echo "'`uname -s`'" gives 'AIX '
+++	echo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id
+++	exit ;;               # Note that: echo "'`uname -s`'" gives 'AIX '
++     i*86:AIX:*:*)
++ 	echo i386-ibm-aix
++-	exit 0 ;;
+++	exit ;;
++     ia64:AIX:*:*)
++ 	if [ -x /usr/bin/oslevel ] ; then
++ 		IBM_REV=`/usr/bin/oslevel`
++@@ -509,7 +525,7 @@
++ 		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
++ 	fi
++ 	echo ${UNAME_MACHINE}-ibm-aix${IBM_REV}
++-	exit 0 ;;
+++	exit ;;
++     *:AIX:2:3)
++ 	if grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then
++ 		eval $set_cc_for_build
++@@ -524,16 +540,19 @@
++ 			exit(0);
++ 			}
++ EOF
++-		$CC_FOR_BUILD -o $dummy $dummy.c && $dummy && rm -f $dummy.c $dummy && rmdir $tmpdir && exit 0
++-		rm -f $dummy.c $dummy && rmdir $tmpdir
++-		echo rs6000-ibm-aix3.2.5
+++		if $CC_FOR_BUILD -o $dummy $dummy.c && SYSTEM_NAME=`$dummy`
+++		then
+++			echo "$SYSTEM_NAME"
+++		else
+++			echo rs6000-ibm-aix3.2.5
+++		fi
++ 	elif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then
++ 		echo rs6000-ibm-aix3.2.4
++ 	else
++ 		echo rs6000-ibm-aix3.2
++ 	fi
++-	exit 0 ;;
++-    *:AIX:*:[45])
+++	exit ;;
+++    *:AIX:*:[456])
++ 	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
++ 	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/dev/null 2>&1; then
++ 		IBM_ARCH=rs6000
++@@ -546,28 +565,28 @@
++ 		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
++ 	fi
++ 	echo ${IBM_ARCH}-ibm-aix${IBM_REV}
++-	exit 0 ;;
+++	exit ;;
++     *:AIX:*:*)
++ 	echo rs6000-ibm-aix
++-	exit 0 ;;
+++	exit ;;
++     ibmrt:4.4BSD:*|romp-ibm:BSD:*)
++ 	echo romp-ibm-bsd4.4
++-	exit 0 ;;
+++	exit ;;
++     ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
++ 	echo romp-ibm-bsd${UNAME_RELEASE}   # 4.3 with uname added to
++-	exit 0 ;;                           # report: romp-ibm BSD 4.3
+++	exit ;;                             # report: romp-ibm BSD 4.3
++     *:BOSX:*:*)
++ 	echo rs6000-bull-bosx
++-	exit 0 ;;
+++	exit ;;
++     DPX/2?00:B.O.S.:*:*)
++ 	echo m68k-bull-sysv3
++-	exit 0 ;;
+++	exit ;;
++     9000/[34]??:4.3bsd:1.*:*)
++ 	echo m68k-hp-bsd
++-	exit 0 ;;
+++	exit ;;
++     hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)
++ 	echo m68k-hp-bsd4.4
++-	exit 0 ;;
+++	exit ;;
++     9000/[34678]??:HP-UX:*:*)
++ 	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
++ 	case "${UNAME_MACHINE}" in
++@@ -624,16 +643,36 @@
++               }
++ EOF
++ 		    (CCOPTS= $CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null) && HP_ARCH=`$dummy`
++-		    if test -z "$HP_ARCH"; then HP_ARCH=hppa; fi
++-		    rm -f $dummy.c $dummy && rmdir $tmpdir
+++		    test -z "$HP_ARCH" && HP_ARCH=hppa
++ 		fi ;;
++ 	esac
+++	if [ ${HP_ARCH} = "hppa2.0w" ]
+++	then
+++	    eval $set_cc_for_build
+++
+++	    # hppa2.0w-hp-hpux* has a 64-bit kernel and a compiler generating
+++	    # 32-bit code.  hppa64-hp-hpux* has the same kernel and a compiler
+++	    # generating 64-bit code.  GNU and HP use different nomenclature:
+++	    #
+++	    # $ CC_FOR_BUILD=cc ./config.guess
+++	    # => hppa2.0w-hp-hpux11.23
+++	    # $ CC_FOR_BUILD="cc +DA2.0w" ./config.guess
+++	    # => hppa64-hp-hpux11.23
+++
+++	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) |
+++		grep -q __LP64__
+++	    then
+++		HP_ARCH="hppa2.0w"
+++	    else
+++		HP_ARCH="hppa64"
+++	    fi
+++	fi
++ 	echo ${HP_ARCH}-hp-hpux${HPUX_REV}
++-	exit 0 ;;
+++	exit ;;
++     ia64:HP-UX:*:*)
++ 	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
++ 	echo ia64-hp-hpux${HPUX_REV}
++-	exit 0 ;;
+++	exit ;;
++     3050*:HI-UX:*:*)
++ 	eval $set_cc_for_build
++ 	sed 's/^	//' << EOF >$dummy.c
++@@ -661,186 +700,248 @@
++ 	  exit (0);
++ 	}
++ EOF
++-	$CC_FOR_BUILD -o $dummy $dummy.c && $dummy && rm -f $dummy.c $dummy && rmdir $tmpdir && exit 0
++-	rm -f $dummy.c $dummy && rmdir $tmpdir
+++	$CC_FOR_BUILD -o $dummy $dummy.c && SYSTEM_NAME=`$dummy` &&
+++		{ echo "$SYSTEM_NAME"; exit; }
++ 	echo unknown-hitachi-hiuxwe2
++-	exit 0 ;;
+++	exit ;;
++     9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:* )
++ 	echo hppa1.1-hp-bsd
++-	exit 0 ;;
+++	exit ;;
++     9000/8??:4.3bsd:*:*)
++ 	echo hppa1.0-hp-bsd
++-	exit 0 ;;
+++	exit ;;
++     *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
++ 	echo hppa1.0-hp-mpeix
++-	exit 0 ;;
+++	exit ;;
++     hp7??:OSF1:*:* | hp8?[79]:OSF1:*:* )
++ 	echo hppa1.1-hp-osf
++-	exit 0 ;;
+++	exit ;;
++     hp8??:OSF1:*:*)
++ 	echo hppa1.0-hp-osf
++-	exit 0 ;;
+++	exit ;;
++     i*86:OSF1:*:*)
++ 	if [ -x /usr/sbin/sysversion ] ; then
++ 	    echo ${UNAME_MACHINE}-unknown-osf1mk
++ 	else
++ 	    echo ${UNAME_MACHINE}-unknown-osf1
++ 	fi
++-	exit 0 ;;
+++	exit ;;
++     parisc*:Lites*:*:*)
++ 	echo hppa1.1-hp-lites
++-	exit 0 ;;
+++	exit ;;
++     C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
++ 	echo c1-convex-bsd
++-        exit 0 ;;
+++        exit ;;
++     C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
++ 	if getsysinfo -f scalar_acc
++ 	then echo c32-convex-bsd
++ 	else echo c2-convex-bsd
++ 	fi
++-        exit 0 ;;
+++        exit ;;
++     C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
++ 	echo c34-convex-bsd
++-        exit 0 ;;
+++        exit ;;
++     C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
++ 	echo c38-convex-bsd
++-        exit 0 ;;
+++        exit ;;
++     C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
++ 	echo c4-convex-bsd
++-        exit 0 ;;
+++        exit ;;
++     CRAY*Y-MP:*:*:*)
++ 	echo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
++-	exit 0 ;;
+++	exit ;;
++     CRAY*[A-Z]90:*:*:*)
++ 	echo ${UNAME_MACHINE}-cray-unicos${UNAME_RELEASE} \
++ 	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
++ 	      -e y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/ \
++ 	      -e 's/\.[^.]*$/.X/'
++-	exit 0 ;;
+++	exit ;;
++     CRAY*TS:*:*:*)
++ 	echo t90-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
++-	exit 0 ;;
++-    CRAY*T3D:*:*:*)
++-	echo alpha-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
++-	exit 0 ;;
+++	exit ;;
++     CRAY*T3E:*:*:*)
++ 	echo alphaev5-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
++-	exit 0 ;;
+++	exit ;;
++     CRAY*SV1:*:*:*)
++ 	echo sv1-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
++-	exit 0 ;;
+++	exit ;;
+++    *:UNICOS/mp:*:*)
+++	echo craynv-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+++	exit ;;
++     F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
++ 	FUJITSU_PROC=`uname -m | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
++         FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
++         FUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`
++         echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
++-        exit 0 ;;
+++        exit ;;
+++    5000:UNIX_System_V:4.*:*)
+++        FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
+++        FUJITSU_REL=`echo ${UNAME_RELEASE} | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/ /_/'`
+++        echo "sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
+++	exit ;;
++     i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
++ 	echo ${UNAME_MACHINE}-pc-bsdi${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     sparc*:BSD/OS:*:*)
++ 	echo sparc-unknown-bsdi${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:BSD/OS:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:FreeBSD:*:*)
++-	# Determine whether the default compiler uses glibc.
++-	eval $set_cc_for_build
++-	sed 's/^	//' << EOF >$dummy.c
++-	#include <features.h>
++-	#if __GLIBC__ >= 2
++-	LIBC=gnu
++-	#else
++-	LIBC=
++-	#endif
++-EOF
++-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
++-	rm -f $dummy.c && rmdir $tmpdir
++-	echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`${LIBC:+-$LIBC}
++-	exit 0 ;;
+++	case ${UNAME_MACHINE} in
+++	    pc98)
+++		echo i386-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
+++	    amd64)
+++		echo x86_64-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
+++	    *)
+++		echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
+++	esac
+++	exit ;;
++     i*:CYGWIN*:*)
++ 	echo ${UNAME_MACHINE}-pc-cygwin
++-	exit 0 ;;
++-    i*:MINGW*:*)
+++	exit ;;
+++    *:MINGW*:*)
++ 	echo ${UNAME_MACHINE}-pc-mingw32
++-	exit 0 ;;
+++	exit ;;
+++    i*:windows32*:*)
+++    	# uname -m includes "-pc" on this system.
+++    	echo ${UNAME_MACHINE}-mingw32
+++	exit ;;
++     i*:PW*:*)
++ 	echo ${UNAME_MACHINE}-pc-pw32
++-	exit 0 ;;
++-    x86:Interix*:3*)
++-	echo i386-pc-interix3
++-	exit 0 ;;
+++	exit ;;
+++    *:Interix*:*)
+++    	case ${UNAME_MACHINE} in
+++	    x86)
+++		echo i586-pc-interix${UNAME_RELEASE}
+++		exit ;;
+++	    authenticamd | genuineintel | EM64T)
+++		echo x86_64-unknown-interix${UNAME_RELEASE}
+++		exit ;;
+++	    IA64)
+++		echo ia64-unknown-interix${UNAME_RELEASE}
+++		exit ;;
+++	esac ;;
+++    [345]86:Windows_95:* | [345]86:Windows_98:* | [345]86:Windows_NT:*)
+++	echo i${UNAME_MACHINE}-pc-mks
+++	exit ;;
+++    8664:Windows_NT:*)
+++	echo x86_64-pc-mks
+++	exit ;;
++     i*:Windows_NT*:* | Pentium*:Windows_NT*:*)
++ 	# How do we know it's Interix rather than the generic POSIX subsystem?
++ 	# It also conflicts with pre-2.0 versions of AT&T UWIN. Should we
++ 	# UNAME_MACHINE based on the output of uname instead of i386?
++-	echo i386-pc-interix
++-	exit 0 ;;
+++	echo i586-pc-interix
+++	exit ;;
++     i*:UWIN*:*)
++ 	echo ${UNAME_MACHINE}-pc-uwin
++-	exit 0 ;;
+++	exit ;;
+++    amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
+++	echo x86_64-unknown-cygwin
+++	exit ;;
++     p*:CYGWIN*:*)
++ 	echo powerpcle-unknown-cygwin
++-	exit 0 ;;
+++	exit ;;
++     prep*:SunOS:5.*:*)
++ 	echo powerpcle-unknown-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
++-	exit 0 ;;
+++	exit ;;
++     *:GNU:*:*)
+++	# the GNU system
++ 	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
++-	exit 0 ;;
+++	exit ;;
+++    *:GNU/*:*:*)
+++	# other systems with GNU libc and userland
+++	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-gnu
+++	exit ;;
++     i*86:Minix:*:*)
++ 	echo ${UNAME_MACHINE}-pc-minix
++-	exit 0 ;;
+++	exit ;;
+++    alpha:Linux:*:*)
+++	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
+++	  EV5)   UNAME_MACHINE=alphaev5 ;;
+++	  EV56)  UNAME_MACHINE=alphaev56 ;;
+++	  PCA56) UNAME_MACHINE=alphapca56 ;;
+++	  PCA57) UNAME_MACHINE=alphapca56 ;;
+++	  EV6)   UNAME_MACHINE=alphaev6 ;;
+++	  EV67)  UNAME_MACHINE=alphaev67 ;;
+++	  EV68*) UNAME_MACHINE=alphaev68 ;;
+++        esac
+++	objdump --private-headers /bin/sh | grep -q ld.so.1
+++	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
+++	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
+++	exit ;;
++     arm*:Linux:*:*)
+++	eval $set_cc_for_build
+++	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
+++	    | grep -q __ARM_EABI__
+++	then
+++	    echo ${UNAME_MACHINE}-unknown-linux-gnu
+++	else
+++	    echo ${UNAME_MACHINE}-unknown-linux-gnueabi
+++	fi
+++	exit ;;
+++    avr32*:Linux:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-linux-gnu
++-	exit 0 ;;
+++	exit ;;
+++    cris:Linux:*:*)
+++	echo cris-axis-linux-gnu
+++	exit ;;
+++    crisv32:Linux:*:*)
+++	echo crisv32-axis-linux-gnu
+++	exit ;;
+++    frv:Linux:*:*)
+++    	echo frv-unknown-linux-gnu
+++	exit ;;
+++    i*86:Linux:*:*)
+++	LIBC=gnu
+++	eval $set_cc_for_build
+++	sed 's/^	//' << EOF >$dummy.c
+++	#ifdef __dietlibc__
+++	LIBC=dietlibc
+++	#endif
+++EOF
+++	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC'`
+++	echo "${UNAME_MACHINE}-pc-linux-${LIBC}"
+++	exit ;;
++     ia64:Linux:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-linux-gnu
++-	exit 0 ;;
+++	exit ;;
+++    m32r*:Linux:*:*)
+++	echo ${UNAME_MACHINE}-unknown-linux-gnu
+++	exit ;;
++     m68*:Linux:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-linux-gnu
++-	exit 0 ;;
++-    mips:Linux:*:*)
+++	exit ;;
+++    mips:Linux:*:* | mips64:Linux:*:*)
++ 	eval $set_cc_for_build
++ 	sed 's/^	//' << EOF >$dummy.c
++ 	#undef CPU
++-	#undef mips
++-	#undef mipsel
+++	#undef ${UNAME_MACHINE}
+++	#undef ${UNAME_MACHINE}el
++ 	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
++-	CPU=mipsel
+++	CPU=${UNAME_MACHINE}el
++ 	#else
++ 	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
++-	CPU=mips
+++	CPU=${UNAME_MACHINE}
++ 	#else
++ 	CPU=
++ 	#endif
++ 	#endif
++ EOF
++-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
++-	rm -f $dummy.c && rmdir $tmpdir
++-	test x"${CPU}" != x && echo "${CPU}-pc-linux-gnu" && exit 0
+++	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^CPU'`
+++	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
++ 	;;
++-    ppc:Linux:*:*)
++-	echo powerpc-unknown-linux-gnu
++-	exit 0 ;;
++-    ppc64:Linux:*:*)
++-	echo powerpc64-unknown-linux-gnu
++-	exit 0 ;;
++-    alpha:Linux:*:*)
++-	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
++-	  EV5)   UNAME_MACHINE=alphaev5 ;;
++-	  EV56)  UNAME_MACHINE=alphaev56 ;;
++-	  PCA56) UNAME_MACHINE=alphapca56 ;;
++-	  PCA57) UNAME_MACHINE=alphapca56 ;;
++-	  EV6)   UNAME_MACHINE=alphaev6 ;;
++-	  EV67)  UNAME_MACHINE=alphaev67 ;;
++-	  EV68*) UNAME_MACHINE=alphaev68 ;;
++-        esac
++-	objdump --private-headers /bin/sh | grep ld.so.1 >/dev/null
++-	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
++-	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
++-	exit 0 ;;
+++    or32:Linux:*:*)
+++	echo or32-unknown-linux-gnu
+++	exit ;;
+++    padre:Linux:*:*)
+++	echo sparc-unknown-linux-gnu
+++	exit ;;
+++    parisc64:Linux:*:* | hppa64:Linux:*:*)
+++	echo hppa64-unknown-linux-gnu
+++	exit ;;
++     parisc:Linux:*:* | hppa:Linux:*:*)
++ 	# Look for CPU level
++ 	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
++@@ -848,82 +949,40 @@
++ 	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
++ 	  *)    echo hppa-unknown-linux-gnu ;;
++ 	esac
++-	exit 0 ;;
++-    parisc64:Linux:*:* | hppa64:Linux:*:*)
++-	echo hppa64-unknown-linux-gnu
++-	exit 0 ;;
+++	exit ;;
+++    ppc64:Linux:*:*)
+++	echo powerpc64-unknown-linux-gnu
+++	exit ;;
+++    ppc:Linux:*:*)
+++	echo powerpc-unknown-linux-gnu
+++	exit ;;
++     s390:Linux:*:* | s390x:Linux:*:*)
++ 	echo ${UNAME_MACHINE}-ibm-linux
++-	exit 0 ;;
+++	exit ;;
+++    sh64*:Linux:*:*)
+++    	echo ${UNAME_MACHINE}-unknown-linux-gnu
+++	exit ;;
++     sh*:Linux:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-linux-gnu
++-	exit 0 ;;
+++	exit ;;
++     sparc:Linux:*:* | sparc64:Linux:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-linux-gnu
++-	exit 0 ;;
+++	exit ;;
+++    vax:Linux:*:*)
+++	echo ${UNAME_MACHINE}-dec-linux-gnu
+++	exit ;;
++     x86_64:Linux:*:*)
++ 	echo x86_64-unknown-linux-gnu
++-	exit 0 ;;
++-    i*86:Linux:*:*)
++-	# The BFD linker knows what the default object file format is, so
++-	# first see if it will tell us. cd to the root directory to prevent
++-	# problems with other programs or directories called `ld' in the path.
++-	# Set LC_ALL=C to ensure ld outputs messages in English.
++-	ld_supported_targets=`cd /; LC_ALL=C ld --help 2>&1 \
++-			 | sed -ne '/supported targets:/!d
++-				    s/[ 	][ 	]*/ /g
++-				    s/.*supported targets: *//
++-				    s/ .*//
++-				    p'`
++-        case "$ld_supported_targets" in
++-	  elf32-i386)
++-		TENTATIVE="${UNAME_MACHINE}-pc-linux-gnu"
++-		;;
++-	  a.out-i386-linux)
++-		echo "${UNAME_MACHINE}-pc-linux-gnuaout"
++-		exit 0 ;;
++-	  coff-i386)
++-		echo "${UNAME_MACHINE}-pc-linux-gnucoff"
++-		exit 0 ;;
++-	  "")
++-		# Either a pre-BFD a.out linker (linux-gnuoldld) or
++-		# one that does not give us useful --help.
++-		echo "${UNAME_MACHINE}-pc-linux-gnuoldld"
++-		exit 0 ;;
++-	esac
++-	# Determine whether the default compiler is a.out or elf
++-	eval $set_cc_for_build
++-	sed 's/^	//' << EOF >$dummy.c
++-	#include <features.h>
++-	#ifdef __ELF__
++-	# ifdef __GLIBC__
++-	#  if __GLIBC__ >= 2
++-	LIBC=gnu
++-	#  else
++-	LIBC=gnulibc1
++-	#  endif
++-	# else
++-	LIBC=gnulibc1
++-	# endif
++-	#else
++-	#ifdef __INTEL_COMPILER
++-	LIBC=gnu
++-	#else
++-	LIBC=gnuaout
++-	#endif
++-	#endif
++-EOF
++-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
++-	rm -f $dummy.c && rmdir $tmpdir
++-	test x"${LIBC}" != x && echo "${UNAME_MACHINE}-pc-linux-${LIBC}" && exit 0
++-	test x"${TENTATIVE}" != x && echo "${TENTATIVE}" && exit 0
++-	;;
+++	exit ;;
+++    xtensa*:Linux:*:*)
+++    	echo ${UNAME_MACHINE}-unknown-linux-gnu
+++	exit ;;
++     i*86:DYNIX/ptx:4*:*)
++ 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
++ 	# earlier versions are messed up and put the nodename in both
++ 	# sysname and nodename.
++ 	echo i386-sequent-sysv4
++-	exit 0 ;;
+++	exit ;;
++     i*86:UNIX_SV:4.2MP:2.*)
++         # Unixware is an offshoot of SVR4, but it has its own version
++         # number series starting with 2...
++@@ -931,7 +990,27 @@
++ 	# I just have to hope.  -- rms.
++         # Use sysv4.2uw... so that sysv4* matches it.
++ 	echo ${UNAME_MACHINE}-pc-sysv4.2uw${UNAME_VERSION}
++-	exit 0 ;;
+++	exit ;;
+++    i*86:OS/2:*:*)
+++	# If we were able to find `uname', then EMX Unix compatibility
+++	# is probably installed.
+++	echo ${UNAME_MACHINE}-pc-os2-emx
+++	exit ;;
+++    i*86:XTS-300:*:STOP)
+++	echo ${UNAME_MACHINE}-unknown-stop
+++	exit ;;
+++    i*86:atheos:*:*)
+++	echo ${UNAME_MACHINE}-unknown-atheos
+++	exit ;;
+++    i*86:syllable:*:*)
+++	echo ${UNAME_MACHINE}-pc-syllable
+++	exit ;;
+++    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.[02]*:*)
+++	echo i386-unknown-lynxos${UNAME_RELEASE}
+++	exit ;;
+++    i*86:*DOS:*:*)
+++	echo ${UNAME_MACHINE}-pc-msdosdjgpp
+++	exit ;;
++     i*86:*:4.*:* | i*86:SYSTEM_V:4.*:*)
++ 	UNAME_REL=`echo ${UNAME_RELEASE} | sed 's/\/MP$//'`
++ 	if grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then
++@@ -939,15 +1018,16 @@
++ 	else
++ 		echo ${UNAME_MACHINE}-pc-sysv${UNAME_REL}
++ 	fi
++-	exit 0 ;;
++-    i*86:*:5:[78]*)
+++	exit ;;
+++    i*86:*:5:[678]*)
+++    	# UnixWare 7.x, OpenUNIX and OpenServer 6.
++ 	case `/bin/uname -X | grep "^Machine"` in
++ 	    *486*)	     UNAME_MACHINE=i486 ;;
++ 	    *Pentium)	     UNAME_MACHINE=i586 ;;
++ 	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
++ 	esac
++ 	echo ${UNAME_MACHINE}-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
++-	exit 0 ;;
+++	exit ;;
++     i*86:*:3.2:*)
++ 	if test -f /usr/options/cb.name; then
++ 		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
++@@ -965,76 +1045,86 @@
++ 	else
++ 		echo ${UNAME_MACHINE}-pc-sysv32
++ 	fi
++-	exit 0 ;;
++-    i*86:*DOS:*:*)
++-	echo ${UNAME_MACHINE}-pc-msdosdjgpp
++-	exit 0 ;;
+++	exit ;;
++     pc:*:*:*)
++ 	# Left here for compatibility:
++         # uname -m prints for DJGPP always 'pc', but it prints nothing about
++-        # the processor, so we play safe by assuming i386.
++-	echo i386-pc-msdosdjgpp
++-        exit 0 ;;
+++        # the processor, so we play safe by assuming i586.
+++	# Note: whatever this is, it MUST be the same as what config.sub
+++	# prints for the "djgpp" host, or else GDB configury will decide that
+++	# this is a cross-build.
+++	echo i586-pc-msdosdjgpp
+++        exit ;;
++     Intel:Mach:3*:*)
++ 	echo i386-pc-mach3
++-	exit 0 ;;
+++	exit ;;
++     paragon:*:*:*)
++ 	echo i860-intel-osf1
++-	exit 0 ;;
+++	exit ;;
++     i860:*:4.*:*) # i860-SVR4
++ 	if grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then
++ 	  echo i860-stardent-sysv${UNAME_RELEASE} # Stardent Vistra i860-SVR4
++ 	else # Add other i860-SVR4 vendors below as they are discovered.
++ 	  echo i860-unknown-sysv${UNAME_RELEASE}  # Unknown i860-SVR4
++ 	fi
++-	exit 0 ;;
+++	exit ;;
++     mini*:CTIX:SYS*5:*)
++ 	# "miniframe"
++ 	echo m68010-convergent-sysv
++-	exit 0 ;;
+++	exit ;;
++     mc68k:UNIX:SYSTEM5:3.51m)
++ 	echo m68k-convergent-sysv
++-	exit 0 ;;
++-    M68*:*:R3V[567]*:*)
++-	test -r /sysV68 && echo 'm68k-motorola-sysv' && exit 0 ;;
++-    3[34]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0)
+++	exit ;;
+++    M680?0:D-NIX:5.3:*)
+++	echo m68k-diab-dnix
+++	exit ;;
+++    M68*:*:R3V[5678]*:*)
+++	test -r /sysV68 && { echo 'm68k-motorola-sysv'; exit; } ;;
+++    3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)
++ 	OS_REL=''
++ 	test -r /etc/.relid \
++ 	&& OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
++ 	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
++-	  && echo i486-ncr-sysv4.3${OS_REL} && exit 0
+++	  && { echo i486-ncr-sysv4.3${OS_REL}; exit; }
++ 	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
++-	  && echo i586-ncr-sysv4.3${OS_REL} && exit 0 ;;
+++	  && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
++     3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
++         /bin/uname -p 2>/dev/null | grep 86 >/dev/null \
++-          && echo i486-ncr-sysv4 && exit 0 ;;
+++          && { echo i486-ncr-sysv4; exit; } ;;
+++    NCR*:*:4.2:* | MPRAS*:*:4.2:*)
+++	OS_REL='.3'
+++	test -r /etc/.relid \
+++	    && OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
+++	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+++	    && { echo i486-ncr-sysv4.3${OS_REL}; exit; }
+++	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
+++	    && { echo i586-ncr-sysv4.3${OS_REL}; exit; }
+++	/bin/uname -p 2>/dev/null | /bin/grep pteron >/dev/null \
+++	    && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
++     m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
++ 	echo m68k-unknown-lynxos${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     mc68030:UNIX_System_V:4.*:*)
++ 	echo m68k-atari-sysv4
++-	exit 0 ;;
++-    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.0*:*)
++-	echo i386-unknown-lynxos${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     TSUNAMI:LynxOS:2.*:*)
++ 	echo sparc-unknown-lynxos${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     rs6000:LynxOS:2.*:*)
++ 	echo rs6000-unknown-lynxos${UNAME_RELEASE}
++-	exit 0 ;;
++-    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.0*:*)
+++	exit ;;
+++    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.[02]*:*)
++ 	echo powerpc-unknown-lynxos${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     SM[BE]S:UNIX_SV:*:*)
++ 	echo mips-dde-sysv${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     RM*:ReliantUNIX-*:*:*)
++ 	echo mips-sni-sysv4
++-	exit 0 ;;
+++	exit ;;
++     RM*:SINIX-*:*:*)
++ 	echo mips-sni-sysv4
++-	exit 0 ;;
+++	exit ;;
++     *:SINIX-*:*:*)
++ 	if uname -p 2>/dev/null >/dev/null ; then
++ 		UNAME_MACHINE=`(uname -p) 2>/dev/null`
++@@ -1042,64 +1132,94 @@
++ 	else
++ 		echo ns32k-sni-sysv
++ 	fi
++-	exit 0 ;;
+++	exit ;;
++     PENTIUM:*:4.0*:*) # Unisys `ClearPath HMP IX 4000' SVR4/MP effort
++                       # says <Richard.M.Bartel@ccMail.Census.GOV>
++         echo i586-unisys-sysv4
++-        exit 0 ;;
+++        exit ;;
++     *:UNIX_System_V:4*:FTX*)
++ 	# From Gerald Hewes <hewes@openmarket.com>.
++ 	# How about differentiating between stratus architectures? -djm
++ 	echo hppa1.1-stratus-sysv4
++-	exit 0 ;;
+++	exit ;;
++     *:*:*:FTX*)
++ 	# From seanf@swdc.stratus.com.
++ 	echo i860-stratus-sysv4
++-	exit 0 ;;
+++	exit ;;
+++    i*86:VOS:*:*)
+++	# From Paul.Green@stratus.com.
+++	echo ${UNAME_MACHINE}-stratus-vos
+++	exit ;;
++     *:VOS:*:*)
++ 	# From Paul.Green@stratus.com.
++ 	echo hppa1.1-stratus-vos
++-	exit 0 ;;
+++	exit ;;
++     mc68*:A/UX:*:*)
++ 	echo m68k-apple-aux${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     news*:NEWS-OS:6*:*)
++ 	echo mips-sony-newsos6
++-	exit 0 ;;
+++	exit ;;
++     R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
++ 	if [ -d /usr/nec ]; then
++ 	        echo mips-nec-sysv${UNAME_RELEASE}
++ 	else
++ 	        echo mips-unknown-sysv${UNAME_RELEASE}
++ 	fi
++-        exit 0 ;;
+++        exit ;;
++     BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
++ 	echo powerpc-be-beos
++-	exit 0 ;;
+++	exit ;;
++     BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.
++ 	echo powerpc-apple-beos
++-	exit 0 ;;
+++	exit ;;
++     BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
++ 	echo i586-pc-beos
++-	exit 0 ;;
+++	exit ;;
+++    BePC:Haiku:*:*)	# Haiku running on Intel PC compatible.
+++	echo i586-pc-haiku
+++	exit ;;
++     SX-4:SUPER-UX:*:*)
++ 	echo sx4-nec-superux${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     SX-5:SUPER-UX:*:*)
++ 	echo sx5-nec-superux${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     SX-6:SUPER-UX:*:*)
++ 	echo sx6-nec-superux${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
+++    SX-7:SUPER-UX:*:*)
+++	echo sx7-nec-superux${UNAME_RELEASE}
+++	exit ;;
+++    SX-8:SUPER-UX:*:*)
+++	echo sx8-nec-superux${UNAME_RELEASE}
+++	exit ;;
+++    SX-8R:SUPER-UX:*:*)
+++	echo sx8r-nec-superux${UNAME_RELEASE}
+++	exit ;;
++     Power*:Rhapsody:*:*)
++ 	echo powerpc-apple-rhapsody${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:Rhapsody:*:*)
++ 	echo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:Darwin:*:*)
++-	echo `uname -p`-apple-darwin${UNAME_RELEASE}
++-	exit 0 ;;
+++	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
+++	case $UNAME_PROCESSOR in
+++	    i386)
+++		eval $set_cc_for_build
+++		if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
+++		  if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
+++		      (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
+++		      grep IS_64BIT_ARCH >/dev/null
+++		  then
+++		      UNAME_PROCESSOR="x86_64"
+++		  fi
+++		fi ;;
+++	    unknown) UNAME_PROCESSOR=powerpc ;;
+++	esac
+++	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
+++	exit ;;
++     *:procnto*:*:* | *:QNX:[0123456789]*:*)
++ 	UNAME_PROCESSOR=`uname -p`
++ 	if test "$UNAME_PROCESSOR" = "x86"; then
++@@ -1107,22 +1227,25 @@
++ 		UNAME_MACHINE=pc
++ 	fi
++ 	echo ${UNAME_PROCESSOR}-${UNAME_MACHINE}-nto-qnx${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:QNX:*:4*)
++ 	echo i386-pc-qnx
++-	exit 0 ;;
++-    NSR-[DGKLNPTVW]:NONSTOP_KERNEL:*:*)
+++	exit ;;
+++    NSE-?:NONSTOP_KERNEL:*:*)
+++	echo nse-tandem-nsk${UNAME_RELEASE}
+++	exit ;;
+++    NSR-?:NONSTOP_KERNEL:*:*)
++ 	echo nsr-tandem-nsk${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:NonStop-UX:*:*)
++ 	echo mips-compaq-nonstopux
++-	exit 0 ;;
+++	exit ;;
++     BS2000:POSIX*:*:*)
++ 	echo bs2000-siemens-sysv
++-	exit 0 ;;
+++	exit ;;
++     DS/*:UNIX_System_V:*:*)
++ 	echo ${UNAME_MACHINE}-${UNAME_SYSTEM}-${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:Plan9:*:*)
++ 	# "uname -m" is not consistent, so use $cputype instead. 386
++ 	# is converted to i386 for consistency with other x86
++@@ -1133,36 +1256,50 @@
++ 	    UNAME_MACHINE="$cputype"
++ 	fi
++ 	echo ${UNAME_MACHINE}-unknown-plan9
++-	exit 0 ;;
++-    i*86:OS/2:*:*)
++-	# If we were able to find `uname', then EMX Unix compatibility
++-	# is probably installed.
++-	echo ${UNAME_MACHINE}-pc-os2-emx
++-	exit 0 ;;
+++	exit ;;
++     *:TOPS-10:*:*)
++ 	echo pdp10-unknown-tops10
++-	exit 0 ;;
+++	exit ;;
++     *:TENEX:*:*)
++ 	echo pdp10-unknown-tenex
++-	exit 0 ;;
+++	exit ;;
++     KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)
++ 	echo pdp10-dec-tops20
++-	exit 0 ;;
+++	exit ;;
++     XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)
++ 	echo pdp10-xkl-tops20
++-	exit 0 ;;
+++	exit ;;
++     *:TOPS-20:*:*)
++ 	echo pdp10-unknown-tops20
++-	exit 0 ;;
+++	exit ;;
++     *:ITS:*:*)
++ 	echo pdp10-unknown-its
++-	exit 0 ;;
++-    i*86:XTS-300:*:STOP)
++-	echo ${UNAME_MACHINE}-unknown-stop
++-	exit 0 ;;
++-    i*86:atheos:*:*)
++-	echo ${UNAME_MACHINE}-unknown-atheos
++-	exit 0 ;;
+++	exit ;;
+++    SEI:*:*:SEIUX)
+++        echo mips-sei-seiux${UNAME_RELEASE}
+++	exit ;;
+++    *:DragonFly:*:*)
+++	echo ${UNAME_MACHINE}-unknown-dragonfly`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
+++	exit ;;
+++    *:*VMS:*:*)
+++    	UNAME_MACHINE=`(uname -p) 2>/dev/null`
+++	case "${UNAME_MACHINE}" in
+++	    A*) echo alpha-dec-vms ; exit ;;
+++	    I*) echo ia64-dec-vms ; exit ;;
+++	    V*) echo vax-dec-vms ; exit ;;
+++	esac ;;
+++    *:XENIX:*:SysV)
+++	echo i386-pc-xenix
+++	exit ;;
+++    i*86:skyos:*:*)
+++	echo ${UNAME_MACHINE}-pc-skyos`echo ${UNAME_RELEASE}` | sed -e 's/ .*$//'
+++	exit ;;
+++    i*86:rdos:*:*)
+++	echo ${UNAME_MACHINE}-pc-rdos
+++	exit ;;
+++    i*86:AROS:*:*)
+++	echo ${UNAME_MACHINE}-pc-aros
+++	exit ;;
++ esac
++ 
++ #echo '(No uname command or uname output not recognized.)' 1>&2
++@@ -1194,7 +1331,7 @@
++ #endif
++ 
++ #if defined (__arm) && defined (__acorn) && defined (__unix)
++-  printf ("arm-acorn-riscix"); exit (0);
+++  printf ("arm-acorn-riscix\n"); exit (0);
++ #endif
++ 
++ #if defined (hp300) && !defined (hpux)
++@@ -1283,12 +1420,12 @@
++ }
++ EOF
++ 
++-$CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && $dummy && rm -f $dummy.c $dummy && rmdir $tmpdir && exit 0
++-rm -f $dummy.c $dummy && rmdir $tmpdir
+++$CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && SYSTEM_NAME=`$dummy` &&
+++	{ echo "$SYSTEM_NAME"; exit; }
++ 
++ # Apollos put the system type in the environment.
++ 
++-test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit 0; }
+++test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit; }
++ 
++ # Convex versions that predate uname can use getsysinfo(1)
++ 
++@@ -1297,22 +1434,22 @@
++     case `getsysinfo -f cpu_type` in
++     c1*)
++ 	echo c1-convex-bsd
++-	exit 0 ;;
+++	exit ;;
++     c2*)
++ 	if getsysinfo -f scalar_acc
++ 	then echo c32-convex-bsd
++ 	else echo c2-convex-bsd
++ 	fi
++-	exit 0 ;;
+++	exit ;;
++     c34*)
++ 	echo c34-convex-bsd
++-	exit 0 ;;
+++	exit ;;
++     c38*)
++ 	echo c38-convex-bsd
++-	exit 0 ;;
+++	exit ;;
++     c4*)
++ 	echo c4-convex-bsd
++-	exit 0 ;;
+++	exit ;;
++     esac
++ fi
++ 
++@@ -1323,7 +1460,9 @@
++ the operating system you are using. It is advised that you
++ download the most up to date version of the config scripts from
++ 
++-    ftp://ftp.gnu.org/pub/gnu/config/
+++  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
+++and
+++  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD
++ 
++ If the version you run ($0) is already up to date, please
++ send the following data and any information you think might be
++--- misc/libtextcat-2.2/config.sub	2010-04-15 09:20:04.000000000 +0000
+++++ misc/build/libtextcat-2.2/config.sub	2010-04-15 09:20:41.000000000 +0000
++@@ -1,9 +1,10 @@
++ #! /bin/sh
++ # Configuration validation subroutine script.
++ #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
++-#   2000, 2001, 2002 Free Software Foundation, Inc.
+++#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010
+++#   Free Software Foundation, Inc.
++ 
++-timestamp='2002-09-05'
+++timestamp='2010-01-22'
++ 
++ # This file is (in principle) common to ALL GNU software.
++ # The presence of a machine in this file suggests that SOME GNU software
++@@ -21,22 +22,26 @@
++ #
++ # You should have received a copy of the GNU General Public License
++ # along with this program; if not, write to the Free Software
++-# Foundation, Inc., 59 Temple Place - Suite 330,
++-# Boston, MA 02111-1307, USA.
++-
+++# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
+++# 02110-1301, USA.
+++#
++ # As a special exception to the GNU General Public License, if you
++ # distribute this file as part of a program that contains a
++ # configuration script generated by Autoconf, you may include it under
++ # the same distribution terms that you use for the rest of that program.
++ 
+++
++ # Please send patches to <config-patches@gnu.org>.  Submit a context
++-# diff and a properly formatted ChangeLog entry.
+++# diff and a properly formatted GNU ChangeLog entry.
++ #
++ # Configuration subroutine to validate and canonicalize a configuration type.
++ # Supply the specified configuration type as an argument.
++ # If it is invalid, we print an error message on stderr and exit with code 1.
++ # Otherwise, we print the canonical config type on stdout and succeed.
++ 
+++# You can get the latest version of this script from:
+++# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD
+++
++ # This file is supposed to be the same for all GNU packages
++ # and recognize all the CPU types, system types and aliases
++ # that are meaningful with *any* GNU software.
++@@ -70,8 +75,9 @@
++ version="\
++ GNU config.sub ($timestamp)
++ 
++-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
++-Free Software Foundation, Inc.
+++Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
+++2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free
+++Software Foundation, Inc.
++ 
++ This is free software; see the source for copying conditions.  There is NO
++ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
++@@ -83,11 +89,11 @@
++ while test $# -gt 0 ; do
++   case $1 in
++     --time-stamp | --time* | -t )
++-       echo "$timestamp" ; exit 0 ;;
+++       echo "$timestamp" ; exit ;;
++     --version | -v )
++-       echo "$version" ; exit 0 ;;
+++       echo "$version" ; exit ;;
++     --help | --h* | -h )
++-       echo "$usage"; exit 0 ;;
+++       echo "$usage"; exit ;;
++     -- )     # Stop option processing
++        shift; break ;;
++     - )	# Use stdin as input.
++@@ -99,7 +105,7 @@
++     *local*)
++        # First pass through any local machine types.
++        echo $1
++-       exit 0;;
+++       exit ;;
++ 
++     * )
++        break ;;
++@@ -118,7 +124,10 @@
++ # Here we must recognize all the valid KERNEL-OS combinations.
++ maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
++ case $maybe_os in
++-  nto-qnx* | linux-gnu* | freebsd*-gnu* | storm-chaos* | os2-emx* | windows32-* | rtmk-nova*)
+++  nto-qnx* | linux-gnu* | linux-dietlibc | linux-newlib* | linux-uclibc* | \
+++  uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* | \
+++  kopensolaris*-gnu* | \
+++  storm-chaos* | os2-emx* | rtmk-nova*)
++     os=-$maybe_os
++     basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
++     ;;
++@@ -144,10 +153,13 @@
++ 	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
++ 	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
++ 	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
++-	-apple | -axis)
+++	-apple | -axis | -knuth | -cray | -microblaze)
++ 		os=
++ 		basic_machine=$1
++ 		;;
+++        -bluegene*)
+++	        os=-cnk
+++		;;
++ 	-sim | -cisco | -oki | -wec | -winbond)
++ 		os=
++ 		basic_machine=$1
++@@ -169,6 +181,10 @@
++ 	-hiux*)
++ 		os=-hiuxwe2
++ 		;;
+++	-sco6)
+++		os=-sco5v6
+++		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+++		;;
++ 	-sco5)
++ 		os=-sco3.2v5
++ 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++@@ -185,6 +201,10 @@
++ 		# Don't forget version if it is 3.2v4 or newer.
++ 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++ 		;;
+++	-sco5v6*)
+++		# Don't forget version if it is 3.2v4 or newer.
+++		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+++		;;
++ 	-sco*)
++ 		os=-sco3.2v2
++ 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++@@ -228,51 +248,71 @@
++ 	| a29k \
++ 	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
++ 	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
++-	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr \
++-	| clipper \
+++	| am33_2.0 \
+++	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr | avr32 \
+++	| bfin \
+++	| c4x | clipper \
++ 	| d10v | d30v | dlx | dsp16xx \
++-	| fr30 | frv \
+++	| fido | fr30 | frv \
++ 	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
++ 	| i370 | i860 | i960 | ia64 \
++-	| ip2k \
++-	| m32r | m68000 | m68k | m88k | mcore \
+++	| ip2k | iq2000 \
+++	| lm32 \
+++	| m32c | m32r | m32rle | m68000 | m68k | m88k \
+++	| maxq | mb | microblaze | mcore | mep | metag \
++ 	| mips | mipsbe | mipseb | mipsel | mipsle \
++ 	| mips16 \
++ 	| mips64 | mips64el \
++-	| mips64vr | mips64vrel \
+++	| mips64octeon | mips64octeonel \
++ 	| mips64orion | mips64orionel \
+++	| mips64r5900 | mips64r5900el \
+++	| mips64vr | mips64vrel \
++ 	| mips64vr4100 | mips64vr4100el \
++ 	| mips64vr4300 | mips64vr4300el \
++ 	| mips64vr5000 | mips64vr5000el \
+++	| mips64vr5900 | mips64vr5900el \
++ 	| mipsisa32 | mipsisa32el \
+++	| mipsisa32r2 | mipsisa32r2el \
++ 	| mipsisa64 | mipsisa64el \
+++	| mipsisa64r2 | mipsisa64r2el \
++ 	| mipsisa64sb1 | mipsisa64sb1el \
++ 	| mipsisa64sr71k | mipsisa64sr71kel \
++ 	| mipstx39 | mipstx39el \
++ 	| mn10200 | mn10300 \
+++	| moxie \
+++	| mt \
+++	| msp430 \
+++	| nios | nios2 \
++ 	| ns16k | ns32k \
++-	| openrisc | or32 \
+++	| or32 \
++ 	| pdp10 | pdp11 | pj | pjl \
++ 	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
++ 	| pyramid \
++-	| sh | sh[1234] | sh3e | sh[34]eb | shbe | shle | sh[1234]le | sh3ele \
+++	| rx \
+++	| score \
+++	| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[34]eb | sheb | shbe | shle | sh[1234]le | sh3ele \
++ 	| sh64 | sh64le \
++-	| sparc | sparc64 | sparc86x | sparclet | sparclite | sparcv9 | sparcv9b \
++-	| strongarm \
++-	| tahoe | thumb | tic80 | tron \
+++	| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet | sparclite \
+++	| sparcv8 | sparcv9 | sparcv9b | sparcv9v \
+++	| spu | strongarm \
+++	| tahoe | thumb | tic4x | tic80 | tron \
+++	| ubicom32 \
++ 	| v850 | v850e \
++ 	| we32k \
++-	| x86 | xscale | xstormy16 | xtensa \
++-	| z8k)
+++	| x86 | xc16x | xscale | xscalee[bl] | xstormy16 | xtensa \
+++	| z8k | z80)
++ 		basic_machine=$basic_machine-unknown
++ 		;;
++-	m6811 | m68hc11 | m6812 | m68hc12)
+++	m6811 | m68hc11 | m6812 | m68hc12 | picochip)
++ 		# Motorola 68HC11/12.
++ 		basic_machine=$basic_machine-unknown
++ 		os=-none
++ 		;;
++ 	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
++ 		;;
+++	ms1)
+++		basic_machine=mt-unknown
+++		;;
++ 
++ 	# We use `pc' rather than `unknown'
++ 	# because (1) that's what they normally are, and
++@@ -292,50 +332,69 @@
++ 	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
++ 	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \
++ 	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
++-	| avr-* \
++-	| bs2000-* \
++-	| c[123]* | c30-* | [cjt]90-* | c4x-* | c54x-* \
++-	| clipper-* | cydra-* \
+++	| avr-* | avr32-* \
+++	| bfin-* | bs2000-* \
+++	| c[123]* | c30-* | [cjt]90-* | c4x-* | c54x-* | c55x-* | c6x-* \
+++	| clipper-* | craynv-* | cydra-* \
++ 	| d10v-* | d30v-* | dlx-* \
++ 	| elxsi-* \
++-	| f30[01]-* | f700-* | fr30-* | frv-* | fx80-* \
+++	| f30[01]-* | f700-* | fido-* | fr30-* | frv-* | fx80-* \
++ 	| h8300-* | h8500-* \
++ 	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
++ 	| i*86-* | i860-* | i960-* | ia64-* \
++-	| ip2k-* \
++-	| m32r-* \
+++	| ip2k-* | iq2000-* \
+++	| lm32-* \
+++	| m32c-* | m32r-* | m32rle-* \
++ 	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
++-	| m88110-* | m88k-* | mcore-* \
+++	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* | microblaze-* \
++ 	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
++ 	| mips16-* \
++ 	| mips64-* | mips64el-* \
++-	| mips64vr-* | mips64vrel-* \
+++	| mips64octeon-* | mips64octeonel-* \
++ 	| mips64orion-* | mips64orionel-* \
+++	| mips64r5900-* | mips64r5900el-* \
+++	| mips64vr-* | mips64vrel-* \
++ 	| mips64vr4100-* | mips64vr4100el-* \
++ 	| mips64vr4300-* | mips64vr4300el-* \
++ 	| mips64vr5000-* | mips64vr5000el-* \
+++	| mips64vr5900-* | mips64vr5900el-* \
++ 	| mipsisa32-* | mipsisa32el-* \
+++	| mipsisa32r2-* | mipsisa32r2el-* \
++ 	| mipsisa64-* | mipsisa64el-* \
+++	| mipsisa64r2-* | mipsisa64r2el-* \
++ 	| mipsisa64sb1-* | mipsisa64sb1el-* \
++ 	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
++-	| mipstx39 | mipstx39el \
+++	| mipstx39-* | mipstx39el-* \
+++	| mmix-* \
+++	| mt-* \
+++	| msp430-* \
+++	| nios-* | nios2-* \
++ 	| none-* | np1-* | ns16k-* | ns32k-* \
++ 	| orion-* \
++ 	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
++ 	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
++ 	| pyramid-* \
++-	| romp-* | rs6000-* \
++-	| sh-* | sh[1234]-* | sh3e-* | sh[34]eb-* | shbe-* \
+++	| romp-* | rs6000-* | rx-* \
+++	| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \
++ 	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
++-	| sparc-* | sparc64-* | sparc86x-* | sparclet-* | sparclite-* \
++-	| sparcv9-* | sparcv9b-* | strongarm-* | sv1-* | sx?-* \
++-	| tahoe-* | thumb-* | tic30-* | tic4x-* | tic54x-* | tic80-* | tron-* \
+++	| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \
+++	| sparclite-* \
+++	| sparcv8-* | sparcv9-* | sparcv9b-* | sparcv9v-* | strongarm-* | sv1-* | sx?-* \
+++	| tahoe-* | thumb-* \
+++	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
+++	| tile-* | tilegx-* \
+++	| tron-* \
+++	| ubicom32-* \
++ 	| v850-* | v850e-* | vax-* \
++ 	| we32k-* \
++-	| x86-* | x86_64-* | xps100-* | xscale-* | xstormy16-* \
++-	| xtensa-* \
+++	| x86-* | x86_64-* | xc16x-* | xps100-* | xscale-* | xscalee[bl]-* \
+++	| xstormy16-* | xtensa*-* \
++ 	| ymp-* \
++-	| z8k-*)
+++	| z8k-* | z80-*)
+++		;;
+++	# Recognize the basic CPU types without company name, with glob match.
+++	xtensa*)
+++		basic_machine=$basic_machine-unknown
++ 		;;
++ 	# Recognize the various machine names and aliases which stand
++ 	# for a CPU type and a company and sometimes even an OS.
++@@ -353,6 +412,9 @@
++ 		basic_machine=a29k-amd
++ 		os=-udi
++ 		;;
+++    	abacus)
+++		basic_machine=abacus-unknown
+++		;;
++ 	adobe68k)
++ 		basic_machine=m68010-adobe
++ 		os=-scout
++@@ -367,6 +429,12 @@
++ 		basic_machine=a29k-none
++ 		os=-bsd
++ 		;;
+++	amd64)
+++		basic_machine=x86_64-pc
+++		;;
+++	amd64-*)
+++		basic_machine=x86_64-`echo $basic_machine | sed 's/^[^-]*-//'`
+++		;;
++ 	amdahl)
++ 		basic_machine=580-amdahl
++ 		os=-sysv
++@@ -390,6 +458,10 @@
++ 		basic_machine=m68k-apollo
++ 		os=-bsd
++ 		;;
+++	aros)
+++		basic_machine=i386-pc
+++		os=-aros
+++		;;
++ 	aux)
++ 		basic_machine=m68k-apple
++ 		os=-aux
++@@ -398,10 +470,26 @@
++ 		basic_machine=ns32k-sequent
++ 		os=-dynix
++ 		;;
+++	blackfin)
+++		basic_machine=bfin-unknown
+++		os=-linux
+++		;;
+++	blackfin-*)
+++		basic_machine=bfin-`echo $basic_machine | sed 's/^[^-]*-//'`
+++		os=-linux
+++		;;
+++	bluegene*)
+++		basic_machine=powerpc-ibm
+++		os=-cnk
+++		;;
++ 	c90)
++ 		basic_machine=c90-cray
++ 		os=-unicos
++ 		;;
+++        cegcc)
+++		basic_machine=arm-unknown
+++		os=-cegcc
+++		;;
++ 	convex-c1)
++ 		basic_machine=c1-convex
++ 		os=-bsd
++@@ -426,12 +514,27 @@
++ 		basic_machine=j90-cray
++ 		os=-unicos
++ 		;;
+++	craynv)
+++		basic_machine=craynv-cray
+++		os=-unicosmp
+++		;;
+++	cr16)
+++		basic_machine=cr16-unknown
+++		os=-elf
+++		;;
++ 	crds | unos)
++ 		basic_machine=m68k-crds
++ 		;;
+++	crisv32 | crisv32-* | etraxfs*)
+++		basic_machine=crisv32-axis
+++		;;
++ 	cris | cris-* | etrax*)
++ 		basic_machine=cris-axis
++ 		;;
+++	crx)
+++		basic_machine=crx-unknown
+++		os=-elf
+++		;;
++ 	da30 | da30-*)
++ 		basic_machine=m68k-da30
++ 		;;
++@@ -454,6 +557,14 @@
++ 		basic_machine=m88k-motorola
++ 		os=-sysv3
++ 		;;
+++	dicos)
+++		basic_machine=i686-pc
+++		os=-dicos
+++		;;
+++	djgpp)
+++		basic_machine=i586-pc
+++		os=-msdosdjgpp
+++		;;
++ 	dpx20 | dpx20-*)
++ 		basic_machine=rs6000-bull
++ 		os=-bosx
++@@ -604,6 +715,14 @@
++ 		basic_machine=m68k-isi
++ 		os=-sysv
++ 		;;
+++	m68knommu)
+++		basic_machine=m68k-unknown
+++		os=-linux
+++		;;
+++	m68knommu-*)
+++		basic_machine=m68k-`echo $basic_machine | sed 's/^[^-]*-//'`
+++		os=-linux
+++		;;
++ 	m88k-omron*)
++ 		basic_machine=m88k-omron
++ 		;;
++@@ -615,10 +734,17 @@
++ 		basic_machine=ns32k-utek
++ 		os=-sysv
++ 		;;
+++        microblaze)
+++		basic_machine=microblaze-xilinx
+++		;;
++ 	mingw32)
++ 		basic_machine=i386-pc
++ 		os=-mingw32
++ 		;;
+++	mingw32ce)
+++		basic_machine=arm-unknown
+++		os=-mingw32ce
+++		;;
++ 	miniframe)
++ 		basic_machine=m68000-convergent
++ 		;;
++@@ -632,10 +758,6 @@
++ 	mips3*)
++ 		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`-unknown
++ 		;;
++-	mmix*)
++-		basic_machine=mmix-knuth
++-		os=-mmixware
++-		;;
++ 	monitor)
++ 		basic_machine=m68k-rom68k
++ 		os=-coff
++@@ -648,6 +770,9 @@
++ 		basic_machine=i386-pc
++ 		os=-msdos
++ 		;;
+++	ms1-*)
+++		basic_machine=`echo $basic_machine | sed -e 's/ms1-/mt-/'`
+++		;;
++ 	mvs)
++ 		basic_machine=i370-ibm
++ 		os=-mvs
++@@ -723,9 +848,12 @@
++ 		basic_machine=hppa1.1-oki
++ 		os=-proelf
++ 		;;
++-	or32 | or32-*)
+++	openrisc | openrisc-*)
++ 		basic_machine=or32-unknown
++-		os=-coff
+++		;;
+++	os400)
+++		basic_machine=powerpc-ibm
+++		os=-os400
++ 		;;
++ 	OSE68000 | ose68000)
++ 		basic_machine=m68000-ericsson
++@@ -743,6 +871,14 @@
++ 		basic_machine=i860-intel
++ 		os=-osf
++ 		;;
+++	parisc)
+++		basic_machine=hppa-unknown
+++		os=-linux
+++		;;
+++	parisc-*)
+++		basic_machine=hppa-`echo $basic_machine | sed 's/^[^-]*-//'`
+++		os=-linux
+++		;;
++ 	pbd)
++ 		basic_machine=sparc-tti
++ 		;;
++@@ -752,24 +888,36 @@
++ 	pc532 | pc532-*)
++ 		basic_machine=ns32k-pc532
++ 		;;
+++	pc98)
+++		basic_machine=i386-pc
+++		;;
+++	pc98-*)
+++		basic_machine=i386-`echo $basic_machine | sed 's/^[^-]*-//'`
+++		;;
++ 	pentium | p5 | k5 | k6 | nexgen | viac3)
++ 		basic_machine=i586-pc
++ 		;;
++ 	pentiumpro | p6 | 6x86 | athlon | athlon_*)
++ 		basic_machine=i686-pc
++ 		;;
++-	pentiumii | pentium2)
+++	pentiumii | pentium2 | pentiumiii | pentium3)
++ 		basic_machine=i686-pc
++ 		;;
+++	pentium4)
+++		basic_machine=i786-pc
+++		;;
++ 	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
++ 		basic_machine=i586-`echo $basic_machine | sed 's/^[^-]*-//'`
++ 		;;
++ 	pentiumpro-* | p6-* | 6x86-* | athlon-*)
++ 		basic_machine=i686-`echo $basic_machine | sed 's/^[^-]*-//'`
++ 		;;
++-	pentiumii-* | pentium2-*)
+++	pentiumii-* | pentium2-* | pentiumiii-* | pentium3-*)
++ 		basic_machine=i686-`echo $basic_machine | sed 's/^[^-]*-//'`
++ 		;;
+++	pentium4-*)
+++		basic_machine=i786-`echo $basic_machine | sed 's/^[^-]*-//'`
+++		;;
++ 	pn)
++ 		basic_machine=pn-gould
++ 		;;
++@@ -802,6 +950,10 @@
++ 		basic_machine=i586-unknown
++ 		os=-pw32
++ 		;;
+++	rdos)
+++		basic_machine=i386-pc
+++		os=-rdos
+++		;;
++ 	rom68k)
++ 		basic_machine=m68k-rom68k
++ 		os=-coff
++@@ -828,6 +980,14 @@
++ 	sb1el)
++ 		basic_machine=mipsisa64sb1el-unknown
++ 		;;
+++	sde)
+++		basic_machine=mipsisa32-sde
+++		os=-elf
+++		;;
+++	sei)
+++		basic_machine=mips-sei
+++		os=-seiux
+++		;;
++ 	sequent)
++ 		basic_machine=i386-sequent
++ 		;;
++@@ -835,6 +995,12 @@
++ 		basic_machine=sh-hitachi
++ 		os=-hms
++ 		;;
+++	sh5el)
+++		basic_machine=sh5le-unknown
+++		;;
+++	sh64)
+++		basic_machine=sh64-unknown
+++		;;
++ 	sparclite-wrs | simso-wrs)
++ 		basic_machine=sparclite-wrs
++ 		os=-vxworks
++@@ -901,10 +1067,6 @@
++ 		basic_machine=i386-sequent
++ 		os=-dynix
++ 		;;
++-	t3d)
++-		basic_machine=alpha-cray
++-		os=-unicos
++-		;;
++ 	t3e)
++ 		basic_machine=alphaev5-cray
++ 		os=-unicos
++@@ -913,14 +1075,27 @@
++ 		basic_machine=t90-cray
++ 		os=-unicos
++ 		;;
++-        tic4x | c4x*)
++-		basic_machine=tic4x-unknown
++-		os=-coff
++-		;;
++ 	tic54x | c54x*)
++ 		basic_machine=tic54x-unknown
++ 		os=-coff
++ 		;;
+++	tic55x | c55x*)
+++		basic_machine=tic55x-unknown
+++		os=-coff
+++		;;
+++	tic6x | c6x*)
+++		basic_machine=tic6x-unknown
+++		os=-coff
+++		;;
+++        # This must be matched before tile*.
+++        tilegx*)
+++		basic_machine=tilegx-unknown
+++		os=-linux-gnu
+++		;;
+++	tile*)
+++		basic_machine=tile-unknown
+++		os=-linux-gnu
+++		;;
++ 	tx39)
++ 		basic_machine=mipstx39-unknown
++ 		;;
++@@ -934,6 +1109,10 @@
++ 	tower | tower-32)
++ 		basic_machine=m68k-ncr
++ 		;;
+++	tpf)
+++		basic_machine=s390x-ibm
+++		os=-tpf
+++		;;
++ 	udi29k)
++ 		basic_machine=a29k-amd
++ 		os=-udi
++@@ -977,9 +1156,9 @@
++ 		basic_machine=hppa1.1-winbond
++ 		os=-proelf
++ 		;;
++-	windows32)
++-		basic_machine=i386-pc
++-		os=-windows32-msvcrt
+++	xbox)
+++		basic_machine=i686-pc
+++		os=-mingw32
++ 		;;
++ 	xps | xps100)
++ 		basic_machine=xps100-honeywell
++@@ -992,6 +1171,10 @@
++ 		basic_machine=z8k-unknown
++ 		os=-sim
++ 		;;
+++	z80-*-coff)
+++		basic_machine=z80-unknown
+++		os=-sim
+++		;;
++ 	none)
++ 		basic_machine=none-none
++ 		os=-none
++@@ -1011,6 +1194,9 @@
++ 	romp)
++ 		basic_machine=romp-ibm
++ 		;;
+++	mmix)
+++		basic_machine=mmix-knuth
+++		;;
++ 	rs6000)
++ 		basic_machine=rs6000-ibm
++ 		;;
++@@ -1027,13 +1213,10 @@
++ 	we32k)
++ 		basic_machine=we32k-att
++ 		;;
++-	sh3 | sh4 | sh3eb | sh4eb | sh[1234]le | sh3ele)
+++	sh[1234] | sh[24]a | sh[24]aeb | sh[34]eb | sh[1234]le | sh[23]ele)
++ 		basic_machine=sh-unknown
++ 		;;
++-	sh64)
++-		basic_machine=sh64-unknown
++-		;;
++-	sparc | sparcv9 | sparcv9b)
+++	sparc | sparcv8 | sparcv9 | sparcv9b | sparcv9v)
++ 		basic_machine=sparc-sun
++ 		;;
++ 	cydra)
++@@ -1080,6 +1263,9 @@
++         # First match some system type aliases
++         # that might get confused with valid system types.
++ 	# -solaris* is a basic system type, with this one exception.
+++        -auroraux)
+++	        os=-auroraux
+++		;;
++ 	-solaris1 | -solaris1.*)
++ 		os=`echo $os | sed -e 's|solaris1|sunos4|'`
++ 		;;
++@@ -1100,24 +1286,30 @@
++ 	# Each alternative MUST END IN A *, to match a version number.
++ 	# -sysv* is not here because it comes later, after sysvr4.
++ 	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
++-	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -sunos | -sunos[34]*\
++-	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -solaris* | -sym* \
+++	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -cnk* | -sunos | -sunos[34]*\
+++	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
+++	      | -sym* | -kopensolaris* \
++ 	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
++-	      | -aos* \
+++	      | -aos* | -aros* \
++ 	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
++ 	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
++-	      | -hiux* | -386bsd* | -netbsd* | -openbsd* | -freebsd* | -riscix* \
++-	      | -lynxos* | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
+++	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
+++	      | -openbsd* | -solidbsd* \
+++	      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \
+++	      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
++ 	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
++ 	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
++-	      | -chorusos* | -chorusrdb* \
+++	      | -chorusos* | -chorusrdb* | -cegcc* \
++ 	      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
++-	      | -mingw32* | -linux-gnu* | -uxpv* | -beos* | -mpeix* | -udk* \
++-	      | -interix* | -uwin* | -rhapsody* | -darwin* | -opened* \
+++	      | -mingw32* | -linux-gnu* | -linux-newlib* | -linux-uclibc* \
+++	      | -uxpv* | -beos* | -mpeix* | -udk* \
+++	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
++ 	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
++ 	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
++ 	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
++-	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* | -powermax*)
+++	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
+++	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
+++	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es*)
++ 	# Remember, each alternative MUST END IN *, to match a version number.
++ 		;;
++ 	-qnx*)
++@@ -1129,16 +1321,21 @@
++ 			;;
++ 		esac
++ 		;;
+++	-nto-qnx*)
+++		;;
++ 	-nto*)
++-		os=-nto-qnx
+++		os=`echo $os | sed -e 's|nto|nto-qnx|'`
++ 		;;
++ 	-sim | -es1800* | -hms* | -xray | -os68k* | -none* | -v88r* \
++-	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* \
+++	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* | -haiku* \
++ 	      | -macos* | -mpw* | -magic* | -mmixware* | -mon960* | -lnews*)
++ 		;;
++ 	-mac*)
++ 		os=`echo $os | sed -e 's|mac|macos|'`
++ 		;;
+++	-linux-dietlibc)
+++		os=-linux-dietlibc
+++		;;
++ 	-linux*)
++ 		os=`echo $os | sed -e 's|linux|linux-gnu|'`
++ 		;;
++@@ -1151,6 +1348,9 @@
++ 	-opened*)
++ 		os=-openedition
++ 		;;
+++        -os400*)
+++		os=-os400
+++		;;
++ 	-wince*)
++ 		os=-wince
++ 		;;
++@@ -1172,6 +1372,9 @@
++ 	-atheos*)
++ 		os=-atheos
++ 		;;
+++	-syllable*)
+++		os=-syllable
+++		;;
++ 	-386bsd)
++ 		os=-bsd
++ 		;;
++@@ -1194,6 +1397,9 @@
++ 	-sinix*)
++ 		os=-sysv4
++ 		;;
+++        -tpf*)
+++		os=-tpf
+++		;;
++ 	-triton*)
++ 		os=-sysv3
++ 		;;
++@@ -1224,6 +1430,20 @@
++ 	-*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
++ 		os=-mint
++ 		;;
+++	-aros*)
+++		os=-aros
+++		;;
+++	-kaos*)
+++		os=-kaos
+++		;;
+++	-zvmoe)
+++		os=-zvmoe
+++		;;
+++	-dicos*)
+++		os=-dicos
+++		;;
+++        -nacl*)
+++	        ;;
++ 	-none)
++ 		;;
++ 	*)
++@@ -1246,6 +1466,12 @@
++ # system, and we'll never get to this point.
++ 
++ case $basic_machine in
+++        score-*)
+++		os=-elf
+++		;;
+++        spu-*)
+++		os=-elf
+++		;;
++ 	*-acorn)
++ 		os=-riscix1.2
++ 		;;
++@@ -1255,6 +1481,9 @@
++ 	arm*-semi)
++ 		os=-aout
++ 		;;
+++        c4x-* | tic4x-*)
+++        	os=-coff
+++		;;
++ 	# This must come before the *-dec entry.
++ 	pdp10-*)
++ 		os=-tops20
++@@ -1280,6 +1509,9 @@
++ 	m68*-cisco)
++ 		os=-aout
++ 		;;
+++        mep-*)
+++		os=-elf
+++		;;
++ 	mips*-cisco)
++ 		os=-elf
++ 		;;
++@@ -1298,9 +1530,15 @@
++ 	*-be)
++ 		os=-beos
++ 		;;
+++	*-haiku)
+++		os=-haiku
+++		;;
++ 	*-ibm)
++ 		os=-aix
++ 		;;
+++    	*-knuth)
+++		os=-mmixware
+++		;;
++ 	*-wec)
++ 		os=-proelf
++ 		;;
++@@ -1403,7 +1641,7 @@
++ 			-sunos*)
++ 				vendor=sun
++ 				;;
++-			-aix*)
+++			-cnk*|-aix*)
++ 				vendor=ibm
++ 				;;
++ 			-beos*)
++@@ -1433,9 +1671,15 @@
++ 			-mvs* | -opened*)
++ 				vendor=ibm
++ 				;;
+++			-os400*)
+++				vendor=ibm
+++				;;
++ 			-ptx*)
++ 				vendor=sequent
++ 				;;
+++			-tpf*)
+++				vendor=ibm
+++				;;
++ 			-vxsim* | -vxworks* | -windiss*)
++ 				vendor=wrs
++ 				;;
++@@ -1460,7 +1704,7 @@
++ esac
++ 
++ echo $basic_machine$os
++-exit 0
+++exit
++ 
++ # Local variables:
++ # eval: (add-hook 'write-file-hooks 'time-stamp)
+diff --git a/libxmlsec/makefile.mk b/libxmlsec/makefile.mk
+--- libxmlsec/makefile.mk
++++ libxmlsec/makefile.mk
+@@ -61,7 +61,8 @@
+    xmlsec1-nssdisablecallbacks.patch \
+    xmlsec1-noverify.patch \
+    xmlsec1-mingw32.patch \
+-   xmlsec1-mingw-keymgr-mscrypto.patch
++   xmlsec1-mingw-keymgr-mscrypto.patch \
++   xmlsec1-update-config-sub-and-guess.patch
+ 
+ 
+ ADDITIONAL_FILES= \
+diff --git a/libxmlsec/xmlsec1-update-config-sub-and-guess.patch b/libxmlsec/xmlsec1-update-config-sub-and-guess.patch
+new file mode 100644
+--- /dev/null
++++ libxmlsec/xmlsec1-update-config-sub-and-guess.patch
+@@ -0,0 +1,2314 @@
++--- misc/xmlsec1-1.2.12/config.guess	2010-04-15 09:29:35.000000000 +0000
+++++ misc/build/xmlsec1-1.2.12/config.guess	2010-04-15 09:29:46.000000000 +0000
++@@ -1,9 +1,10 @@
++ #! /bin/sh
++ # Attempt to guess a canonical system name.
++ #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
++-#   2000, 2001, 2002, 2003 Free Software Foundation, Inc.
+++#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010
+++#   Free Software Foundation, Inc.
++ 
++-timestamp='2003-06-17'
+++timestamp='2009-12-30'
++ 
++ # This file is free software; you can redistribute it and/or modify it
++ # under the terms of the GNU General Public License as published by
++@@ -17,23 +18,25 @@
++ #
++ # You should have received a copy of the GNU General Public License
++ # along with this program; if not, write to the Free Software
++-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+++# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
+++# 02110-1301, USA.
++ #
++ # As a special exception to the GNU General Public License, if you
++ # distribute this file as part of a program that contains a
++ # configuration script generated by Autoconf, you may include it under
++ # the same distribution terms that you use for the rest of that program.
++ 
++-# Originally written by Per Bothner <per@bothner.com>.
++-# Please send patches to <config-patches@gnu.org>.  Submit a context
++-# diff and a properly formatted ChangeLog entry.
+++
+++# Originally written by Per Bothner.  Please send patches (context
+++# diff format) to <config-patches@gnu.org> and include a ChangeLog
+++# entry.
++ #
++ # This script attempts to guess a canonical system name similar to
++ # config.sub.  If it succeeds, it prints the system name on stdout, and
++ # exits with 0.  Otherwise, it exits with 1.
++ #
++-# The plan is that this can be called by configure scripts if you
++-# don't specify an explicit build system type.
+++# You can get the latest version of this script from:
+++# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
++ 
++ me=`echo "$0" | sed -e 's,.*/,,'`
++ 
++@@ -53,8 +56,9 @@
++ GNU config.guess ($timestamp)
++ 
++ Originally written by Per Bothner.
++-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
++-Free Software Foundation, Inc.
+++Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
+++2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free
+++Software Foundation, Inc.
++ 
++ This is free software; see the source for copying conditions.  There is NO
++ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
++@@ -66,11 +70,11 @@
++ while test $# -gt 0 ; do
++   case $1 in
++     --time-stamp | --time* | -t )
++-       echo "$timestamp" ; exit 0 ;;
+++       echo "$timestamp" ; exit ;;
++     --version | -v )
++-       echo "$version" ; exit 0 ;;
+++       echo "$version" ; exit ;;
++     --help | --h* | -h )
++-       echo "$usage"; exit 0 ;;
+++       echo "$usage"; exit ;;
++     -- )     # Stop option processing
++        shift; break ;;
++     - )	# Use stdin as input.
++@@ -104,7 +108,7 @@
++ trap "exitcode=\$?; (rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null) && exit \$exitcode" 0 ;
++ trap "rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null; exit 1" 1 2 13 15 ;
++ : ${TMPDIR=/tmp} ;
++- { tmp=`(umask 077 && mktemp -d -q "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
+++ { tmp=`(umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
++  { test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir $tmp) ; } ||
++  { tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir $tmp) && echo "Warning: creating insecure temp directory" >&2 ; } ||
++  { echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; } ;
++@@ -123,7 +127,7 @@
++ 	;;
++  ,,*)   CC_FOR_BUILD=$CC ;;
++  ,*,*)  CC_FOR_BUILD=$HOST_CC ;;
++-esac ;'
+++esac ; set_cc_for_build= ;'
++ 
++ # This is needed to find uname on a Pyramid OSx when run in the BSD universe.
++ # (ghazi@noc.rutgers.edu 1994-08-24)
++@@ -136,13 +140,6 @@
++ UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
++ UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
++ 
++-## for Red Hat Linux
++-if test -f /etc/redhat-release ; then
++-    VENDOR=redhat ;
++-else
++-    VENDOR= ;
++-fi
++-
++ # Note: order is significant - the case branches are not exclusive.
++ 
++ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
++@@ -165,6 +162,7 @@
++ 	    arm*) machine=arm-unknown ;;
++ 	    sh3el) machine=shl-unknown ;;
++ 	    sh3eb) machine=sh-unknown ;;
+++	    sh5el) machine=sh5le-unknown ;;
++ 	    *) machine=${UNAME_MACHINE_ARCH}-unknown ;;
++ 	esac
++ 	# The Operating System including object format, if it has switched
++@@ -173,7 +171,7 @@
++ 	    arm*|i386|m68k|ns32k|sh3*|sparc|vax)
++ 		eval $set_cc_for_build
++ 		if echo __ELF__ | $CC_FOR_BUILD -E - 2>/dev/null \
++-			| grep __ELF__ >/dev/null
+++			| grep -q __ELF__
++ 		then
++ 		    # Once all utilities can be ECOFF (netbsdecoff) or a.out (netbsdaout).
++ 		    # Return netbsd for either.  FIX?
++@@ -203,50 +201,32 @@
++ 	# contains redundant information, the shorter form:
++ 	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
++ 	echo "${machine}-${os}${release}"
++-	exit 0 ;;
++-    amiga:OpenBSD:*:*)
++-	echo m68k-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    arc:OpenBSD:*:*)
++-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    hp300:OpenBSD:*:*)
++-	echo m68k-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    mac68k:OpenBSD:*:*)
++-	echo m68k-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    macppc:OpenBSD:*:*)
++-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    mvme68k:OpenBSD:*:*)
++-	echo m68k-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    mvme88k:OpenBSD:*:*)
++-	echo m88k-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    mvmeppc:OpenBSD:*:*)
++-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    pmax:OpenBSD:*:*)
++-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    sgi:OpenBSD:*:*)
++-	echo mipseb-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    sun3:OpenBSD:*:*)
++-	echo m68k-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
++-    wgrisc:OpenBSD:*:*)
++-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:OpenBSD:*:*)
++-	echo ${UNAME_MACHINE}-unknown-openbsd${UNAME_RELEASE}
++-	exit 0 ;;
+++	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`
+++	echo ${UNAME_MACHINE_ARCH}-unknown-openbsd${UNAME_RELEASE}
+++	exit ;;
+++    *:ekkoBSD:*:*)
+++	echo ${UNAME_MACHINE}-unknown-ekkobsd${UNAME_RELEASE}
+++	exit ;;
+++    *:SolidBSD:*:*)
+++	echo ${UNAME_MACHINE}-unknown-solidbsd${UNAME_RELEASE}
+++	exit ;;
+++    macppc:MirBSD:*:*)
+++	echo powerpc-unknown-mirbsd${UNAME_RELEASE}
+++	exit ;;
+++    *:MirBSD:*:*)
+++	echo ${UNAME_MACHINE}-unknown-mirbsd${UNAME_RELEASE}
+++	exit ;;
++     alpha:OSF1:*:*)
++-	if test $UNAME_RELEASE = "V4.0"; then
+++	case $UNAME_RELEASE in
+++	*4.0)
++ 		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`
++-	fi
+++		;;
+++	*5.*)
+++	        UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $4}'`
+++		;;
+++	esac
++ 	# According to Compaq, /usr/sbin/psrinfo has been available on
++ 	# OSF/1 and Tru64 systems produced since 1995.  I hope that
++ 	# covers most systems running today.  This code pipes the CPU
++@@ -284,42 +264,49 @@
++ 	    "EV7.9 (21364A)")
++ 		UNAME_MACHINE="alphaev79" ;;
++ 	esac
+++	# A Pn.n version is a patched version.
++ 	# A Vn.n version is a released version.
++ 	# A Tn.n version is a released field test version.
++ 	# A Xn.n version is an unreleased experimental baselevel.
++ 	# 1.2 uses "1.2" for uname -r.
++-	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[VTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
++-	exit 0 ;;
++-    Alpha*:OpenVMS:*:*)
++-	echo alpha-hp-vms
++-	exit 0 ;;
+++	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[PVTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
+++	exit ;;
++     Alpha\ *:Windows_NT*:*)
++ 	# How do we know it's Interix rather than the generic POSIX subsystem?
++ 	# Should we change UNAME_MACHINE based on the output of uname instead
++ 	# of the specific Alpha model?
++ 	echo alpha-pc-interix
++-	exit 0 ;;
+++	exit ;;
++     21064:Windows_NT:50:3)
++ 	echo alpha-dec-winnt3.5
++-	exit 0 ;;
+++	exit ;;
++     Amiga*:UNIX_System_V:4.0:*)
++ 	echo m68k-unknown-sysv4
++-	exit 0;;
+++	exit ;;
++     *:[Aa]miga[Oo][Ss]:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-amigaos
++-	exit 0 ;;
+++	exit ;;
++     *:[Mm]orph[Oo][Ss]:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-morphos
++-	exit 0 ;;
+++	exit ;;
++     *:OS/390:*:*)
++ 	echo i370-ibm-openedition
++-	exit 0 ;;
+++	exit ;;
+++    *:z/VM:*:*)
+++	echo s390-ibm-zvmoe
+++	exit ;;
+++    *:OS400:*:*)
+++        echo powerpc-ibm-os400
+++	exit ;;
++     arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
++ 	echo arm-acorn-riscix${UNAME_RELEASE}
++-	exit 0;;
+++	exit ;;
+++    arm:riscos:*:*|arm:RISCOS:*:*)
+++	echo arm-unknown-riscos
+++	exit ;;
++     SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
++ 	echo hppa1.1-hitachi-hiuxmpp
++-	exit 0;;
+++	exit ;;
++     Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
++ 	# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.
++ 	if test "`(/bin/universe) 2>/dev/null`" = att ; then
++@@ -327,32 +314,51 @@
++ 	else
++ 		echo pyramid-pyramid-bsd
++ 	fi
++-	exit 0 ;;
+++	exit ;;
++     NILE*:*:*:dcosx)
++ 	echo pyramid-pyramid-svr4
++-	exit 0 ;;
+++	exit ;;
++     DRS?6000:unix:4.0:6*)
++ 	echo sparc-icl-nx6
++-	exit 0 ;;
++-    DRS?6000:UNIX_SV:4.2*:7*)
+++	exit ;;
+++    DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)
++ 	case `/usr/bin/uname -p` in
++-	    sparc) echo sparc-icl-nx7 && exit 0 ;;
+++	    sparc) echo sparc-icl-nx7; exit ;;
++ 	esac ;;
+++    s390x:SunOS:*:*)
+++	echo ${UNAME_MACHINE}-ibm-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+++	exit ;;
++     sun4H:SunOS:5.*:*)
++ 	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
++-	exit 0 ;;
+++	exit ;;
++     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
++ 	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
++-	exit 0 ;;
++-    i86pc:SunOS:5.*:*)
++-	echo i386-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
++-	exit 0 ;;
+++	exit ;;
+++    i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
+++	echo i386-pc-auroraux${UNAME_RELEASE}
+++	exit ;;
+++    i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
+++	eval $set_cc_for_build
+++	SUN_ARCH="i386"
+++	# If there is a compiler, see if it is configured for 64-bit objects.
+++	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.
+++	# This test works for both compilers.
+++	if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
+++	    if (echo '#ifdef __amd64'; echo IS_64BIT_ARCH; echo '#endif') | \
+++		(CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
+++		grep IS_64BIT_ARCH >/dev/null
+++	    then
+++		SUN_ARCH="x86_64"
+++	    fi
+++	fi
+++	echo ${SUN_ARCH}-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+++	exit ;;
++     sun4*:SunOS:6*:*)
++ 	# According to config.sub, this is the proper way to canonicalize
++ 	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
++ 	# it's likely to be more like Solaris than SunOS4.
++ 	echo sparc-sun-solaris3`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
++-	exit 0 ;;
+++	exit ;;
++     sun4*:SunOS:*:*)
++ 	case "`/usr/bin/arch -k`" in
++ 	    Series*|S4*)
++@@ -361,10 +367,10 @@
++ 	esac
++ 	# Japanese Language versions have a version number like `4.1.3-JL'.
++ 	echo sparc-sun-sunos`echo ${UNAME_RELEASE}|sed -e 's/-/_/'`
++-	exit 0 ;;
+++	exit ;;
++     sun3*:SunOS:*:*)
++ 	echo m68k-sun-sunos${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     sun*:*:4.2BSD:*)
++ 	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
++ 	test "x${UNAME_RELEASE}" = "x" && UNAME_RELEASE=3
++@@ -376,10 +382,10 @@
++ 		echo sparc-sun-sunos${UNAME_RELEASE}
++ 		;;
++ 	esac
++-	exit 0 ;;
+++	exit ;;
++     aushp:SunOS:*:*)
++ 	echo sparc-auspex-sunos${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     # The situation for MiNT is a little confusing.  The machine name
++     # can be virtually everything (everything which is not
++     # "atarist" or "atariste" at least should have a processor
++@@ -390,37 +396,40 @@
++     # be no problem.
++     atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
++         echo m68k-atari-mint${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
++ 	echo m68k-atari-mint${UNAME_RELEASE}
++-        exit 0 ;;
+++        exit ;;
++     *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
++         echo m68k-atari-mint${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
++         echo m68k-milan-mint${UNAME_RELEASE}
++-        exit 0 ;;
+++        exit ;;
++     hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
++         echo m68k-hades-mint${UNAME_RELEASE}
++-        exit 0 ;;
+++        exit ;;
++     *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
++         echo m68k-unknown-mint${UNAME_RELEASE}
++-        exit 0 ;;
+++        exit ;;
+++    m68k:machten:*:*)
+++	echo m68k-apple-machten${UNAME_RELEASE}
+++	exit ;;
++     powerpc:machten:*:*)
++ 	echo powerpc-apple-machten${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     RISC*:Mach:*:*)
++ 	echo mips-dec-mach_bsd4.3
++-	exit 0 ;;
+++	exit ;;
++     RISC*:ULTRIX:*:*)
++ 	echo mips-dec-ultrix${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     VAX*:ULTRIX*:*:*)
++ 	echo vax-dec-ultrix${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     2020:CLIX:*:* | 2430:CLIX:*:*)
++ 	echo clipper-intergraph-clix${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     mips:*:*:UMIPS | mips:*:*:RISCos)
++ 	eval $set_cc_for_build
++ 	sed 's/^	//' << EOF >$dummy.c
++@@ -444,32 +453,33 @@
++ 	  exit (-1);
++ 	}
++ EOF
++-	$CC_FOR_BUILD -o $dummy $dummy.c \
++-	  && $dummy `echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` \
++-	  && exit 0
+++	$CC_FOR_BUILD -o $dummy $dummy.c &&
+++	  dummyarg=`echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` &&
+++	  SYSTEM_NAME=`$dummy $dummyarg` &&
+++	    { echo "$SYSTEM_NAME"; exit; }
++ 	echo mips-mips-riscos${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     Motorola:PowerMAX_OS:*:*)
++ 	echo powerpc-motorola-powermax
++-	exit 0 ;;
+++	exit ;;
++     Motorola:*:4.3:PL8-*)
++ 	echo powerpc-harris-powermax
++-	exit 0 ;;
+++	exit ;;
++     Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)
++ 	echo powerpc-harris-powermax
++-	exit 0 ;;
+++	exit ;;
++     Night_Hawk:Power_UNIX:*:*)
++ 	echo powerpc-harris-powerunix
++-	exit 0 ;;
+++	exit ;;
++     m88k:CX/UX:7*:*)
++ 	echo m88k-harris-cxux7
++-	exit 0 ;;
+++	exit ;;
++     m88k:*:4*:R4*)
++ 	echo m88k-motorola-sysv4
++-	exit 0 ;;
+++	exit ;;
++     m88k:*:3*:R3*)
++ 	echo m88k-motorola-sysv3
++-	exit 0 ;;
+++	exit ;;
++     AViiON:dgux:*:*)
++         # DG/UX returns AViiON for all architectures
++         UNAME_PROCESSOR=`/usr/bin/uname -p`
++@@ -485,29 +495,29 @@
++ 	else
++ 	    echo i586-dg-dgux${UNAME_RELEASE}
++ 	fi
++- 	exit 0 ;;
+++ 	exit ;;
++     M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
++ 	echo m88k-dolphin-sysv3
++-	exit 0 ;;
+++	exit ;;
++     M88*:*:R3*:*)
++ 	# Delta 88k system running SVR3
++ 	echo m88k-motorola-sysv3
++-	exit 0 ;;
+++	exit ;;
++     XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)
++ 	echo m88k-tektronix-sysv3
++-	exit 0 ;;
+++	exit ;;
++     Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)
++ 	echo m68k-tektronix-bsd
++-	exit 0 ;;
+++	exit ;;
++     *:IRIX*:*:*)
++ 	echo mips-sgi-irix`echo ${UNAME_RELEASE}|sed -e 's/-/_/g'`
++-	exit 0 ;;
+++	exit ;;
++     ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
++-	echo romp-ibm-aix      # uname -m gives an 8 hex-code CPU id
++-	exit 0 ;;              # Note that: echo "'`uname -s`'" gives 'AIX '
+++	echo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id
+++	exit ;;               # Note that: echo "'`uname -s`'" gives 'AIX '
++     i*86:AIX:*:*)
++ 	echo i386-ibm-aix
++-	exit 0 ;;
+++	exit ;;
++     ia64:AIX:*:*)
++ 	if [ -x /usr/bin/oslevel ] ; then
++ 		IBM_REV=`/usr/bin/oslevel`
++@@ -515,7 +525,7 @@
++ 		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
++ 	fi
++ 	echo ${UNAME_MACHINE}-ibm-aix${IBM_REV}
++-	exit 0 ;;
+++	exit ;;
++     *:AIX:2:3)
++ 	if grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then
++ 		eval $set_cc_for_build
++@@ -530,15 +540,19 @@
++ 			exit(0);
++ 			}
++ EOF
++-		$CC_FOR_BUILD -o $dummy $dummy.c && $dummy && exit 0
++-		echo rs6000-ibm-aix3.2.5
+++		if $CC_FOR_BUILD -o $dummy $dummy.c && SYSTEM_NAME=`$dummy`
+++		then
+++			echo "$SYSTEM_NAME"
+++		else
+++			echo rs6000-ibm-aix3.2.5
+++		fi
++ 	elif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then
++ 		echo rs6000-ibm-aix3.2.4
++ 	else
++ 		echo rs6000-ibm-aix3.2
++ 	fi
++-	exit 0 ;;
++-    *:AIX:*:[45])
+++	exit ;;
+++    *:AIX:*:[456])
++ 	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
++ 	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/dev/null 2>&1; then
++ 		IBM_ARCH=rs6000
++@@ -551,28 +565,28 @@
++ 		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
++ 	fi
++ 	echo ${IBM_ARCH}-ibm-aix${IBM_REV}
++-	exit 0 ;;
+++	exit ;;
++     *:AIX:*:*)
++ 	echo rs6000-ibm-aix
++-	exit 0 ;;
+++	exit ;;
++     ibmrt:4.4BSD:*|romp-ibm:BSD:*)
++ 	echo romp-ibm-bsd4.4
++-	exit 0 ;;
+++	exit ;;
++     ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
++ 	echo romp-ibm-bsd${UNAME_RELEASE}   # 4.3 with uname added to
++-	exit 0 ;;                           # report: romp-ibm BSD 4.3
+++	exit ;;                             # report: romp-ibm BSD 4.3
++     *:BOSX:*:*)
++ 	echo rs6000-bull-bosx
++-	exit 0 ;;
+++	exit ;;
++     DPX/2?00:B.O.S.:*:*)
++ 	echo m68k-bull-sysv3
++-	exit 0 ;;
+++	exit ;;
++     9000/[34]??:4.3bsd:1.*:*)
++ 	echo m68k-hp-bsd
++-	exit 0 ;;
+++	exit ;;
++     hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)
++ 	echo m68k-hp-bsd4.4
++-	exit 0 ;;
+++	exit ;;
++     9000/[34678]??:HP-UX:*:*)
++ 	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
++ 	case "${UNAME_MACHINE}" in
++@@ -634,9 +648,19 @@
++ 	esac
++ 	if [ ${HP_ARCH} = "hppa2.0w" ]
++ 	then
++-	    # avoid double evaluation of $set_cc_for_build
++-	    test -n "$CC_FOR_BUILD" || eval $set_cc_for_build
++-	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E -) | grep __LP64__ >/dev/null
+++	    eval $set_cc_for_build
+++
+++	    # hppa2.0w-hp-hpux* has a 64-bit kernel and a compiler generating
+++	    # 32-bit code.  hppa64-hp-hpux* has the same kernel and a compiler
+++	    # generating 64-bit code.  GNU and HP use different nomenclature:
+++	    #
+++	    # $ CC_FOR_BUILD=cc ./config.guess
+++	    # => hppa2.0w-hp-hpux11.23
+++	    # $ CC_FOR_BUILD="cc +DA2.0w" ./config.guess
+++	    # => hppa64-hp-hpux11.23
+++
+++	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) |
+++		grep -q __LP64__
++ 	    then
++ 		HP_ARCH="hppa2.0w"
++ 	    else
++@@ -644,11 +668,11 @@
++ 	    fi
++ 	fi
++ 	echo ${HP_ARCH}-hp-hpux${HPUX_REV}
++-	exit 0 ;;
+++	exit ;;
++     ia64:HP-UX:*:*)
++ 	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
++ 	echo ia64-hp-hpux${HPUX_REV}
++-	exit 0 ;;
+++	exit ;;
++     3050*:HI-UX:*:*)
++ 	eval $set_cc_for_build
++ 	sed 's/^	//' << EOF >$dummy.c
++@@ -676,208 +700,248 @@
++ 	  exit (0);
++ 	}
++ EOF
++-	$CC_FOR_BUILD -o $dummy $dummy.c && $dummy && exit 0
+++	$CC_FOR_BUILD -o $dummy $dummy.c && SYSTEM_NAME=`$dummy` &&
+++		{ echo "$SYSTEM_NAME"; exit; }
++ 	echo unknown-hitachi-hiuxwe2
++-	exit 0 ;;
+++	exit ;;
++     9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:* )
++ 	echo hppa1.1-hp-bsd
++-	exit 0 ;;
+++	exit ;;
++     9000/8??:4.3bsd:*:*)
++ 	echo hppa1.0-hp-bsd
++-	exit 0 ;;
+++	exit ;;
++     *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
++ 	echo hppa1.0-hp-mpeix
++-	exit 0 ;;
+++	exit ;;
++     hp7??:OSF1:*:* | hp8?[79]:OSF1:*:* )
++ 	echo hppa1.1-hp-osf
++-	exit 0 ;;
+++	exit ;;
++     hp8??:OSF1:*:*)
++ 	echo hppa1.0-hp-osf
++-	exit 0 ;;
+++	exit ;;
++     i*86:OSF1:*:*)
++ 	if [ -x /usr/sbin/sysversion ] ; then
++ 	    echo ${UNAME_MACHINE}-unknown-osf1mk
++ 	else
++ 	    echo ${UNAME_MACHINE}-unknown-osf1
++ 	fi
++-	exit 0 ;;
+++	exit ;;
++     parisc*:Lites*:*:*)
++ 	echo hppa1.1-hp-lites
++-	exit 0 ;;
+++	exit ;;
++     C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
++ 	echo c1-convex-bsd
++-        exit 0 ;;
+++        exit ;;
++     C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
++ 	if getsysinfo -f scalar_acc
++ 	then echo c32-convex-bsd
++ 	else echo c2-convex-bsd
++ 	fi
++-        exit 0 ;;
+++        exit ;;
++     C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
++ 	echo c34-convex-bsd
++-        exit 0 ;;
+++        exit ;;
++     C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
++ 	echo c38-convex-bsd
++-        exit 0 ;;
+++        exit ;;
++     C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
++ 	echo c4-convex-bsd
++-        exit 0 ;;
+++        exit ;;
++     CRAY*Y-MP:*:*:*)
++ 	echo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
++-	exit 0 ;;
+++	exit ;;
++     CRAY*[A-Z]90:*:*:*)
++ 	echo ${UNAME_MACHINE}-cray-unicos${UNAME_RELEASE} \
++ 	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
++ 	      -e y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/ \
++ 	      -e 's/\.[^.]*$/.X/'
++-	exit 0 ;;
+++	exit ;;
++     CRAY*TS:*:*:*)
++ 	echo t90-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
++-	exit 0 ;;
+++	exit ;;
++     CRAY*T3E:*:*:*)
++ 	echo alphaev5-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
++-	exit 0 ;;
+++	exit ;;
++     CRAY*SV1:*:*:*)
++ 	echo sv1-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
++-	exit 0 ;;
+++	exit ;;
++     *:UNICOS/mp:*:*)
++-	echo nv1-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/' 
++-	exit 0 ;;
+++	echo craynv-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+++	exit ;;
++     F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
++ 	FUJITSU_PROC=`uname -m | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
++         FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
++         FUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`
++         echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
++-        exit 0 ;;
+++        exit ;;
+++    5000:UNIX_System_V:4.*:*)
+++        FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
+++        FUJITSU_REL=`echo ${UNAME_RELEASE} | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/ /_/'`
+++        echo "sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
+++	exit ;;
++     i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
++ 	echo ${UNAME_MACHINE}-pc-bsdi${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     sparc*:BSD/OS:*:*)
++ 	echo sparc-unknown-bsdi${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:BSD/OS:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
++-	exit 0 ;;
++-    *:FreeBSD:*:*|*:GNU/FreeBSD:*:*)
++-	# Determine whether the default compiler uses glibc.
++-	eval $set_cc_for_build
++-	sed 's/^	//' << EOF >$dummy.c
++-	#include <features.h>
++-	#if __GLIBC__ >= 2
++-	LIBC=gnu
++-	#else
++-	LIBC=
++-	#endif
++-EOF
++-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
++-	echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`${LIBC:+-$LIBC}
++-	exit 0 ;;
+++	exit ;;
+++    *:FreeBSD:*:*)
+++	case ${UNAME_MACHINE} in
+++	    pc98)
+++		echo i386-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
+++	    amd64)
+++		echo x86_64-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
+++	    *)
+++		echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
+++	esac
+++	exit ;;
++     i*:CYGWIN*:*)
++ 	echo ${UNAME_MACHINE}-pc-cygwin
++-	exit 0 ;;
++-    i*:MINGW*:*)
+++	exit ;;
+++    *:MINGW*:*)
++ 	echo ${UNAME_MACHINE}-pc-mingw32
++-	exit 0 ;;
+++	exit ;;
+++    i*:windows32*:*)
+++    	# uname -m includes "-pc" on this system.
+++    	echo ${UNAME_MACHINE}-mingw32
+++	exit ;;
++     i*:PW*:*)
++ 	echo ${UNAME_MACHINE}-pc-pw32
++-	exit 0 ;;
++-    x86:Interix*:[34]*)
++-	echo i586-pc-interix${UNAME_RELEASE}|sed -e 's/\..*//'
++-	exit 0 ;;
+++	exit ;;
+++    *:Interix*:*)
+++    	case ${UNAME_MACHINE} in
+++	    x86)
+++		echo i586-pc-interix${UNAME_RELEASE}
+++		exit ;;
+++	    authenticamd | genuineintel | EM64T)
+++		echo x86_64-unknown-interix${UNAME_RELEASE}
+++		exit ;;
+++	    IA64)
+++		echo ia64-unknown-interix${UNAME_RELEASE}
+++		exit ;;
+++	esac ;;
++     [345]86:Windows_95:* | [345]86:Windows_98:* | [345]86:Windows_NT:*)
++ 	echo i${UNAME_MACHINE}-pc-mks
++-	exit 0 ;;
+++	exit ;;
+++    8664:Windows_NT:*)
+++	echo x86_64-pc-mks
+++	exit ;;
++     i*:Windows_NT*:* | Pentium*:Windows_NT*:*)
++ 	# How do we know it's Interix rather than the generic POSIX subsystem?
++ 	# It also conflicts with pre-2.0 versions of AT&T UWIN. Should we
++ 	# UNAME_MACHINE based on the output of uname instead of i386?
++ 	echo i586-pc-interix
++-	exit 0 ;;
+++	exit ;;
++     i*:UWIN*:*)
++ 	echo ${UNAME_MACHINE}-pc-uwin
++-	exit 0 ;;
+++	exit ;;
+++    amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
+++	echo x86_64-unknown-cygwin
+++	exit ;;
++     p*:CYGWIN*:*)
++ 	echo powerpcle-unknown-cygwin
++-	exit 0 ;;
+++	exit ;;
++     prep*:SunOS:5.*:*)
++ 	echo powerpcle-unknown-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
++-	exit 0 ;;
+++	exit ;;
++     *:GNU:*:*)
+++	# the GNU system
++ 	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
++-	exit 0 ;;
+++	exit ;;
+++    *:GNU/*:*:*)
+++	# other systems with GNU libc and userland
+++	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-gnu
+++	exit ;;
++     i*86:Minix:*:*)
++ 	echo ${UNAME_MACHINE}-pc-minix
++-	exit 0 ;;
+++	exit ;;
+++    alpha:Linux:*:*)
+++	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
+++	  EV5)   UNAME_MACHINE=alphaev5 ;;
+++	  EV56)  UNAME_MACHINE=alphaev56 ;;
+++	  PCA56) UNAME_MACHINE=alphapca56 ;;
+++	  PCA57) UNAME_MACHINE=alphapca56 ;;
+++	  EV6)   UNAME_MACHINE=alphaev6 ;;
+++	  EV67)  UNAME_MACHINE=alphaev67 ;;
+++	  EV68*) UNAME_MACHINE=alphaev68 ;;
+++        esac
+++	objdump --private-headers /bin/sh | grep -q ld.so.1
+++	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
+++	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
+++	exit ;;
++     arm*:Linux:*:*)
+++	eval $set_cc_for_build
+++	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
+++	    | grep -q __ARM_EABI__
+++	then
+++	    echo ${UNAME_MACHINE}-unknown-linux-gnu
+++	else
+++	    echo ${UNAME_MACHINE}-unknown-linux-gnueabi
+++	fi
+++	exit ;;
+++    avr32*:Linux:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-linux-gnu
++-	exit 0 ;;
+++	exit ;;
++     cris:Linux:*:*)
++ 	echo cris-axis-linux-gnu
++-	exit 0 ;;
++-    ia64:Linux:*:*)
++-	echo ${UNAME_MACHINE}-${VENDOR:-unknown}-linux-gnu
++-	exit 0 ;;
++-    m68*:Linux:*:*)
++-	echo ${UNAME_MACHINE}-unknown-linux-gnu
++-	exit 0 ;;
++-    mips:Linux:*:*)
+++	exit ;;
+++    crisv32:Linux:*:*)
+++	echo crisv32-axis-linux-gnu
+++	exit ;;
+++    frv:Linux:*:*)
+++    	echo frv-unknown-linux-gnu
+++	exit ;;
+++    i*86:Linux:*:*)
+++	LIBC=gnu
++ 	eval $set_cc_for_build
++ 	sed 's/^	//' << EOF >$dummy.c
++-	#undef CPU
++-	#undef mips
++-	#undef mipsel
++-	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
++-	CPU=mipsel
++-	#else
++-	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
++-	CPU=mips
++-	#else
++-	CPU=
++-	#endif
+++	#ifdef __dietlibc__
+++	LIBC=dietlibc
++ 	#endif
++ EOF
++-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
++-	test x"${CPU}" != x && echo "${CPU}-unknown-linux-gnu" && exit 0
++-	;;
++-    mips64:Linux:*:*)
+++	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC'`
+++	echo "${UNAME_MACHINE}-pc-linux-${LIBC}"
+++	exit ;;
+++    ia64:Linux:*:*)
+++	echo ${UNAME_MACHINE}-unknown-linux-gnu
+++	exit ;;
+++    m32r*:Linux:*:*)
+++	echo ${UNAME_MACHINE}-unknown-linux-gnu
+++	exit ;;
+++    m68*:Linux:*:*)
+++	echo ${UNAME_MACHINE}-unknown-linux-gnu
+++	exit ;;
+++    mips:Linux:*:* | mips64:Linux:*:*)
++ 	eval $set_cc_for_build
++ 	sed 's/^	//' << EOF >$dummy.c
++ 	#undef CPU
++-	#undef mips64
++-	#undef mips64el
+++	#undef ${UNAME_MACHINE}
+++	#undef ${UNAME_MACHINE}el
++ 	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
++-	CPU=mips64el
+++	CPU=${UNAME_MACHINE}el
++ 	#else
++ 	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
++-	CPU=mips64
+++	CPU=${UNAME_MACHINE}
++ 	#else
++ 	CPU=
++ 	#endif
++ 	#endif
++ EOF
++-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
++-	test x"${CPU}" != x && echo "${CPU}-unknown-linux-gnu" && exit 0
+++	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^CPU'`
+++	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
++ 	;;
++-    ppc:Linux:*:*)
++-	echo powerpc-${VENDOR:-unknown}-linux-gnu
++-	exit 0 ;;
++-    ppc64:Linux:*:*)
++-	echo powerpc64-${VENDOR:-unknown}-linux-gnu
++-	exit 0 ;;
++-    alpha:Linux:*:*)
++-	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
++-	  EV5)   UNAME_MACHINE=alphaev5 ;;
++-	  EV56)  UNAME_MACHINE=alphaev56 ;;
++-	  PCA56) UNAME_MACHINE=alphapca56 ;;
++-	  PCA57) UNAME_MACHINE=alphapca56 ;;
++-	  EV6)   UNAME_MACHINE=alphaev6 ;;
++-	  EV67)  UNAME_MACHINE=alphaev67 ;;
++-	  EV68*) UNAME_MACHINE=alphaev68 ;;
++-        esac
++-	objdump --private-headers /bin/sh | grep ld.so.1 >/dev/null
++-	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
++-	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
++-	exit 0 ;;
+++    or32:Linux:*:*)
+++	echo or32-unknown-linux-gnu
+++	exit ;;
+++    padre:Linux:*:*)
+++	echo sparc-unknown-linux-gnu
+++	exit ;;
+++    parisc64:Linux:*:* | hppa64:Linux:*:*)
+++	echo hppa64-unknown-linux-gnu
+++	exit ;;
++     parisc:Linux:*:* | hppa:Linux:*:*)
++ 	# Look for CPU level
++ 	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
++@@ -885,84 +949,40 @@
++ 	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
++ 	  *)    echo hppa-unknown-linux-gnu ;;
++ 	esac
++-	exit 0 ;;
++-    parisc64:Linux:*:* | hppa64:Linux:*:*)
++-	echo hppa64-unknown-linux-gnu
++-	exit 0 ;;
+++	exit ;;
+++    ppc64:Linux:*:*)
+++	echo powerpc64-unknown-linux-gnu
+++	exit ;;
+++    ppc:Linux:*:*)
+++	echo powerpc-unknown-linux-gnu
+++	exit ;;
++     s390:Linux:*:* | s390x:Linux:*:*)
++-	echo ${UNAME_MACHINE}-${VENDOR:-ibm}-linux-gnu
++-	exit 0 ;;
+++	echo ${UNAME_MACHINE}-ibm-linux
+++	exit ;;
++     sh64*:Linux:*:*)
++     	echo ${UNAME_MACHINE}-unknown-linux-gnu
++-	exit 0 ;;
+++	exit ;;
++     sh*:Linux:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-linux-gnu
++-	exit 0 ;;
+++	exit ;;
++     sparc:Linux:*:* | sparc64:Linux:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-linux-gnu
++-	exit 0 ;;
+++	exit ;;
+++    vax:Linux:*:*)
+++	echo ${UNAME_MACHINE}-dec-linux-gnu
+++	exit ;;
++     x86_64:Linux:*:*)
++-	echo x86_64-${VENDOR:-unknown}-linux-gnu
++-	exit 0 ;;
++-    i*86:Linux:*:*)
++-	# The BFD linker knows what the default object file format is, so
++-	# first see if it will tell us. cd to the root directory to prevent
++-	# problems with other programs or directories called `ld' in the path.
++-	# Set LC_ALL=C to ensure ld outputs messages in English.
++-	ld_supported_targets=`cd /; LC_ALL=C ld --help 2>&1 \
++-			 | sed -ne '/supported targets:/!d
++-				    s/[ 	][ 	]*/ /g
++-				    s/.*supported targets: *//
++-				    s/ .*//
++-				    p'`
++-        case "$ld_supported_targets" in
++-	  elf32-i386)
++-		TENTATIVE="${UNAME_MACHINE}-pc-linux-gnu"
++-		;;
++-	  a.out-i386-linux)
++-		echo "${UNAME_MACHINE}-pc-linux-gnuaout"
++-		exit 0 ;;
++-	  coff-i386)
++-		echo "${UNAME_MACHINE}-pc-linux-gnucoff"
++-		exit 0 ;;
++-	  "")
++-		# Either a pre-BFD a.out linker (linux-gnuoldld) or
++-		# one that does not give us useful --help.
++-		echo "${UNAME_MACHINE}-pc-linux-gnuoldld"
++-		exit 0 ;;
++-	esac
++-	# Determine whether the default compiler is a.out or elf
++-	eval $set_cc_for_build
++-	sed 's/^	//' << EOF >$dummy.c
++-	#include <features.h>
++-	#ifdef __ELF__
++-	# ifdef __GLIBC__
++-	#  if __GLIBC__ >= 2
++-	LIBC=gnu
++-	#  else
++-	LIBC=gnulibc1
++-	#  endif
++-	# else
++-	LIBC=gnulibc1
++-	# endif
++-	#else
++-	#ifdef __INTEL_COMPILER
++-	LIBC=gnu
++-	#else
++-	LIBC=gnuaout
++-	#endif
++-	#endif
++-EOF
++-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
++-	test x"${LIBC}" != x && echo "${UNAME_MACHINE}-${VENDOR:-pc}-linux-${LIBC}" && exit 0
++-	test x"${TENTATIVE}" != x && echo "${TENTATIVE}" && exit 0
++-	;;
+++	echo x86_64-unknown-linux-gnu
+++	exit ;;
+++    xtensa*:Linux:*:*)
+++    	echo ${UNAME_MACHINE}-unknown-linux-gnu
+++	exit ;;
++     i*86:DYNIX/ptx:4*:*)
++ 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
++ 	# earlier versions are messed up and put the nodename in both
++ 	# sysname and nodename.
++ 	echo i386-sequent-sysv4
++-	exit 0 ;;
+++	exit ;;
++     i*86:UNIX_SV:4.2MP:2.*)
++         # Unixware is an offshoot of SVR4, but it has its own version
++         # number series starting with 2...
++@@ -970,24 +990,27 @@
++ 	# I just have to hope.  -- rms.
++         # Use sysv4.2uw... so that sysv4* matches it.
++ 	echo ${UNAME_MACHINE}-pc-sysv4.2uw${UNAME_VERSION}
++-	exit 0 ;;
+++	exit ;;
++     i*86:OS/2:*:*)
++ 	# If we were able to find `uname', then EMX Unix compatibility
++ 	# is probably installed.
++ 	echo ${UNAME_MACHINE}-pc-os2-emx
++-	exit 0 ;;
+++	exit ;;
++     i*86:XTS-300:*:STOP)
++ 	echo ${UNAME_MACHINE}-unknown-stop
++-	exit 0 ;;
+++	exit ;;
++     i*86:atheos:*:*)
++ 	echo ${UNAME_MACHINE}-unknown-atheos
++-	exit 0 ;;
++-    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.0*:*)
+++	exit ;;
+++    i*86:syllable:*:*)
+++	echo ${UNAME_MACHINE}-pc-syllable
+++	exit ;;
+++    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.[02]*:*)
++ 	echo i386-unknown-lynxos${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     i*86:*DOS:*:*)
++ 	echo ${UNAME_MACHINE}-pc-msdosdjgpp
++-	exit 0 ;;
+++	exit ;;
++     i*86:*:4.*:* | i*86:SYSTEM_V:4.*:*)
++ 	UNAME_REL=`echo ${UNAME_RELEASE} | sed 's/\/MP$//'`
++ 	if grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then
++@@ -995,15 +1018,16 @@
++ 	else
++ 		echo ${UNAME_MACHINE}-pc-sysv${UNAME_REL}
++ 	fi
++-	exit 0 ;;
++-    i*86:*:5:[78]*)
+++	exit ;;
+++    i*86:*:5:[678]*)
+++    	# UnixWare 7.x, OpenUNIX and OpenServer 6.
++ 	case `/bin/uname -X | grep "^Machine"` in
++ 	    *486*)	     UNAME_MACHINE=i486 ;;
++ 	    *Pentium)	     UNAME_MACHINE=i586 ;;
++ 	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
++ 	esac
++ 	echo ${UNAME_MACHINE}-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
++-	exit 0 ;;
+++	exit ;;
++     i*86:*:3.2:*)
++ 	if test -f /usr/options/cb.name; then
++ 		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
++@@ -1021,73 +1045,86 @@
++ 	else
++ 		echo ${UNAME_MACHINE}-pc-sysv32
++ 	fi
++-	exit 0 ;;
+++	exit ;;
++     pc:*:*:*)
++ 	# Left here for compatibility:
++         # uname -m prints for DJGPP always 'pc', but it prints nothing about
++-        # the processor, so we play safe by assuming i386.
++-	echo i386-pc-msdosdjgpp
++-        exit 0 ;;
+++        # the processor, so we play safe by assuming i586.
+++	# Note: whatever this is, it MUST be the same as what config.sub
+++	# prints for the "djgpp" host, or else GDB configury will decide that
+++	# this is a cross-build.
+++	echo i586-pc-msdosdjgpp
+++        exit ;;
++     Intel:Mach:3*:*)
++ 	echo i386-pc-mach3
++-	exit 0 ;;
+++	exit ;;
++     paragon:*:*:*)
++ 	echo i860-intel-osf1
++-	exit 0 ;;
+++	exit ;;
++     i860:*:4.*:*) # i860-SVR4
++ 	if grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then
++ 	  echo i860-stardent-sysv${UNAME_RELEASE} # Stardent Vistra i860-SVR4
++ 	else # Add other i860-SVR4 vendors below as they are discovered.
++ 	  echo i860-unknown-sysv${UNAME_RELEASE}  # Unknown i860-SVR4
++ 	fi
++-	exit 0 ;;
+++	exit ;;
++     mini*:CTIX:SYS*5:*)
++ 	# "miniframe"
++ 	echo m68010-convergent-sysv
++-	exit 0 ;;
+++	exit ;;
++     mc68k:UNIX:SYSTEM5:3.51m)
++ 	echo m68k-convergent-sysv
++-	exit 0 ;;
+++	exit ;;
++     M680?0:D-NIX:5.3:*)
++ 	echo m68k-diab-dnix
++-	exit 0 ;;
++-    M68*:*:R3V[567]*:*)
++-	test -r /sysV68 && echo 'm68k-motorola-sysv' && exit 0 ;;
++-    3[34]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0)
+++	exit ;;
+++    M68*:*:R3V[5678]*:*)
+++	test -r /sysV68 && { echo 'm68k-motorola-sysv'; exit; } ;;
+++    3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)
++ 	OS_REL=''
++ 	test -r /etc/.relid \
++ 	&& OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
++ 	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
++-	  && echo i486-ncr-sysv4.3${OS_REL} && exit 0
+++	  && { echo i486-ncr-sysv4.3${OS_REL}; exit; }
++ 	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
++-	  && echo i586-ncr-sysv4.3${OS_REL} && exit 0 ;;
+++	  && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
++     3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
++         /bin/uname -p 2>/dev/null | grep 86 >/dev/null \
++-          && echo i486-ncr-sysv4 && exit 0 ;;
+++          && { echo i486-ncr-sysv4; exit; } ;;
+++    NCR*:*:4.2:* | MPRAS*:*:4.2:*)
+++	OS_REL='.3'
+++	test -r /etc/.relid \
+++	    && OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
+++	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+++	    && { echo i486-ncr-sysv4.3${OS_REL}; exit; }
+++	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
+++	    && { echo i586-ncr-sysv4.3${OS_REL}; exit; }
+++	/bin/uname -p 2>/dev/null | /bin/grep pteron >/dev/null \
+++	    && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
++     m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
++ 	echo m68k-unknown-lynxos${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     mc68030:UNIX_System_V:4.*:*)
++ 	echo m68k-atari-sysv4
++-	exit 0 ;;
+++	exit ;;
++     TSUNAMI:LynxOS:2.*:*)
++ 	echo sparc-unknown-lynxos${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     rs6000:LynxOS:2.*:*)
++ 	echo rs6000-unknown-lynxos${UNAME_RELEASE}
++-	exit 0 ;;
++-    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.0*:*)
+++	exit ;;
+++    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.[02]*:*)
++ 	echo powerpc-unknown-lynxos${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     SM[BE]S:UNIX_SV:*:*)
++ 	echo mips-dde-sysv${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     RM*:ReliantUNIX-*:*:*)
++ 	echo mips-sni-sysv4
++-	exit 0 ;;
+++	exit ;;
++     RM*:SINIX-*:*:*)
++ 	echo mips-sni-sysv4
++-	exit 0 ;;
+++	exit ;;
++     *:SINIX-*:*:*)
++ 	if uname -p 2>/dev/null >/dev/null ; then
++ 		UNAME_MACHINE=`(uname -p) 2>/dev/null`
++@@ -1095,68 +1132,94 @@
++ 	else
++ 		echo ns32k-sni-sysv
++ 	fi
++-	exit 0 ;;
+++	exit ;;
++     PENTIUM:*:4.0*:*) # Unisys `ClearPath HMP IX 4000' SVR4/MP effort
++                       # says <Richard.M.Bartel@ccMail.Census.GOV>
++         echo i586-unisys-sysv4
++-        exit 0 ;;
+++        exit ;;
++     *:UNIX_System_V:4*:FTX*)
++ 	# From Gerald Hewes <hewes@openmarket.com>.
++ 	# How about differentiating between stratus architectures? -djm
++ 	echo hppa1.1-stratus-sysv4
++-	exit 0 ;;
+++	exit ;;
++     *:*:*:FTX*)
++ 	# From seanf@swdc.stratus.com.
++ 	echo i860-stratus-sysv4
++-	exit 0 ;;
+++	exit ;;
+++    i*86:VOS:*:*)
+++	# From Paul.Green@stratus.com.
+++	echo ${UNAME_MACHINE}-stratus-vos
+++	exit ;;
++     *:VOS:*:*)
++ 	# From Paul.Green@stratus.com.
++ 	echo hppa1.1-stratus-vos
++-	exit 0 ;;
+++	exit ;;
++     mc68*:A/UX:*:*)
++ 	echo m68k-apple-aux${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     news*:NEWS-OS:6*:*)
++ 	echo mips-sony-newsos6
++-	exit 0 ;;
+++	exit ;;
++     R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
++ 	if [ -d /usr/nec ]; then
++ 	        echo mips-nec-sysv${UNAME_RELEASE}
++ 	else
++ 	        echo mips-unknown-sysv${UNAME_RELEASE}
++ 	fi
++-        exit 0 ;;
+++        exit ;;
++     BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
++ 	echo powerpc-be-beos
++-	exit 0 ;;
+++	exit ;;
++     BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.
++ 	echo powerpc-apple-beos
++-	exit 0 ;;
+++	exit ;;
++     BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
++ 	echo i586-pc-beos
++-	exit 0 ;;
+++	exit ;;
+++    BePC:Haiku:*:*)	# Haiku running on Intel PC compatible.
+++	echo i586-pc-haiku
+++	exit ;;
++     SX-4:SUPER-UX:*:*)
++ 	echo sx4-nec-superux${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     SX-5:SUPER-UX:*:*)
++ 	echo sx5-nec-superux${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     SX-6:SUPER-UX:*:*)
++ 	echo sx6-nec-superux${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
+++    SX-7:SUPER-UX:*:*)
+++	echo sx7-nec-superux${UNAME_RELEASE}
+++	exit ;;
+++    SX-8:SUPER-UX:*:*)
+++	echo sx8-nec-superux${UNAME_RELEASE}
+++	exit ;;
+++    SX-8R:SUPER-UX:*:*)
+++	echo sx8r-nec-superux${UNAME_RELEASE}
+++	exit ;;
++     Power*:Rhapsody:*:*)
++ 	echo powerpc-apple-rhapsody${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:Rhapsody:*:*)
++ 	echo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:Darwin:*:*)
++-	case `uname -p` in
++-	    *86) UNAME_PROCESSOR=i686 ;;
++-	    powerpc) UNAME_PROCESSOR=powerpc ;;
+++	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
+++	case $UNAME_PROCESSOR in
+++	    i386)
+++		eval $set_cc_for_build
+++		if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
+++		  if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
+++		      (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
+++		      grep IS_64BIT_ARCH >/dev/null
+++		  then
+++		      UNAME_PROCESSOR="x86_64"
+++		  fi
+++		fi ;;
+++	    unknown) UNAME_PROCESSOR=powerpc ;;
++ 	esac
++ 	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:procnto*:*:* | *:QNX:[0123456789]*:*)
++ 	UNAME_PROCESSOR=`uname -p`
++ 	if test "$UNAME_PROCESSOR" = "x86"; then
++@@ -1164,22 +1227,25 @@
++ 		UNAME_MACHINE=pc
++ 	fi
++ 	echo ${UNAME_PROCESSOR}-${UNAME_MACHINE}-nto-qnx${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:QNX:*:4*)
++ 	echo i386-pc-qnx
++-	exit 0 ;;
++-    NSR-[DGKLNPTVW]:NONSTOP_KERNEL:*:*)
+++	exit ;;
+++    NSE-?:NONSTOP_KERNEL:*:*)
+++	echo nse-tandem-nsk${UNAME_RELEASE}
+++	exit ;;
+++    NSR-?:NONSTOP_KERNEL:*:*)
++ 	echo nsr-tandem-nsk${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:NonStop-UX:*:*)
++ 	echo mips-compaq-nonstopux
++-	exit 0 ;;
+++	exit ;;
++     BS2000:POSIX*:*:*)
++ 	echo bs2000-siemens-sysv
++-	exit 0 ;;
+++	exit ;;
++     DS/*:UNIX_System_V:*:*)
++ 	echo ${UNAME_MACHINE}-${UNAME_SYSTEM}-${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
++     *:Plan9:*:*)
++ 	# "uname -m" is not consistent, so use $cputype instead. 386
++ 	# is converted to i386 for consistency with other x86
++@@ -1190,28 +1256,50 @@
++ 	    UNAME_MACHINE="$cputype"
++ 	fi
++ 	echo ${UNAME_MACHINE}-unknown-plan9
++-	exit 0 ;;
+++	exit ;;
++     *:TOPS-10:*:*)
++ 	echo pdp10-unknown-tops10
++-	exit 0 ;;
+++	exit ;;
++     *:TENEX:*:*)
++ 	echo pdp10-unknown-tenex
++-	exit 0 ;;
+++	exit ;;
++     KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)
++ 	echo pdp10-dec-tops20
++-	exit 0 ;;
+++	exit ;;
++     XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)
++ 	echo pdp10-xkl-tops20
++-	exit 0 ;;
+++	exit ;;
++     *:TOPS-20:*:*)
++ 	echo pdp10-unknown-tops20
++-	exit 0 ;;
+++	exit ;;
++     *:ITS:*:*)
++ 	echo pdp10-unknown-its
++-	exit 0 ;;
+++	exit ;;
++     SEI:*:*:SEIUX)
++         echo mips-sei-seiux${UNAME_RELEASE}
++-	exit 0 ;;
+++	exit ;;
+++    *:DragonFly:*:*)
+++	echo ${UNAME_MACHINE}-unknown-dragonfly`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
+++	exit ;;
+++    *:*VMS:*:*)
+++    	UNAME_MACHINE=`(uname -p) 2>/dev/null`
+++	case "${UNAME_MACHINE}" in
+++	    A*) echo alpha-dec-vms ; exit ;;
+++	    I*) echo ia64-dec-vms ; exit ;;
+++	    V*) echo vax-dec-vms ; exit ;;
+++	esac ;;
+++    *:XENIX:*:SysV)
+++	echo i386-pc-xenix
+++	exit ;;
+++    i*86:skyos:*:*)
+++	echo ${UNAME_MACHINE}-pc-skyos`echo ${UNAME_RELEASE}` | sed -e 's/ .*$//'
+++	exit ;;
+++    i*86:rdos:*:*)
+++	echo ${UNAME_MACHINE}-pc-rdos
+++	exit ;;
+++    i*86:AROS:*:*)
+++	echo ${UNAME_MACHINE}-pc-aros
+++	exit ;;
++ esac
++ 
++ #echo '(No uname command or uname output not recognized.)' 1>&2
++@@ -1243,7 +1331,7 @@
++ #endif
++ 
++ #if defined (__arm) && defined (__acorn) && defined (__unix)
++-  printf ("arm-acorn-riscix"); exit (0);
+++  printf ("arm-acorn-riscix\n"); exit (0);
++ #endif
++ 
++ #if defined (hp300) && !defined (hpux)
++@@ -1332,11 +1420,12 @@
++ }
++ EOF
++ 
++-$CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && $dummy && exit 0
+++$CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && SYSTEM_NAME=`$dummy` &&
+++	{ echo "$SYSTEM_NAME"; exit; }
++ 
++ # Apollos put the system type in the environment.
++ 
++-test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit 0; }
+++test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit; }
++ 
++ # Convex versions that predate uname can use getsysinfo(1)
++ 
++@@ -1345,22 +1434,22 @@
++     case `getsysinfo -f cpu_type` in
++     c1*)
++ 	echo c1-convex-bsd
++-	exit 0 ;;
+++	exit ;;
++     c2*)
++ 	if getsysinfo -f scalar_acc
++ 	then echo c32-convex-bsd
++ 	else echo c2-convex-bsd
++ 	fi
++-	exit 0 ;;
+++	exit ;;
++     c34*)
++ 	echo c34-convex-bsd
++-	exit 0 ;;
+++	exit ;;
++     c38*)
++ 	echo c38-convex-bsd
++-	exit 0 ;;
+++	exit ;;
++     c4*)
++ 	echo c4-convex-bsd
++-	exit 0 ;;
+++	exit ;;
++     esac
++ fi
++ 
++@@ -1371,7 +1460,9 @@
++ the operating system you are using. It is advised that you
++ download the most up to date version of the config scripts from
++ 
++-    ftp://ftp.gnu.org/pub/gnu/config/
+++  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
+++and
+++  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD
++ 
++ If the version you run ($0) is already up to date, please
++ send the following data and any information you think might be
++--- misc/xmlsec1-1.2.12/config.sub	2010-04-15 09:29:35.000000000 +0000
+++++ misc/build/xmlsec1-1.2.12/config.sub	2010-04-15 09:29:46.000000000 +0000
++@@ -1,9 +1,10 @@
++ #! /bin/sh
++ # Configuration validation subroutine script.
++ #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
++-#   2000, 2001, 2002, 2003 Free Software Foundation, Inc.
+++#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010
+++#   Free Software Foundation, Inc.
++ 
++-timestamp='2003-06-18'
+++timestamp='2010-01-22'
++ 
++ # This file is (in principle) common to ALL GNU software.
++ # The presence of a machine in this file suggests that SOME GNU software
++@@ -21,22 +22,26 @@
++ #
++ # You should have received a copy of the GNU General Public License
++ # along with this program; if not, write to the Free Software
++-# Foundation, Inc., 59 Temple Place - Suite 330,
++-# Boston, MA 02111-1307, USA.
++-
+++# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
+++# 02110-1301, USA.
+++#
++ # As a special exception to the GNU General Public License, if you
++ # distribute this file as part of a program that contains a
++ # configuration script generated by Autoconf, you may include it under
++ # the same distribution terms that you use for the rest of that program.
++ 
+++
++ # Please send patches to <config-patches@gnu.org>.  Submit a context
++-# diff and a properly formatted ChangeLog entry.
+++# diff and a properly formatted GNU ChangeLog entry.
++ #
++ # Configuration subroutine to validate and canonicalize a configuration type.
++ # Supply the specified configuration type as an argument.
++ # If it is invalid, we print an error message on stderr and exit with code 1.
++ # Otherwise, we print the canonical config type on stdout and succeed.
++ 
+++# You can get the latest version of this script from:
+++# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD
+++
++ # This file is supposed to be the same for all GNU packages
++ # and recognize all the CPU types, system types and aliases
++ # that are meaningful with *any* GNU software.
++@@ -70,8 +75,9 @@
++ version="\
++ GNU config.sub ($timestamp)
++ 
++-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
++-Free Software Foundation, Inc.
+++Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
+++2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free
+++Software Foundation, Inc.
++ 
++ This is free software; see the source for copying conditions.  There is NO
++ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
++@@ -83,11 +89,11 @@
++ while test $# -gt 0 ; do
++   case $1 in
++     --time-stamp | --time* | -t )
++-       echo "$timestamp" ; exit 0 ;;
+++       echo "$timestamp" ; exit ;;
++     --version | -v )
++-       echo "$version" ; exit 0 ;;
+++       echo "$version" ; exit ;;
++     --help | --h* | -h )
++-       echo "$usage"; exit 0 ;;
+++       echo "$usage"; exit ;;
++     -- )     # Stop option processing
++        shift; break ;;
++     - )	# Use stdin as input.
++@@ -99,7 +105,7 @@
++     *local*)
++        # First pass through any local machine types.
++        echo $1
++-       exit 0;;
+++       exit ;;
++ 
++     * )
++        break ;;
++@@ -118,7 +124,10 @@
++ # Here we must recognize all the valid KERNEL-OS combinations.
++ maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
++ case $maybe_os in
++-  nto-qnx* | linux-gnu* | freebsd*-gnu* | netbsd*-gnu* | storm-chaos* | os2-emx* | rtmk-nova*)
+++  nto-qnx* | linux-gnu* | linux-dietlibc | linux-newlib* | linux-uclibc* | \
+++  uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* | \
+++  kopensolaris*-gnu* | \
+++  storm-chaos* | os2-emx* | rtmk-nova*)
++     os=-$maybe_os
++     basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
++     ;;
++@@ -144,10 +153,13 @@
++ 	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
++ 	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
++ 	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
++-	-apple | -axis)
+++	-apple | -axis | -knuth | -cray | -microblaze)
++ 		os=
++ 		basic_machine=$1
++ 		;;
+++        -bluegene*)
+++	        os=-cnk
+++		;;
++ 	-sim | -cisco | -oki | -wec | -winbond)
++ 		os=
++ 		basic_machine=$1
++@@ -169,6 +181,10 @@
++ 	-hiux*)
++ 		os=-hiuxwe2
++ 		;;
+++	-sco6)
+++		os=-sco5v6
+++		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+++		;;
++ 	-sco5)
++ 		os=-sco3.2v5
++ 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++@@ -185,6 +201,10 @@
++ 		# Don't forget version if it is 3.2v4 or newer.
++ 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++ 		;;
+++	-sco5v6*)
+++		# Don't forget version if it is 3.2v4 or newer.
+++		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+++		;;
++ 	-sco*)
++ 		os=-sco3.2v2
++ 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
++@@ -228,54 +248,71 @@
++ 	| a29k \
++ 	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
++ 	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
++-	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr \
+++	| am33_2.0 \
+++	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr | avr32 \
+++	| bfin \
++ 	| c4x | clipper \
++ 	| d10v | d30v | dlx | dsp16xx \
++-	| fr30 | frv \
+++	| fido | fr30 | frv \
++ 	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
++ 	| i370 | i860 | i960 | ia64 \
++-	| ip2k \
++-	| m32r | m68000 | m68k | m88k | mcore \
+++	| ip2k | iq2000 \
+++	| lm32 \
+++	| m32c | m32r | m32rle | m68000 | m68k | m88k \
+++	| maxq | mb | microblaze | mcore | mep | metag \
++ 	| mips | mipsbe | mipseb | mipsel | mipsle \
++ 	| mips16 \
++ 	| mips64 | mips64el \
++-	| mips64vr | mips64vrel \
+++	| mips64octeon | mips64octeonel \
++ 	| mips64orion | mips64orionel \
+++	| mips64r5900 | mips64r5900el \
+++	| mips64vr | mips64vrel \
++ 	| mips64vr4100 | mips64vr4100el \
++ 	| mips64vr4300 | mips64vr4300el \
++ 	| mips64vr5000 | mips64vr5000el \
+++	| mips64vr5900 | mips64vr5900el \
++ 	| mipsisa32 | mipsisa32el \
++ 	| mipsisa32r2 | mipsisa32r2el \
++ 	| mipsisa64 | mipsisa64el \
+++	| mipsisa64r2 | mipsisa64r2el \
++ 	| mipsisa64sb1 | mipsisa64sb1el \
++ 	| mipsisa64sr71k | mipsisa64sr71kel \
++ 	| mipstx39 | mipstx39el \
++ 	| mn10200 | mn10300 \
+++	| moxie \
+++	| mt \
++ 	| msp430 \
+++	| nios | nios2 \
++ 	| ns16k | ns32k \
++-	| openrisc | or32 \
+++	| or32 \
++ 	| pdp10 | pdp11 | pj | pjl \
++ 	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
++ 	| pyramid \
++-	| s390 | s390x \
++-	| sh | sh[1234] | sh[23]e | sh[34]eb | shbe | shle | sh[1234]le | sh3ele \
+++	| rx \
+++	| score \
+++	| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[34]eb | sheb | shbe | shle | sh[1234]le | sh3ele \
++ 	| sh64 | sh64le \
++-	| sparc | sparc64 | sparc86x | sparclet | sparclite | sparcv9 | sparcv9b \
++-	| strongarm \
+++	| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet | sparclite \
+++	| sparcv8 | sparcv9 | sparcv9b | sparcv9v \
+++	| spu | strongarm \
++ 	| tahoe | thumb | tic4x | tic80 | tron \
+++	| ubicom32 \
++ 	| v850 | v850e \
++ 	| we32k \
++-	| x86 | xscale | xstormy16 | xtensa \
++-	| z8k)
+++	| x86 | xc16x | xscale | xscalee[bl] | xstormy16 | xtensa \
+++	| z8k | z80)
++ 		basic_machine=$basic_machine-unknown
++ 		;;
++-	m6811 | m68hc11 | m6812 | m68hc12)
+++	m6811 | m68hc11 | m6812 | m68hc12 | picochip)
++ 		# Motorola 68HC11/12.
++ 		basic_machine=$basic_machine-unknown
++ 		os=-none
++ 		;;
++ 	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
++ 		;;
+++	ms1)
+++		basic_machine=mt-unknown
+++		;;
++ 
++ 	# We use `pc' rather than `unknown'
++ 	# because (1) that's what they normally are, and
++@@ -295,55 +332,69 @@
++ 	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
++ 	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \
++ 	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
++-	| avr-* \
++-	| bs2000-* \
+++	| avr-* | avr32-* \
+++	| bfin-* | bs2000-* \
++ 	| c[123]* | c30-* | [cjt]90-* | c4x-* | c54x-* | c55x-* | c6x-* \
++-	| clipper-* | cydra-* \
+++	| clipper-* | craynv-* | cydra-* \
++ 	| d10v-* | d30v-* | dlx-* \
++ 	| elxsi-* \
++-	| f30[01]-* | f700-* | fr30-* | frv-* | fx80-* \
+++	| f30[01]-* | f700-* | fido-* | fr30-* | frv-* | fx80-* \
++ 	| h8300-* | h8500-* \
++ 	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
++ 	| i*86-* | i860-* | i960-* | ia64-* \
++-	| ip2k-* \
++-	| m32r-* \
+++	| ip2k-* | iq2000-* \
+++	| lm32-* \
+++	| m32c-* | m32r-* | m32rle-* \
++ 	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
++-	| m88110-* | m88k-* | mcore-* \
+++	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* | microblaze-* \
++ 	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
++ 	| mips16-* \
++ 	| mips64-* | mips64el-* \
++-	| mips64vr-* | mips64vrel-* \
+++	| mips64octeon-* | mips64octeonel-* \
++ 	| mips64orion-* | mips64orionel-* \
+++	| mips64r5900-* | mips64r5900el-* \
+++	| mips64vr-* | mips64vrel-* \
++ 	| mips64vr4100-* | mips64vr4100el-* \
++ 	| mips64vr4300-* | mips64vr4300el-* \
++ 	| mips64vr5000-* | mips64vr5000el-* \
+++	| mips64vr5900-* | mips64vr5900el-* \
++ 	| mipsisa32-* | mipsisa32el-* \
++ 	| mipsisa32r2-* | mipsisa32r2el-* \
++ 	| mipsisa64-* | mipsisa64el-* \
+++	| mipsisa64r2-* | mipsisa64r2el-* \
++ 	| mipsisa64sb1-* | mipsisa64sb1el-* \
++ 	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
++ 	| mipstx39-* | mipstx39el-* \
+++	| mmix-* \
+++	| mt-* \
++ 	| msp430-* \
++-	| none-* | np1-* | nv1-* | ns16k-* | ns32k-* \
+++	| nios-* | nios2-* \
+++	| none-* | np1-* | ns16k-* | ns32k-* \
++ 	| orion-* \
++ 	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
++ 	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
++ 	| pyramid-* \
++-	| romp-* | rs6000-* \
++-	| s390-* | s390x-* \
++-	| sh-* | sh[1234]-* | sh[23]e-* | sh[34]eb-* | shbe-* \
+++	| romp-* | rs6000-* | rx-* \
+++	| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \
++ 	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
++-	| sparc-* | sparc64-* | sparc86x-* | sparclet-* | sparclite-* \
++-	| sparcv9-* | sparcv9b-* | strongarm-* | sv1-* | sx?-* \
+++	| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \
+++	| sparclite-* \
+++	| sparcv8-* | sparcv9-* | sparcv9b-* | sparcv9v-* | strongarm-* | sv1-* | sx?-* \
++ 	| tahoe-* | thumb-* \
++ 	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
+++	| tile-* | tilegx-* \
++ 	| tron-* \
+++	| ubicom32-* \
++ 	| v850-* | v850e-* | vax-* \
++ 	| we32k-* \
++-	| x86-* | x86_64-* | xps100-* | xscale-* | xstormy16-* \
++-	| xtensa-* \
+++	| x86-* | x86_64-* | xc16x-* | xps100-* | xscale-* | xscalee[bl]-* \
+++	| xstormy16-* | xtensa*-* \
++ 	| ymp-* \
++-	| z8k-*)
+++	| z8k-* | z80-*)
+++		;;
+++	# Recognize the basic CPU types without company name, with glob match.
+++	xtensa*)
+++		basic_machine=$basic_machine-unknown
++ 		;;
++ 	# Recognize the various machine names and aliases which stand
++ 	# for a CPU type and a company and sometimes even an OS.
++@@ -361,6 +412,9 @@
++ 		basic_machine=a29k-amd
++ 		os=-udi
++ 		;;
+++    	abacus)
+++		basic_machine=abacus-unknown
+++		;;
++ 	adobe68k)
++ 		basic_machine=m68010-adobe
++ 		os=-scout
++@@ -378,6 +432,9 @@
++ 	amd64)
++ 		basic_machine=x86_64-pc
++ 		;;
+++	amd64-*)
+++		basic_machine=x86_64-`echo $basic_machine | sed 's/^[^-]*-//'`
+++		;;
++ 	amdahl)
++ 		basic_machine=580-amdahl
++ 		os=-sysv
++@@ -401,6 +458,10 @@
++ 		basic_machine=m68k-apollo
++ 		os=-bsd
++ 		;;
+++	aros)
+++		basic_machine=i386-pc
+++		os=-aros
+++		;;
++ 	aux)
++ 		basic_machine=m68k-apple
++ 		os=-aux
++@@ -409,10 +470,26 @@
++ 		basic_machine=ns32k-sequent
++ 		os=-dynix
++ 		;;
+++	blackfin)
+++		basic_machine=bfin-unknown
+++		os=-linux
+++		;;
+++	blackfin-*)
+++		basic_machine=bfin-`echo $basic_machine | sed 's/^[^-]*-//'`
+++		os=-linux
+++		;;
+++	bluegene*)
+++		basic_machine=powerpc-ibm
+++		os=-cnk
+++		;;
++ 	c90)
++ 		basic_machine=c90-cray
++ 		os=-unicos
++ 		;;
+++        cegcc)
+++		basic_machine=arm-unknown
+++		os=-cegcc
+++		;;
++ 	convex-c1)
++ 		basic_machine=c1-convex
++ 		os=-bsd
++@@ -437,12 +514,27 @@
++ 		basic_machine=j90-cray
++ 		os=-unicos
++ 		;;
+++	craynv)
+++		basic_machine=craynv-cray
+++		os=-unicosmp
+++		;;
+++	cr16)
+++		basic_machine=cr16-unknown
+++		os=-elf
+++		;;
++ 	crds | unos)
++ 		basic_machine=m68k-crds
++ 		;;
+++	crisv32 | crisv32-* | etraxfs*)
+++		basic_machine=crisv32-axis
+++		;;
++ 	cris | cris-* | etrax*)
++ 		basic_machine=cris-axis
++ 		;;
+++	crx)
+++		basic_machine=crx-unknown
+++		os=-elf
+++		;;
++ 	da30 | da30-*)
++ 		basic_machine=m68k-da30
++ 		;;
++@@ -465,6 +557,14 @@
++ 		basic_machine=m88k-motorola
++ 		os=-sysv3
++ 		;;
+++	dicos)
+++		basic_machine=i686-pc
+++		os=-dicos
+++		;;
+++	djgpp)
+++		basic_machine=i586-pc
+++		os=-msdosdjgpp
+++		;;
++ 	dpx20 | dpx20-*)
++ 		basic_machine=rs6000-bull
++ 		os=-bosx
++@@ -615,6 +715,14 @@
++ 		basic_machine=m68k-isi
++ 		os=-sysv
++ 		;;
+++	m68knommu)
+++		basic_machine=m68k-unknown
+++		os=-linux
+++		;;
+++	m68knommu-*)
+++		basic_machine=m68k-`echo $basic_machine | sed 's/^[^-]*-//'`
+++		os=-linux
+++		;;
++ 	m88k-omron*)
++ 		basic_machine=m88k-omron
++ 		;;
++@@ -626,10 +734,17 @@
++ 		basic_machine=ns32k-utek
++ 		os=-sysv
++ 		;;
+++        microblaze)
+++		basic_machine=microblaze-xilinx
+++		;;
++ 	mingw32)
++ 		basic_machine=i386-pc
++ 		os=-mingw32
++ 		;;
+++	mingw32ce)
+++		basic_machine=arm-unknown
+++		os=-mingw32ce
+++		;;
++ 	miniframe)
++ 		basic_machine=m68000-convergent
++ 		;;
++@@ -643,10 +758,6 @@
++ 	mips3*)
++ 		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`-unknown
++ 		;;
++-	mmix*)
++-		basic_machine=mmix-knuth
++-		os=-mmixware
++-		;;
++ 	monitor)
++ 		basic_machine=m68k-rom68k
++ 		os=-coff
++@@ -659,6 +770,9 @@
++ 		basic_machine=i386-pc
++ 		os=-msdos
++ 		;;
+++	ms1-*)
+++		basic_machine=`echo $basic_machine | sed -e 's/ms1-/mt-/'`
+++		;;
++ 	mvs)
++ 		basic_machine=i370-ibm
++ 		os=-mvs
++@@ -727,10 +841,6 @@
++ 	np1)
++ 		basic_machine=np1-gould
++ 		;;
++-	nv1)
++-		basic_machine=nv1-cray
++-		os=-unicosmp
++-		;;
++ 	nsr-tandem)
++ 		basic_machine=nsr-tandem
++ 		;;
++@@ -738,9 +848,12 @@
++ 		basic_machine=hppa1.1-oki
++ 		os=-proelf
++ 		;;
++-	or32 | or32-*)
+++	openrisc | openrisc-*)
++ 		basic_machine=or32-unknown
++-		os=-coff
+++		;;
+++	os400)
+++		basic_machine=powerpc-ibm
+++		os=-os400
++ 		;;
++ 	OSE68000 | ose68000)
++ 		basic_machine=m68000-ericsson
++@@ -758,6 +871,14 @@
++ 		basic_machine=i860-intel
++ 		os=-osf
++ 		;;
+++	parisc)
+++		basic_machine=hppa-unknown
+++		os=-linux
+++		;;
+++	parisc-*)
+++		basic_machine=hppa-`echo $basic_machine | sed 's/^[^-]*-//'`
+++		os=-linux
+++		;;
++ 	pbd)
++ 		basic_machine=sparc-tti
++ 		;;
++@@ -767,6 +888,12 @@
++ 	pc532 | pc532-*)
++ 		basic_machine=ns32k-pc532
++ 		;;
+++	pc98)
+++		basic_machine=i386-pc
+++		;;
+++	pc98-*)
+++		basic_machine=i386-`echo $basic_machine | sed 's/^[^-]*-//'`
+++		;;
++ 	pentium | p5 | k5 | k6 | nexgen | viac3)
++ 		basic_machine=i586-pc
++ 		;;
++@@ -823,6 +950,10 @@
++ 		basic_machine=i586-unknown
++ 		os=-pw32
++ 		;;
+++	rdos)
+++		basic_machine=i386-pc
+++		os=-rdos
+++		;;
++ 	rom68k)
++ 		basic_machine=m68k-rom68k
++ 		os=-coff
++@@ -833,6 +964,12 @@
++ 	rtpc | rtpc-*)
++ 		basic_machine=romp-ibm
++ 		;;
+++	s390 | s390-*)
+++		basic_machine=s390-ibm
+++		;;
+++	s390x | s390x-*)
+++		basic_machine=s390x-ibm
+++		;;
++ 	sa29200)
++ 		basic_machine=a29k-amd
++ 		os=-udi
++@@ -843,6 +980,10 @@
++ 	sb1el)
++ 		basic_machine=mipsisa64sb1el-unknown
++ 		;;
+++	sde)
+++		basic_machine=mipsisa32-sde
+++		os=-elf
+++		;;
++ 	sei)
++ 		basic_machine=mips-sei
++ 		os=-seiux
++@@ -854,6 +995,9 @@
++ 		basic_machine=sh-hitachi
++ 		os=-hms
++ 		;;
+++	sh5el)
+++		basic_machine=sh5le-unknown
+++		;;
++ 	sh64)
++ 		basic_machine=sh64-unknown
++ 		;;
++@@ -943,6 +1087,15 @@
++ 		basic_machine=tic6x-unknown
++ 		os=-coff
++ 		;;
+++        # This must be matched before tile*.
+++        tilegx*)
+++		basic_machine=tilegx-unknown
+++		os=-linux-gnu
+++		;;
+++	tile*)
+++		basic_machine=tile-unknown
+++		os=-linux-gnu
+++		;;
++ 	tx39)
++ 		basic_machine=mipstx39-unknown
++ 		;;
++@@ -956,6 +1109,10 @@
++ 	tower | tower-32)
++ 		basic_machine=m68k-ncr
++ 		;;
+++	tpf)
+++		basic_machine=s390x-ibm
+++		os=-tpf
+++		;;
++ 	udi29k)
++ 		basic_machine=a29k-amd
++ 		os=-udi
++@@ -999,6 +1156,10 @@
++ 		basic_machine=hppa1.1-winbond
++ 		os=-proelf
++ 		;;
+++	xbox)
+++		basic_machine=i686-pc
+++		os=-mingw32
+++		;;
++ 	xps | xps100)
++ 		basic_machine=xps100-honeywell
++ 		;;
++@@ -1010,6 +1171,10 @@
++ 		basic_machine=z8k-unknown
++ 		os=-sim
++ 		;;
+++	z80-*-coff)
+++		basic_machine=z80-unknown
+++		os=-sim
+++		;;
++ 	none)
++ 		basic_machine=none-none
++ 		os=-none
++@@ -1029,6 +1194,9 @@
++ 	romp)
++ 		basic_machine=romp-ibm
++ 		;;
+++	mmix)
+++		basic_machine=mmix-knuth
+++		;;
++ 	rs6000)
++ 		basic_machine=rs6000-ibm
++ 		;;
++@@ -1045,13 +1213,10 @@
++ 	we32k)
++ 		basic_machine=we32k-att
++ 		;;
++-	sh3 | sh4 | sh[34]eb | sh[1234]le | sh[23]ele)
+++	sh[1234] | sh[24]a | sh[24]aeb | sh[34]eb | sh[1234]le | sh[23]ele)
++ 		basic_machine=sh-unknown
++ 		;;
++-	sh64)
++-		basic_machine=sh64-unknown
++-		;;
++-	sparc | sparcv9 | sparcv9b)
+++	sparc | sparcv8 | sparcv9 | sparcv9b | sparcv9v)
++ 		basic_machine=sparc-sun
++ 		;;
++ 	cydra)
++@@ -1098,6 +1263,9 @@
++         # First match some system type aliases
++         # that might get confused with valid system types.
++ 	# -solaris* is a basic system type, with this one exception.
+++        -auroraux)
+++	        os=-auroraux
+++		;;
++ 	-solaris1 | -solaris1.*)
++ 		os=`echo $os | sed -e 's|solaris1|sunos4|'`
++ 		;;
++@@ -1118,25 +1286,30 @@
++ 	# Each alternative MUST END IN A *, to match a version number.
++ 	# -sysv* is not here because it comes later, after sysvr4.
++ 	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
++-	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -sunos | -sunos[34]*\
++-	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -solaris* | -sym* \
+++	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -cnk* | -sunos | -sunos[34]*\
+++	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
+++	      | -sym* | -kopensolaris* \
++ 	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
++-	      | -aos* \
+++	      | -aos* | -aros* \
++ 	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
++ 	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
++-	      | -hiux* | -386bsd* | -netbsd* | -openbsd* | -freebsd* | -riscix* \
++-	      | -lynxos* | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
+++	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
+++	      | -openbsd* | -solidbsd* \
+++	      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \
+++	      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
++ 	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
++ 	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
++-	      | -chorusos* | -chorusrdb* \
+++	      | -chorusos* | -chorusrdb* | -cegcc* \
++ 	      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
++-	      | -mingw32* | -linux-gnu* | -uxpv* | -beos* | -mpeix* | -udk* \
+++	      | -mingw32* | -linux-gnu* | -linux-newlib* | -linux-uclibc* \
+++	      | -uxpv* | -beos* | -mpeix* | -udk* \
++ 	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
++ 	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
++ 	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
++ 	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
++ 	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
++-	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei*)
+++	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
+++	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es*)
++ 	# Remember, each alternative MUST END IN *, to match a version number.
++ 		;;
++ 	-qnx*)
++@@ -1154,12 +1327,15 @@
++ 		os=`echo $os | sed -e 's|nto|nto-qnx|'`
++ 		;;
++ 	-sim | -es1800* | -hms* | -xray | -os68k* | -none* | -v88r* \
++-	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* \
+++	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* | -haiku* \
++ 	      | -macos* | -mpw* | -magic* | -mmixware* | -mon960* | -lnews*)
++ 		;;
++ 	-mac*)
++ 		os=`echo $os | sed -e 's|mac|macos|'`
++ 		;;
+++	-linux-dietlibc)
+++		os=-linux-dietlibc
+++		;;
++ 	-linux*)
++ 		os=`echo $os | sed -e 's|linux|linux-gnu|'`
++ 		;;
++@@ -1172,6 +1348,9 @@
++ 	-opened*)
++ 		os=-openedition
++ 		;;
+++        -os400*)
+++		os=-os400
+++		;;
++ 	-wince*)
++ 		os=-wince
++ 		;;
++@@ -1193,6 +1372,9 @@
++ 	-atheos*)
++ 		os=-atheos
++ 		;;
+++	-syllable*)
+++		os=-syllable
+++		;;
++ 	-386bsd)
++ 		os=-bsd
++ 		;;
++@@ -1215,6 +1397,9 @@
++ 	-sinix*)
++ 		os=-sysv4
++ 		;;
+++        -tpf*)
+++		os=-tpf
+++		;;
++ 	-triton*)
++ 		os=-sysv3
++ 		;;
++@@ -1251,6 +1436,14 @@
++ 	-kaos*)
++ 		os=-kaos
++ 		;;
+++	-zvmoe)
+++		os=-zvmoe
+++		;;
+++	-dicos*)
+++		os=-dicos
+++		;;
+++        -nacl*)
+++	        ;;
++ 	-none)
++ 		;;
++ 	*)
++@@ -1273,6 +1466,12 @@
++ # system, and we'll never get to this point.
++ 
++ case $basic_machine in
+++        score-*)
+++		os=-elf
+++		;;
+++        spu-*)
+++		os=-elf
+++		;;
++ 	*-acorn)
++ 		os=-riscix1.2
++ 		;;
++@@ -1282,8 +1481,8 @@
++ 	arm*-semi)
++ 		os=-aout
++ 		;;
++-	c4x-* | tic4x-*)
++-		os=-coff
+++        c4x-* | tic4x-*)
+++        	os=-coff
++ 		;;
++ 	# This must come before the *-dec entry.
++ 	pdp10-*)
++@@ -1310,6 +1509,9 @@
++ 	m68*-cisco)
++ 		os=-aout
++ 		;;
+++        mep-*)
+++		os=-elf
+++		;;
++ 	mips*-cisco)
++ 		os=-elf
++ 		;;
++@@ -1328,9 +1530,15 @@
++ 	*-be)
++ 		os=-beos
++ 		;;
+++	*-haiku)
+++		os=-haiku
+++		;;
++ 	*-ibm)
++ 		os=-aix
++ 		;;
+++    	*-knuth)
+++		os=-mmixware
+++		;;
++ 	*-wec)
++ 		os=-proelf
++ 		;;
++@@ -1433,7 +1641,7 @@
++ 			-sunos*)
++ 				vendor=sun
++ 				;;
++-			-aix*)
+++			-cnk*|-aix*)
++ 				vendor=ibm
++ 				;;
++ 			-beos*)
++@@ -1463,9 +1671,15 @@
++ 			-mvs* | -opened*)
++ 				vendor=ibm
++ 				;;
+++			-os400*)
+++				vendor=ibm
+++				;;
++ 			-ptx*)
++ 				vendor=sequent
++ 				;;
+++			-tpf*)
+++				vendor=ibm
+++				;;
++ 			-vxsim* | -vxworks* | -windiss*)
++ 				vendor=wrs
++ 				;;
++@@ -1490,7 +1704,7 @@
++ esac
++ 
++ echo $basic_machine$os
++-exit 0
+++exit
++ 
++ # Local variables:
++ # eval: (add-hook 'write-file-hooks 'time-stamp)
+diff --git a/openssl/makefile.mk b/openssl/makefile.mk
+--- openssl/makefile.mk
++++ openssl/makefile.mk
+@@ -61,15 +61,25 @@
+ OUT2LIB += libcrypto.*
+ OUT2INC += include/openssl/*
+ 
++UNAME=$(shell uname)
++
+ .IF "$(OS)" == "LINUX" || "$(OS)" == "FREEBSD"
+ 	PATCH_FILES=openssllnx.patch
+ 	ADDITIONAL_FILES:= \
+ 		libcrypto_OOo_0_9_8l.map \
+ 		libssl_OOo_0_9_8l.map
+ 	.IF "$(CPU)" == "I"
+-		CONFIGURE_ACTION=Configure linux-elf
++		.IF "$(UNAME)" == "GNU/kFreeBSD"
++			CONFIGURE_ACTION=Configure debian-kfreebsd-i386
++		.ELSE
++			CONFIGURE_ACTION=Configure linux-elf
++		.ENDIF
+ 	.ELIF "$(BUILD64)" == "1"
+-		CONFIGURE_ACTION=Configure linux-generic64
++		.IF "$(UNAME)" == "GNU/kFreeBSD"
++			CONFIGURE_ACTION=Configure debian-kfreebsd-amd64
++		.ELSE
++			CONFIGURE_ACTION=Configure linux-generic64
++		.ENDIF
+ 	.ELSE
+ 		CONFIGURE_ACTION=Configure linux-generic32
+ 	.ENDIF
+diff --git a/openssl/openssllnx.patch b/openssl/openssllnx.patch
+--- openssl/openssllnx.patch
++++ openssl/openssllnx.patch
+@@ -1,3 +1,15 @@
++--- misc/build/openssl-0.9.8l/Configure-old	2010-04-17 13:51:42.000000000 +0200
+++++ misc/build/openssl-0.9.8l/Configure	2010-04-17 13:52:03.000000000 +0200
++@@ -382,6 +382,9 @@
++ 
++ "bsdi-elf-gcc",     "gcc:-DPERL5 -DL_ENDIAN -fomit-frame-pointer -O3 -march=i486 -Wall::(unknown)::-ldl:BN_LLONG ${x86_gcc_des} ${x86_gcc_opts}:${x86_elf_asm}:dlfcn:bsd-gcc-shared:-fPIC::.so.\$(SHLIB_MAJOR).\$(SHLIB_MINOR)",
++ 
+++"debian-kfreebsd-amd64","gcc:-m64 -DL_ENDIAN -DTERMIOS -O3 -Wa,--noexecstack -Wall -DMD32_REG_T=int::-D_REENTRANT::-ldl:SIXTY_FOUR_BIT_LONG RC4_CHUNK BF_PTR2 DES_INT DES_UNROLL:${x86_64_asm}:dlfcn:linux-shared:-fPIC:-m64:.so.\$(SHLIB_MAJOR).\$(SHLIB_MINOR)",
+++"debian-kfreebsd-i386","gcc:-DL_ENDIAN -DTERMIOS -O3 -Wa,--noexecstack -g -march=i486 -Wall::-D_REENTRANT::-ldl:BN_LLONG ${x86_gcc_des} ${x86_gcc_opts}:${x86_elf_asm}:dlfcn:linux-shared:-fPIC::.so.\$(SHLIB_MAJOR).\$(SHLIB_MINOR)",
+++
++ "nextstep",	"cc:-O -Wall:<libc.h>:(unknown):::BN_LLONG ${x86_gcc_des} ${x86_gcc_opts}:::",
++ "nextstep3.3",	"cc:-O3 -Wall:<libc.h>:(unknown):::BN_LLONG ${x86_gcc_des} ${x86_gcc_opts}:::",
++ 
+ --- misc/openssl-0.9.8l/test/Makefile	2009-03-25 11:59:22.000000000 +0100
+ +++ misc/build/openssl-0.9.8l/test/Makefile	2009-03-30 12:51:00.210108929 +0200
+ @@ -408,7 +408,7 @@
+diff --git a/sal/osl/unx/file_volume.cxx b/sal/osl/unx/file_volume.cxx
+--- sal/osl/unx/file_volume.cxx
++++ sal/osl/unx/file_volume.cxx
+@@ -46,6 +46,12 @@
+ #undef HAVE_STATFS_H
+ #endif
+ 
++#if defined(LINUX) && defined(__FreeBSD_kernel__)
++#undef LINUX
++#define FREEBSD 1
++#endif
++
++
+ #if defined(SOLARIS)
+ 
+ #include <sys/mnttab.h>
+diff --git a/sal/osl/unx/system.h b/sal/osl/unx/system.h
+--- sal/osl/unx/system.h
++++ sal/osl/unx/system.h
+@@ -123,6 +123,11 @@
+ #	define  NO_PTHREAD_PRIORITY
+ #	define  PTHREAD_SIGACTION 			pthread_sigaction
+ #endif
++
++#   ifndef ETIME
++#       define ETIME ETIMEDOUT
++#   endif
++
+ #endif
+ 
+ #ifdef NETBSD
+diff --git a/sal/osl/unx/util.c b/sal/osl/unx/util.c
+--- sal/osl/unx/util.c
++++ sal/osl/unx/util.c
+@@ -162,7 +162,7 @@
+ 	 *  And now, the real thing: the get address
+ 	 */
+ 
+-#ifdef LINUX
++#ifdef SIOCGIFHWADDR
+ 	ret=ioctl(so, SIOCGIFHWADDR, &ifr);
+ #else
+ 	ret=ioctl(so, SIOCGIFADDR, &ifr); 
+@@ -177,7 +177,7 @@
+ 
+     close(so);
+ 
+-#ifdef LINUX
++#ifdef SIOCGIFHWADDR
+ 	memcpy(hard_addr,ifr.ifr_hwaddr.sa_data,8);
+ #else
+ 	memcpy(hard_addr,ifr.ifr_ifru.ifru_addr.sa_data,8);
+diff --git a/set_soenv.in b/set_soenv.in
+--- set_soenv.in
++++ set_soenv.in
+@@ -302,6 +302,47 @@
+       $OS             = "NETBSD";
+       $PATH_SEPERATOR = $ps;
+ }
++elsif ( $platform =~ m/kfreebsd/ ) 
++{
++# General GNU/kFreeBSD settings:
++      $CVER           = "C341";
++      $BIG_SVX        = "TRUE";
++      $COM            = "GCC";
++      $COMPATH        = '@COMPATH@'; 
++      $GLIBC          = "2REDHAT60";
++      $GUI            = "UNX";
++      $GUIBASE        = "unx";
++      $GVER           = "VCL";
++      $OS             = "LINUX";
++      $PATH_SEPERATOR = $ps;
++
++#Set platform specific values: 
++   if ($platform =~ m/^i[3456]86/)
++   {  print "Setting GNU/kFreeBSD x86 specific values... ";
++      $outfile        = "GNUkFreeBSDX86Env.Set"; 
++      $CPU            = "I";
++      $CPUNAME        = "INTEL";
++      $OUTPATH        = "unxkfgi6";
++      
++      $JRELIBDIR      = '$JAVA_HOME'.$ds."jre".$ds."lib".$ds."i386";
++      $JRETOOLKITDIR  = '$JAVA_HOME'.$ds."jre".$ds."lib".$ds."i386".$ds."client";
++      $JRETHREADDIR   = '$JAVA_HOME'.$ds."jre".$ds."lib".$ds."i386".$ds."native_threads";
++
++   }
++   elsif ($platform =~ m/^x86_64/)
++   {  print "Setting GNU/kFreeBSD x86-64 specific values... ";
++      $outfile        = "GNUkFreeBSDX86-64Env.Set";
++      $CPU            = "X";
++      $CPUNAME        = "X86_64";
++      $OUTPATH        = "unxkfgx6";
++
++      $JRELIBDIR      = '$JAVA_HOME'.$ds."jre".$ds."lib".$ds."amd64";
++      $JRETOOLKITDIR  = '$JAVA_HOME'.$ds."jre".$ds."lib".$ds."amd64".$ds."server";
++      $JRETHREADDIR   = '$JAVA_HOME'.$ds."jre".$ds."lib".$ds."amd64".$ds."native_threads";
++   }
++
++   $INPATH         = $OUTPATH.$PROEXT;
++}
+ elsif ( $platform =~ m/freebsd/ ) 
+ {     $BIG_SVX        = "TRUE";
+       $COM            = "GCC";
+diff --git a/solenv/bin/cwscheckapi b/solenv/bin/cwscheckapi
+--- solenv/bin/cwscheckapi
++++ solenv/bin/cwscheckapi
+@@ -55,7 +55,7 @@
+         elif [ "$OSTYPE" == "solaris" ]; then
+             CWSENV=SolarisX86
+         else
+-            CWSENV=Unknown
++            CWSENV=linux
+         fi
+         perl $SOLARENV/bin/cwstestresult.pl -c $CWS_WORK_STAMP -n CWSCheckAPI -p $CWSENV $PT_STATUS
+     else
+diff --git a/solenv/bin/modules/installer/globals.pm b/solenv/bin/modules/installer/globals.pm
+--- solenv/bin/modules/installer/globals.pm
++++ solenv/bin/modules/installer/globals.pm
+@@ -531,6 +531,7 @@
+ 	$wrapcmd = "";
+ 
+ 	if ( $plat =~ /linux/i ) { $islinux = 1; } 
++	if ( $plat =~ /kfreebsd/i ) { $islinux = 1; } 
+ 	if ( $plat =~ /solaris/i ) { $issolaris = 1; } 
+     if ( $plat =~ /darwin/i ) { $ismacosx = 1; }
+ 
+diff --git a/solenv/bin/modules/pre2par/globals.pm b/solenv/bin/modules/pre2par/globals.pm
+--- solenv/bin/modules/pre2par/globals.pm
++++ solenv/bin/modules/pre2par/globals.pm
+@@ -60,6 +60,7 @@
+ 	$issolaris = 0;
+ 
+ 	if ( $plat =~ /linux/i ) { $islinux = 1; } 
++	if ( $plat =~ /kfreebsd/i ) { $islinux = 1; } 
+ 	if ( $plat =~ /solaris/i ) { $issolaris = 1; } 
+ 
+ }
+diff --git a/tools/source/stream/strmunx.cxx b/tools/source/stream/strmunx.cxx
+--- tools/source/stream/strmunx.cxx
++++ tools/source/stream/strmunx.cxx
+@@ -209,7 +209,7 @@
+         { 0,            SVSTREAM_OK },
+         { EACCES,       SVSTREAM_ACCESS_DENIED },
+         { EBADF,        SVSTREAM_INVALID_HANDLE },
+-#if defined( RS6000 ) || defined( ALPHA ) || defined( HP9000 ) || defined( NETBSD ) || defined(FREEBSD) || defined(MACOSX)
++#if defined( RS6000 ) || defined( ALPHA ) || defined( HP9000 ) || defined( NETBSD ) || defined(FREEBSD) || defined(MACOSX) || defined(__FreeBSD_kernel__)
+         { EDEADLK,      SVSTREAM_LOCKING_VIOLATION },
+ #else
+         { EDEADLOCK,    SVSTREAM_LOCKING_VIOLATION },
+@@ -223,7 +223,7 @@
+         { EAGAIN,       SVSTREAM_LOCKING_VIOLATION },
+         { EISDIR,       SVSTREAM_PATH_NOT_FOUND },
+         { ELOOP,        SVSTREAM_PATH_NOT_FOUND },
+-#if ! defined( RS6000 ) && ! defined( ALPHA ) && ! defined( NETBSD ) && ! defined (FREEBSD) && ! defined (MACOSX)
++#if ! defined( RS6000 ) && ! defined( ALPHA ) && ! defined( NETBSD ) && ! defined (FREEBSD) && ! defined (MACOSX) && ! defined(__FreeBSD_kernel__)
+         { EMULTIHOP,    SVSTREAM_PATH_NOT_FOUND },
+         { ENOLINK,      SVSTREAM_PATH_NOT_FOUND },
+ #endif
+diff --git a/desktop/source/deployment/misc/dp_platform.cxx b/desktop/source/deployment/misc/dp_platform.cxx
+--- desktop/source/deployment/misc/dp_platform.cxx
++++ desktop/source/deployment/misc/dp_platform.cxx
+@@ -39,6 +39,8 @@
+ #define PLATFORM_WIN_X86            "windows_x86"
+ #define PLATFORM_LINUX_X86          "linux_x86"
+ #define PLATFORM_LINUX_X86_64       "linux_x86_64"
++#define PLATFORM_KFREEBSD_X86       "kfreebsd_x86"
++#define PLATFORM_KFREEBSD_X86_64    "kfreebsd_x86_64"
+ #define PLATFORM_LINUX_SPARC        "linux_sparc"
+ #define PLATFORM_LINUX_POWERPC      "linux_powerpc"
+ #define PLATFORM_LINUX_POWERPC64    "linux_powerpc64"
+@@ -126,6 +128,10 @@
+             ret = checkOSandCPU(OUSTR("Linux"), OUSTR("x86"));
+         else if (token.equals(OUSTR(PLATFORM_LINUX_X86_64)))
+             ret = checkOSandCPU(OUSTR("Linux"), OUSTR("X86_64"));  
++        else if (token.equals(OUSTR(PLATFORM_KFREEBSD_X86)))
++            ret = checkOSandCPU(OUSTR("kFreeBSD"), OUSTR("x86"));
++        else if (token.equals(OUSTR(PLATFORM_KFREEBSD_X86_64)))
++            ret = checkOSandCPU(OUSTR("kFreeBSD"), OUSTR("X86_64"));  
+         else if (token.equals(OUSTR(PLATFORM_LINUX_SPARC)))
+             ret = checkOSandCPU(OUSTR("Linux"), OUSTR("SPARC"));  
+         else if (token.equals(OUSTR(PLATFORM_LINUX_POWERPC)))
+diff --git a/sal/rtl/source/macro.hxx b/sal/rtl/source/macro.hxx
+--- sal/rtl/source/macro.hxx
++++ sal/rtl/source/macro.hxx
+@@ -39,7 +39,11 @@
+ #elif defined SOLARIS
+ #define THIS_OS "Solaris"
+ #elif defined LINUX
++#ifdef __FreeBSD_kernel__
++#define THIS_OS "kFreeBSD"
++#else
+ #define THIS_OS "Linux"
++#endif
+ #elif defined MACOSX
+ #define THIS_OS "MacOSX"
+ #elif defined NETBSD
+diff --git a/epm/epm-3.7.patch b/epm/epm-3.7.patch
+--- epm/epm-3.7.patch
++++ epm/epm-3.7.patch
+@@ -1,811 +1,657 @@
+-*** misc/epm-3.7/bsd.c	Tue Jan 14 18:05:01 2003
+---- misc/build/epm-3.7/bsd.c	Mon Nov 20 14:54:51 2006
+-***************
+-*** 26,31 ****
+---- 26,38 ----
+-  
+-  #include "epm.h"
+-  
+-+ void cr2semicolon(char *command)
+-+ {
+-+   int len, i;
+-+   len=strlen(command);
+-+   for (i=0;i<len;i++)
+-+     if(*(command+i)=='\n') *(command+i)=';';
+-+ }
+-  
++diff -urN epm-3.7-old//bsd.c epm-3.7/bsd.c
++--- misc/epm-3.7/bsd.c	2003-01-14 17:05:01.000000000 +0000
+++++ misc/build/epm-3.7/bsd.c	2010-04-19 22:52:32.000000000 +0000
++@@ -26,6 +26,13 @@
++ 
++ #include "epm.h"
++ 
+++void cr2semicolon(char *command)
+++{
+++  int len, i;
+++  len=strlen(command);
+++  for (i=0;i<len;i++)
+++    if(*(command+i)=='\n') *(command+i)=';';
+++}
++ 
++ /*
++  * 'make_bsd()' - Make a FreeBSD software distribution package.
++@@ -149,8 +156,17 @@
++ 
++   for (i = dist->num_depends, d = dist->depends; i > 0; i --, d ++)
++   {
+++#ifdef __FreeBSD__
+++    if (d->type == DEPEND_REQUIRES) {
+++      if (dist->relnumber)
+++	  fprintf(fp, "@pkgdep %s-%s-%d-%s", d->product, dist->version, dist->relnumber, platname);
+++      else
+++	  fprintf(fp, "@pkgdep %s-%s-%s", d->product, dist->version, platname);
+++    }
+++#else
++     if (d->type == DEPEND_REQUIRES)
++       fprintf(fp, "@pkgdep %s", d->product);
+++#endif
++     else
++ #ifdef __FreeBSD__
++      /*
++@@ -179,9 +195,11 @@
++ 	        "         by the BSD packager.\n", stderr);
++           break;
++       case COMMAND_POST_INSTALL :
+++      cr2semicolon(c->command);
++           fprintf(fp, "@exec %s\n", c->command);
++ 	  break;
++       case COMMAND_PRE_REMOVE :
+++      cr2semicolon(c->command);
++           fprintf(fp, "@unexec %s\n", c->command);
++ 	  break;
++       case COMMAND_POST_REMOVE :
++@@ -199,7 +217,7 @@
++       */
++ 
++       fprintf(fp, "@exec /bin/mkdir -p %s\n", file->dst);
++-      fprintf(fp, "@exec /bin/chown %s:%s %s\n", file->user, file->group,
+++      fprintf(fp, "@exec /usr/sbin/chown %s:%s %s\n", file->user, file->group,
++               file->dst);
++       fprintf(fp, "@exec /bin/chmod %04o %s\n", file->mode, file->dst);
++     }
++@@ -326,12 +344,13 @@
++   if (Verbosity)
++     puts("Building FreeBSD pkg binary distribution...");
++ 
++-  if (run_command(NULL, "pkg_create -p / -s %s -c %s -d %s -f %s %s",
+++  if (run_command(NULL, "/usr/sbin/pkg_create -p / -s %s -c %s -d %s -f %s %s",
++                   current, commentname, descrname, plistname, name))
++     return (1);
++ 
++-  if (run_command(NULL, "mv %s.tgz %s", name, directory))
++-    return (1);
+++  if (run_command(NULL, "mv %s.tbz %s", name, directory))
+++    if (run_command(NULL, "mv %s.tgz %s", name, directory))
+++      return (1);
++ 
+   /*
+-   * 'make_bsd()' - Make a FreeBSD software distribution package.
+-***************
+-*** 149,156 ****
+---- 156,172 ----
+-  
+-    for (i = dist->num_depends, d = dist->depends; i > 0; i --, d ++)
+-    {
+-+ #ifdef __FreeBSD__
+-+     if (d->type == DEPEND_REQUIRES) {
+-+       if (dist->relnumber)
+-+ 	  fprintf(fp, "@pkgdep %s-%s-%d-%s", d->product, dist->version, dist->relnumber, platname);
+-+       else
+-+ 	  fprintf(fp, "@pkgdep %s-%s-%s", d->product, dist->version, platname);
+-+     }
+-+ #else
+-      if (d->type == DEPEND_REQUIRES)
+-        fprintf(fp, "@pkgdep %s", d->product);
+-+ #endif
+-      else
+-  #ifdef __FreeBSD__
+-       /*
+-***************
+-*** 179,187 ****
+---- 195,205 ----
+-  	        "         by the BSD packager.\n", stderr);
+-            break;
+-        case COMMAND_POST_INSTALL :
+-+       cr2semicolon(c->command);
+-            fprintf(fp, "@exec %s\n", c->command);
+-  	  break;
+-        case COMMAND_PRE_REMOVE :
+-+       cr2semicolon(c->command);
+-            fprintf(fp, "@unexec %s\n", c->command);
+-  	  break;
+-        case COMMAND_POST_REMOVE :
+-***************
+-*** 199,205 ****
+-        */
+-  
+-        fprintf(fp, "@exec /bin/mkdir -p %s\n", file->dst);
+-!       fprintf(fp, "@exec /bin/chown %s:%s %s\n", file->user, file->group,
+-                file->dst);
+-        fprintf(fp, "@exec /bin/chmod %04o %s\n", file->mode, file->dst);
+-      }
+---- 217,223 ----
+-        */
+-  
+-        fprintf(fp, "@exec /bin/mkdir -p %s\n", file->dst);
+-!       fprintf(fp, "@exec /usr/sbin/chown %s:%s %s\n", file->user, file->group,
+-                file->dst);
+-        fprintf(fp, "@exec /bin/chmod %04o %s\n", file->mode, file->dst);
+-      }
+-***************
+-*** 326,337 ****
+-    if (Verbosity)
+-      puts("Building FreeBSD pkg binary distribution...");
+-  
+-!   if (run_command(NULL, "pkg_create -p / -s %s -c %s -d %s -f %s %s",
+-                    current, commentname, descrname, plistname, name))
+-      return (1);
+-  
+-!   if (run_command(NULL, "mv %s.tgz %s", name, directory))
+-!     return (1);
+-  
+-   /*
+-    * Remove temporary files...
+---- 344,356 ----
+-    if (Verbosity)
+-      puts("Building FreeBSD pkg binary distribution...");
+-  
+-!   if (run_command(NULL, "/usr/sbin/pkg_create -p / -s %s -c %s -d %s -f %s %s",
+-                    current, commentname, descrname, plistname, name))
+-      return (1);
+-  
+-!   if (run_command(NULL, "mv %s.tbz %s", name, directory))
+-!     if (run_command(NULL, "mv %s.tgz %s", name, directory))
+-!       return (1);
+-  
+-   /*
+-    * Remove temporary files...
+-*** misc/epm-3.7/configure	Thu Jul 24 03:20:54 2003
+---- misc/build/epm-3.7/configure	Mon Nov 20 15:01:11 2006
+-***************
+-*** 1238,1244 ****
+---- 1238,1249 ----
+-  fi
+-  fi;
+-  
+-+ # Check whether --enable-fltk or --disable-fltk was given.
+-+ if test "${enable_fltk+set}" = set; then
+-+   enableval="$enable_fltk"
+-+ fi;
+-  
++   * Remove temporary files...
++diff -urN epm-3.7-old//configure epm-3.7/configure
++--- misc/epm-3.7/configure	2003-07-24 01:20:54.000000000 +0000
+++++ misc/build/epm-3.7/configure	2010-04-19 22:52:32.000000000 +0000
++@@ -1238,6 +1238,11 @@
++ fi
++ fi;
++ 
+++# Check whether --enable-fltk or --disable-fltk was given.
+++if test "${enable_fltk+set}" = set; then
+++  enableval="$enable_fltk"
+++fi;
+++
++ 
++ # Check whether --with-docdir or --without-docdir was given.
++ if test "${with_docdir+set}" = set; then
++@@ -4904,36 +4909,38 @@
++ fi
++ 
++ 
++-# Extract the first word of "fltk-config", so it can be a program name with args.
++-set dummy fltk-config; ac_word=$2
++-echo "$as_me:$LINENO: checking for $ac_word" >&5
++-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
++-if test "${ac_cv_path_FLTKCONFIG+set}" = set; then
++-  echo $ECHO_N "(cached) $ECHO_C" >&6
++-else
++-  case $FLTKCONFIG in
++-  [\\/]* | ?:[\\/]*)
++-  ac_cv_path_FLTKCONFIG="$FLTKCONFIG" # Let the user override the test with a path.
++-  ;;
++-  *)
++-  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
++-for as_dir in $PATH
++-do
++-  IFS=$as_save_IFS
++-  test -z "$as_dir" && as_dir=.
++-  for ac_exec_ext in '' $ac_executable_extensions; do
++-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
++-    ac_cv_path_FLTKCONFIG="$as_dir/$ac_word$ac_exec_ext"
++-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++-    break 2
+++if eval "test x$enable_fltk = xyes"; then
+++  # Extract the first word of "fltk-config", so it can be a program name with args.
+++  set dummy fltk-config; ac_word=$2
+++  echo "$as_me:$LINENO: checking for $ac_word" >&5
+++  echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+++  if test "${ac_cv_path_FLTKCONFIG+set}" = set; then
+++    echo $ECHO_N "(cached) $ECHO_C" >&6
+++  else
+++    case $FLTKCONFIG in
+++    [\\/]* | ?:[\\/]*)
+++    ac_cv_path_FLTKCONFIG="$FLTKCONFIG" # Let the user override the test with a path.
+++    ;;
+++    *)
+++    as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+++  for as_dir in $PATH
+++  do
+++    IFS=$as_save_IFS
+++    test -z "$as_dir" && as_dir=.
+++    for ac_exec_ext in '' $ac_executable_extensions; do
+++    if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+++      ac_cv_path_FLTKCONFIG="$as_dir/$ac_word$ac_exec_ext"
+++      echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+++      break 2
+++    fi
+++  done
+++  done
+++  
+++    ;;
+++  esac
++   fi
++-done
++-done
++-
++-  ;;
++-esac
+++  FLTKCONFIG=$ac_cv_path_FLTKCONFIG
++ fi
++-FLTKCONFIG=$ac_cv_path_FLTKCONFIG
++ 
++ if test -n "$FLTKCONFIG"; then
++   echo "$as_me:$LINENO: result: $FLTKCONFIG" >&5
++@@ -4950,8 +4957,10 @@
++ 	INSTALL_GUIS=""
++ 	INSTALL_OSX=""
++ 
+++if eval "test x$enable_fltk = xyes"; then
++ 	{ echo "$as_me:$LINENO: WARNING: Sorry, setup GUI requires FLTK 1.1.x." >&5
++ echo "$as_me: WARNING: Sorry, setup GUI requires FLTK 1.1.x." >&2;}
+++fi
++ else
++ 	CXXFLAGS="`$FLTKCONFIG --cflags` ${CXXFLAGS}"
++ 	GUIS="setup uninst"
++diff -urN epm-3.7-old//deb.c epm-3.7/deb.c
++--- misc/epm-3.7/deb.c	2003-01-15 14:29:24.000000000 +0000
+++++ misc/build/epm-3.7/deb.c	2010-04-19 22:53:34.000000000 +0000
++@@ -26,6 +26,28 @@
++ 
++ #include "epm.h"
++ 
+++/*
+++ * 'add_size()' - Append Installed-Size tag to DEBIAN/control file
+++ */
+ + 
+-  # Check whether --with-docdir or --without-docdir was given.
+-  if test "${with_docdir+set}" = set; then
+-    withval="$with_docdir"
+-***************
+-*** 4904,4939 ****
+-  fi
+-  
+-  
+-! # Extract the first word of "fltk-config", so it can be a program name with args.
+-! set dummy fltk-config; ac_word=$2
+-! echo "$as_me:$LINENO: checking for $ac_word" >&5
+-! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+-! if test "${ac_cv_path_FLTKCONFIG+set}" = set; then
+-!   echo $ECHO_N "(cached) $ECHO_C" >&6
+-! else
+-!   case $FLTKCONFIG in
+-!   [\\/]* | ?:[\\/]*)
+-!   ac_cv_path_FLTKCONFIG="$FLTKCONFIG" # Let the user override the test with a path.
+-!   ;;
+-!   *)
+-!   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+-! for as_dir in $PATH
+-! do
+-!   IFS=$as_save_IFS
+-!   test -z "$as_dir" && as_dir=.
+-!   for ac_exec_ext in '' $ac_executable_extensions; do
+-!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+-!     ac_cv_path_FLTKCONFIG="$as_dir/$ac_word$ac_exec_ext"
+-!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+-!     break 2
+-    fi
+-! done
+-! done
+-! 
+-!   ;;
+-! esac
+-  fi
+-- FLTKCONFIG=$ac_cv_path_FLTKCONFIG
+-  
+-  if test -n "$FLTKCONFIG"; then
+-    echo "$as_me:$LINENO: result: $FLTKCONFIG" >&5
+---- 4909,4946 ----
+-  fi
+-  
+-  
+-! if eval "test x$enable_fltk = xyes"; then
+-!   # Extract the first word of "fltk-config", so it can be a program name with args.
+-!   set dummy fltk-config; ac_word=$2
+-!   echo "$as_me:$LINENO: checking for $ac_word" >&5
+-!   echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+-!   if test "${ac_cv_path_FLTKCONFIG+set}" = set; then
+-!     echo $ECHO_N "(cached) $ECHO_C" >&6
+-!   else
+-!     case $FLTKCONFIG in
+-!     [\\/]* | ?:[\\/]*)
+-!     ac_cv_path_FLTKCONFIG="$FLTKCONFIG" # Let the user override the test with a path.
+-!     ;;
+-!     *)
+-!     as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+-!   for as_dir in $PATH
+-!   do
+-!     IFS=$as_save_IFS
+-!     test -z "$as_dir" && as_dir=.
+-!     for ac_exec_ext in '' $ac_executable_extensions; do
+-!     if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+-!       ac_cv_path_FLTKCONFIG="$as_dir/$ac_word$ac_exec_ext"
+-!       echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+-!       break 2
+-!     fi
+-!   done
+-!   done
+-!   
+-!     ;;
+-!   esac
+-    fi
+-!   FLTKCONFIG=$ac_cv_path_FLTKCONFIG
+-  fi
+-  
+-  if test -n "$FLTKCONFIG"; then
+-    echo "$as_me:$LINENO: result: $FLTKCONFIG" >&5
+-***************
+-*** 4950,4957 ****
+---- 4957,4966 ----
+-  	INSTALL_GUIS=""
+-  	INSTALL_OSX=""
+-  
+-+ if eval "test x$enable_fltk = xyes"; then
+-  	{ echo "$as_me:$LINENO: WARNING: Sorry, setup GUI requires FLTK 1.1.x." >&5
+-  echo "$as_me: WARNING: Sorry, setup GUI requires FLTK 1.1.x." >&2;}
+-+ fi
+-  else
+-  	CXXFLAGS="`$FLTKCONFIG --cflags` ${CXXFLAGS}"
+-  	GUIS="setup uninst"
+-*** misc/epm-3.7/deb.c	Wed Jan 15 15:29:24 2003
+---- misc/build/epm-3.7/deb.c	Mon Nov 20 14:54:51 2006
+-***************
+-*** 26,31 ****
+---- 26,53 ----
+-  
+-  #include "epm.h"
+-  
+-+ /*
+-+  * 'add_size()' - Append Installed-Size tag to DEBIAN/control file
+-+  */
+++int                             /* O - 0 = success, 1 = fail */
+++add_size(FILE       *fpControl, /* Control file stream */
+++         const char *directory) /* Directory containing all files to package */
+++{
+++    FILE *fp;
+++    char command[1024];
+++    
+++    snprintf(command, sizeof(command), "du -k -s %s", directory);
+++    fp = popen(command, "r");
+++    if( NULL != fp )
+++    {
+++        char size[1024];
+++        fscanf(fp, "%s .", size);
+++        fprintf(fpControl, "Installed-Size: %s\n", size);
+++        return pclose(fp);
+++    }
+++    return 1;
+++}
++ 
++ /*
++  * 'make_deb()' - Make a Debian software distribution package.
++@@ -61,18 +83,37 @@
++   if (Verbosity)
++     puts("Creating Debian distribution...");
++ 
+++  /*
+++   * Use debian default naming scheme
+++   */
+++
+++  if (!strcmp(platform->machine, "intel"))
+++#ifdef __FreeBSD_kernel__
+++    platname = "kfreebsd-i386";
+++#else
+++    platname = "i386";
+++#endif
+++  else if (!strcmp(platform->machine, "x86_64"))
+++#ifdef __FreeBSD_kernel__
+++    platname = "kfreebsd-amd64";
+++#else
+++    platname = "amd64";
+++#endif
+++  else if (!strcmp(platform->machine, "ppc"))
+++    platname = "powerpc";
+++
++   if (dist->relnumber)
++   {
++     if (platname[0])
++-      snprintf(name, sizeof(name), "%s-%s-%d-%s", prodname, dist->version, dist->relnumber,
+++      snprintf(name, sizeof(name), "%s_%s-%d_%s", prodname, dist->version, dist->relnumber,
++               platname);
++     else
++-      snprintf(name, sizeof(name), "%s-%s-%d", prodname, dist->version, dist->relnumber);
+++      snprintf(name, sizeof(name), "%s_%s-%d", prodname, dist->version, dist->relnumber);
++   }
++   else if (platname[0])
++-    snprintf(name, sizeof(name), "%s-%s-%s", prodname, dist->version, platname);
+++    snprintf(name, sizeof(name), "%s_%s_%s", prodname, dist->version, platname);
++   else
++-    snprintf(name, sizeof(name), "%s-%s", prodname, dist->version);
+++    snprintf(name, sizeof(name), "%s_%s", prodname, dist->version);
++ 
++  /*
++   * Write the control file for DPKG...
++@@ -108,8 +141,20 @@
++   * (which we change in get_platform to a common name)
++   */
++ 
++-  if (strcmp(platform->machine, "intel") == 0)
+++  if (!strcmp(platform->machine, "intel"))
+++#ifdef __FreeBSD_kernel__
+++    fputs("Architecture: kfreebsd-i386\n", fp);
+++#else
++     fputs("Architecture: i386\n", fp);
+++#endif
+++  else if (!strcmp(platform->machine, "x86_64"))
+++#ifdef __FreeBSD_kernel__
+++    fputs("Architecture: kfreebsd-amd64\n", fp);
+++#else
+++    fputs("Architecture: amd64\n", fp);
+++#endif
+++  else if (!strcmp(platform->machine, "ppc"))
+++    fputs("Architecture: powerpc\n", fp);
++   else
++     fprintf(fp, "Architecture: %s\n", platform->machine);
++ 
++@@ -148,9 +193,9 @@
++       putc('\n', fp);
++     }
++   }
++-
+ +  
+-+ int                             /* O - 0 = success, 1 = fail */
+-+ add_size(FILE       *fpControl, /* Control file stream */
+-+          const char *directory) /* Directory containing all files to package */
+-+ {
+-+     FILE *fp;
+-+     char command[1024];
+-+     
+-+     snprintf(command, sizeof(command), "du -k -s %s", directory);
+-+     fp = popen(command, "r");
+-+     if( NULL != fp )
+-+     {
+-+         char size[1024];
+-+         fscanf(fp, "%s .", size);
+-+         fprintf(fpControl, "Installed-Size: %s\n", size);
+-+         return pclose(fp);
+-+     }
+-+     return 1;
+-+ }
+-  
++   fclose(fp);
++-
+++  
+   /*
+-   * 'make_deb()' - Make a Debian software distribution package.
+-***************
+-*** 61,78 ****
+-    if (Verbosity)
+-      puts("Creating Debian distribution...");
+-  
+-    if (dist->relnumber)
+-    {
+-      if (platname[0])
+-!       snprintf(name, sizeof(name), "%s-%s-%d-%s", prodname, dist->version, dist->relnumber,
+-                platname);
+-      else
+-!       snprintf(name, sizeof(name), "%s-%s-%d", prodname, dist->version, dist->relnumber);
+-    }
+-    else if (platname[0])
+-!     snprintf(name, sizeof(name), "%s-%s-%s", prodname, dist->version, platname);
+-    else
+-!     snprintf(name, sizeof(name), "%s-%s", prodname, dist->version);
+-  
+-   /*
+-    * Write the control file for DPKG...
+---- 83,111 ----
+-    if (Verbosity)
+-      puts("Creating Debian distribution...");
+-  
+-+   /*
+-+    * Use debian default naming scheme
+-+    */
++   * Write the preinst file for DPKG...
++   */
++@@ -417,6 +462,27 @@
++     }
++   }
++ 
+++  
+++  /* 
+++   * Calculate and append Installed-Size to DEBIAN/control
+++   */
+++   
+++  if (Verbosity)
+++    puts("Calculating Installed-Size...");
+++  
+++  snprintf(filename, sizeof(filename), "%s/%s/DEBIAN/control", directory, name);
+++  if ((fp = fopen(filename, "a")) == NULL)
+++  {
+++    fprintf(stderr, "epm: Unable to Installed-Size to file \"%s\" - %s\n", filename,
+++            strerror(errno));
+++    return (1);
+++  }
+++
+++  snprintf(filename, sizeof(filename), "%s/%s", directory, name);  
+++  add_size(fp, filename);
+++  fclose(fp);
+ + 
+-+   if (!strcmp(platform->machine, "intel"))
+-+     platname = "i386";
+-+   else if (!strcmp(platform->machine, "x86_64"))
+-+     platname = "amd64";
+-+   else if (!strcmp(platform->machine, "ppc"))
+-+     platname = "powerpc";
+-+ 
+-    if (dist->relnumber)
+-    {
+-      if (platname[0])
+-!       snprintf(name, sizeof(name), "%s_%s-%d_%s", prodname, dist->version, dist->relnumber,
+-                platname);
+-      else
+-!       snprintf(name, sizeof(name), "%s_%s-%d", prodname, dist->version, dist->relnumber);
+-    }
+-    else if (platname[0])
+-!     snprintf(name, sizeof(name), "%s_%s_%s", prodname, dist->version, platname);
+-    else
+-!     snprintf(name, sizeof(name), "%s_%s", prodname, dist->version);
+-  
+-   /*
+-    * Write the control file for DPKG...
+-***************
+-*** 108,115 ****
+-    * (which we change in get_platform to a common name)
+-    */
+-  
+-!   if (strcmp(platform->machine, "intel") == 0)
+-      fputs("Architecture: i386\n", fp);
+-    else
+-      fprintf(fp, "Architecture: %s\n", platform->machine);
+-  
+---- 141,152 ----
+-    * (which we change in get_platform to a common name)
+-    */
+-  
+-!   if (!strcmp(platform->machine, "intel"))
+-      fputs("Architecture: i386\n", fp);
+-+   else if (!strcmp(platform->machine, "x86_64"))
+-+     fputs("Architecture: amd64\n", fp);
+-+   else if (!strcmp(platform->machine, "ppc"))
+-+     fputs("Architecture: powerpc\n", fp);
+-    else
+-      fprintf(fp, "Architecture: %s\n", platform->machine);
+-  
+-***************
+-*** 148,156 ****
+-        putc('\n', fp);
+-      }
+-    }
+-! 
+-    fclose(fp);
+-! 
+-   /*
+-    * Write the preinst file for DPKG...
+-    */
+---- 185,193 ----
+-        putc('\n', fp);
+-      }
+-    }
+-!   
+-    fclose(fp);
+-!   
+-   /*
+-    * Write the preinst file for DPKG...
+-    */
+-***************
+-*** 417,422 ****
+---- 454,480 ----
+-      }
+-    }
+-  
+-+   
+-+   /* 
+-+    * Calculate and append Installed-Size to DEBIAN/control
+-+    */
+-+    
+-+   if (Verbosity)
+-+     puts("Calculating Installed-Size...");
+-+   
+-+   snprintf(filename, sizeof(filename), "%s/%s/DEBIAN/control", directory, name);
+-+   if ((fp = fopen(filename, "a")) == NULL)
+-+   {
+-+     fprintf(stderr, "epm: Unable to Installed-Size to file \"%s\" - %s\n", filename,
+-+             strerror(errno));
+-+     return (1);
+-+   }
+-+ 
+-+   snprintf(filename, sizeof(filename), "%s/%s", directory, name);  
+-+   add_size(fp, filename);
+-+   fclose(fp);
+-+  
+-+ 
+-   /*
+-    * Build the distribution from the spec file...
+-    */
+-*** misc/epm-3.7/dist.c	Thu Aug  7 16:14:40 2003
+---- misc/build/epm-3.7/dist.c	Mon Nov 20 14:54:51 2006
+-***************
+-*** 394,401 ****
+-    strcpy(platform->machine, "mips");
+-  #elif defined(__hpux)
+-    strcpy(platform->machine, "hppa");
+-! #elif defined(_AIX) || defined(__APPLE__)
+-    strcpy(platform->machine, "powerpc");
+-  #else
+-    for (temp = platform->machine; *temp != '\0'; temp ++)
+-      if (*temp == '-' || *temp == '_')
+---- 394,406 ----
+-    strcpy(platform->machine, "mips");
+-  #elif defined(__hpux)
+-    strcpy(platform->machine, "hppa");
+-! #elif defined(_AIX)
+-    strcpy(platform->machine, "powerpc");
+-+ #elif defined(__APPLE__)
+-+   if (strstr(platform->machine, "86") != NULL)
+-+     strcpy(platform->machine, "intel");
+-+   else
+-+     strcpy(platform->machine, "powerpc");  
+-  #else
+-    for (temp = platform->machine; *temp != '\0'; temp ++)
+-      if (*temp == '-' || *temp == '_')
+-***************
+-*** 407,413 ****
+-        *temp = tolower(*temp);
+-  
+-    if (strstr(platform->machine, "86") != NULL)
+-!     strcpy(platform->machine, "intel");
+-    else if (strncmp(platform->machine, "sun", 3) == 0)
+-      strcpy(platform->machine, "sparc");
+-  #endif /* __sgi */
+---- 412,423 ----
+-        *temp = tolower(*temp);
+-  
+-    if (strstr(platform->machine, "86") != NULL)
+-!   {
+-!     if (strstr(platform->machine, "64") != NULL)
+-!       strcpy(platform->machine, "x86_64");
+-!     else
+-!       strcpy(platform->machine, "intel");
+-!   }
+-    else if (strncmp(platform->machine, "sun", 3) == 0)
+-      strcpy(platform->machine, "sparc");
+-  #endif /* __sgi */
+-*** misc/epm-3.7/epm.c	Tue Oct 28 15:48:30 2003
+---- misc/build/epm-3.7/epm.c	Mon Nov 20 14:54:51 2006
+-***************
+-*** 547,552 ****
+---- 547,553 ----
+-  {
+-    puts(EPM_VERSION);
+-    puts("Copyright 1999-2003 by Easy Software Products.");
+-+   puts("Patched for OpenOffice.org");
+-    puts("");
+-    puts("EPM is free software and comes with ABSOLUTELY NO WARRANTY; for details");
+-    puts("see the GNU General Public License in the file COPYING or at");
+-*** misc/epm-3.7/file.c	Wed Jul 23 23:41:08 2003
+---- misc/build/epm-3.7/file.c	Mon Nov 20 14:54:51 2006
+-***************
+-*** 108,114 ****
+-    fclose(dstfile);
+-  
+-    chmod(dst, mode);
+--   chown(dst, owner, group);
+-  
+-    return (0);
+-  }
+---- 108,113 ----
+-***************
+-*** 138,144 ****
+-        {
+-  	mkdir(buffer, 0777);
+-  	chmod(buffer, mode | 0700);
+-- 	chown(buffer, owner, group);
+-        }
+-      }
+-  
+---- 137,142 ----
+-***************
+-*** 151,157 ****
+-    {
+-      mkdir(buffer, 0777);
+-      chmod(buffer, mode | 0700);
+--     chown(buffer, owner, group);
+-    }
+-  
+-    return (0);
+---- 149,154 ----
+-*** misc/epm-3.7/osx.c	Wed Jul 23 23:41:08 2003
+---- misc/build/epm-3.7/osx.c	Mon Nov 20 14:54:51 2006
+-***************
+-*** 373,379 ****
+-    else
+-      snprintf(filename, sizeof(filename), "%s/%s", current, directory);
+-  
+-!   run_command(NULL, "/Developer/Applications/PackageMaker.app/"
+-                      "Contents/MacOS/PackageMaker -build "
+-  		    "-p %s/%s.pkg -f %s/Package -r %s/Resources -d %s/%s-desc.plist -i %s/%s-info.plist",
+-  	      filename, prodname, filename, filename, filename, prodname, filename, prodname);
+---- 373,379 ----
+-    else
+-      snprintf(filename, sizeof(filename), "%s/%s", current, directory);
+-  
+-!   run_command(NULL, "/Developer/Applications/Utilities/PackageMaker.app/"
+-                      "Contents/MacOS/PackageMaker -build "
+-  		    "-p %s/%s.pkg -f %s/Package -r %s/Resources -d %s/%s-desc.plist -i %s/%s-info.plist",
+-  	      filename, prodname, filename, filename, filename, prodname, filename, prodname);
+-*** misc/epm-3.7/pkg.c	Tue Dec 17 19:57:56 2002
+---- misc/build/epm-3.7/pkg.c	Mon Nov 20 14:54:51 2006
+-***************
+-*** 429,503 ****
+-  
+-    fclose(fp);
+-  
+--  /*
+--   * Build the distribution from the prototype file...
+--   */
+-- 
+--   if (Verbosity)
+--     puts("Building PKG binary distribution...");
+-- 
+--   if (run_command(NULL, "pkgmk -o -f %s/%s.prototype -d %s/%s",
+--                   directory, prodname, current, directory))
+--     return (1);
+-- 
+--  /*
+--   * Tar and compress the distribution...
+--   */
+-- 
+--   if (Verbosity)
+--     puts("Creating tar.gz file for distribution...");
+-- 
+--   snprintf(filename, sizeof(filename), "%s/%s.tar.gz", directory, name);
+-- 
+--   if ((tarfile = tar_open(filename, 1)) == NULL)
+--     return (1);
+-- 
+--   snprintf(filename, sizeof(filename), "%s/%s", directory, prodname);
+-- 
+--   if (tar_directory(tarfile, filename, prodname))
+--   {
+--     tar_close(tarfile);
+--     return (1);
+--   }
+-- 
+--   tar_close(tarfile);
+-- 
+--  /*
+--   * Make a package stream file...
+--   */
+-- 
+--   if (Verbosity)
+--     puts("Copying into package stream file...");
+-- 
+--   if (run_command(directory, "pkgtrans -s %s/%s %s.pkg %s",
+--                   current, directory, name, prodname))
+--     return (1);
+-- 
+--  /*
+--   * Remove temporary files...
+--   */
+-- 
+--   if (!KeepFiles)
+--   {
+--     if (Verbosity)
+--       puts("Removing temporary distribution files...");
+-- 
+--     snprintf(filename, sizeof(filename), "%s/%s.pkginfo", directory, prodname);
+--     unlink(filename);
+--     snprintf(filename, sizeof(filename), "%s/%s.depend", directory, prodname);
+--     unlink(filename);
+--     snprintf(filename, sizeof(filename), "%s/%s.prototype", directory, prodname);
+--     unlink(filename);
+--     if (preinstall[0])
+--       unlink(preinstall);
+--     if (postinstall[0])
+--       unlink(postinstall);
+--     if (preremove[0])
+--       unlink(preremove);
+--     if (postremove[0])
+--       unlink(postremove);
+--   }
+-- 
+-    return (0);
+-  }
+-  
+---- 429,434 ----
+-*** misc/epm-3.7/qprintf.c	Mon Jan 27 22:48:03 2003
+---- misc/build/epm-3.7/qprintf.c	Mon Nov 20 14:54:51 2006
+-***************
+-*** 181,192 ****
+-  
+-              for (i = slen; i > 0; i --, s ++, bytes ++)
+-  	    {
+-  	      if (strchr("`~!#$%^&*()[{]}\\|;\'\"<>? ", *s))
+-  	      {
+-  	        putc('\\', fp);
+-  		bytes ++;
+-  	      }
+-! 
+-  	      putc(*s, fp);
+-  	    }
+-  
+---- 181,199 ----
+-  
+-              for (i = slen; i > 0; i --, s ++, bytes ++)
+-  	    {
+-+ #if defined(__FreeBSD__)
+-+ 	      if (strchr("`~!#%^&*()[{]}\\|;\'\"<>? ", *s))
+-+ 	      {
+-+ 	        putc('\\', fp);
+-+ 		bytes ++;
+-+ 	      }
+-+ #else
+-  	      if (strchr("`~!#$%^&*()[{]}\\|;\'\"<>? ", *s))
+-  	      {
+-  	        putc('\\', fp);
+-  		bytes ++;
+-  	      }
+-! #endif
+-  	      putc(*s, fp);
+-  	    }
+-  
+-*** misc/epm-3.7/rpm.c	Wed Oct  1 21:27:15 2003
+---- misc/build/epm-3.7/rpm.c	Mon Nov 20 14:54:51 2006
+-***************
+-*** 38,44 ****
+-           dist_t         *dist,		/* I - Distribution information */
+-  	 struct utsname *platform)	/* I - Platform information */
+-  {
+-!   int		i;			/* Looping var */
+-    FILE		*fp;			/* Spec file */
+-    char		name[1024];		/* Full product name */
+-    char		specname[1024];		/* Spec filename */
+---- 38,44 ----
+-           dist_t         *dist,		/* I - Distribution information */
+-  	 struct utsname *platform)	/* I - Platform information */
+-  {
+-!   int		i,n;			/* Looping vars */
+-    FILE		*fp;			/* Spec file */
+-    char		name[1024];		/* Full product name */
+-    char		specname[1024];		/* Spec filename */
+-***************
+-*** 160,165 ****
+---- 160,167 ----
+-        fprintf(fp, "Requires: %s", dname);
+-      else if (d->type == DEPEND_PROVIDES)
+-        fprintf(fp, "Provides: %s", dname);
+-+     else if (d->type == DEPEND_REPLACES)
+-+       fprintf(fp, "Obsoletes: %s", dname);
+-      else
+-        fprintf(fp, "Conflicts: %s", dname);
+-  
+-***************
+-*** 186,200 ****
+-    for (i = 0; i < dist->num_descriptions; i ++)
+-      fprintf(fp, "%s\n", dist->descriptions[i]);
+-  
+-!   fputs("%pre\n", fp);
+-    for (i = dist->num_commands, c = dist->commands; i > 0; i --, c ++)
+-      if (c->type == COMMAND_PRE_INSTALL)
+-        fprintf(fp, "%s\n", c->command);
+-  
+-!   fputs("%post\n", fp);
+-    for (i = dist->num_commands, c = dist->commands; i > 0; i --, c ++)
+-      if (c->type == COMMAND_POST_INSTALL)
+-        fprintf(fp, "%s\n", c->command);
+-  
+-    for (i = dist->num_files, file = dist->files; i > 0; i --, file ++)
+-      if (tolower(file->type) == 'i')
+---- 188,220 ----
+-    for (i = 0; i < dist->num_descriptions; i ++)
+-      fprintf(fp, "%s\n", dist->descriptions[i]);
+-  
+-!   /*
+-!    * %pre
+-!    */
+-!   n = 0;
+-    for (i = dist->num_commands, c = dist->commands; i > 0; i --, c ++)
+-+   {
+-      if (c->type == COMMAND_PRE_INSTALL)
+-+     {
+-+       if (1 == ++n)  /* Only write %pre if there is at least one command */
+-+         fputs("%pre\n", fp);
+-        fprintf(fp, "%s\n", c->command);
+-+     }
+-+   }
+-  
+-!   /*
+-!    * %post
+-!    */
+-!   n = 0;
+-    for (i = dist->num_commands, c = dist->commands; i > 0; i --, c ++)
+-+   {
+-      if (c->type == COMMAND_POST_INSTALL)
+-+     {
+-+       if (1 == ++n)  /* Only write %post if there is at least one command */
+-+         fputs("%post\n", fp);
+-        fprintf(fp, "%s\n", c->command);
+-+     }
+-+   }
+-  
+-    for (i = dist->num_files, file = dist->files; i > 0; i --, file ++)
+-      if (tolower(file->type) == 'i')
+-***************
+-*** 202,207 ****
+---- 222,229 ----
+-  
+-    if (i)
+-    {
+-+     if (1 == ++n)  /* If not previously done so, write %post here */
+-+       fputs("%post\n", fp);
+-      fputs("if test \"x$1\" = x1; then\n", fp);
+-      fputs("	echo Setting up init scripts...\n", fp);
+-  
+-***************
+-*** 259,265 ****
+-      fputs("fi\n", fp);
+-    }
+-  
+-!   fputs("%preun\n", fp);
+-    for (i = dist->num_files, file = dist->files; i > 0; i --, file ++)
+-      if (tolower(file->type) == 'i')
+-        break;
+---- 281,290 ----
+-      fputs("fi\n", fp);
+-    }
+-  
+-!   /*
+-!    * %preun
+-!    */
+-!   n = 0;
+-    for (i = dist->num_files, file = dist->files; i > 0; i --, file ++)
+-      if (tolower(file->type) == 'i')
+-        break;
+-***************
+-*** 266,271 ****
+---- 291,297 ----
+-  
+-    if (i)
+-    {
+-+     fputs("%preun\n", fp); ++n; /* Need to write %preun here */
+-      fputs("if test \"x$1\" = x0; then\n", fp);
+-      fputs("	echo Cleaning up init scripts...\n", fp);
+-  
+-***************
+-*** 315,327 ****
+-    }
+-  
+-    for (i = dist->num_commands, c = dist->commands; i > 0; i --, c ++)
+-      if (c->type == COMMAND_PRE_REMOVE)
+-        fprintf(fp, "%s\n", c->command);
+-  
+-!   fputs("%postun\n", fp);
+-    for (i = dist->num_commands, c = dist->commands; i > 0; i --, c ++)
+-      if (c->type == COMMAND_POST_REMOVE)
+-        fprintf(fp, "%s\n", c->command);
+-  
+-    fputs("%files\n", fp);
+-    for (i = dist->num_files, file = dist->files; i > 0; i --, file ++)
+---- 341,369 ----
+-    }
+-  
+-    for (i = dist->num_commands, c = dist->commands; i > 0; i --, c ++)
+-+   {
+-      if (c->type == COMMAND_PRE_REMOVE)
+-+     {
+-+       if (1 == ++n)  /* Only write %preun if not previously done so */
+-+         fputs("%preun\n", fp);
+-+ 	    
+-        fprintf(fp, "%s\n", c->command);
+-+     }
+-+   }
+-  
+-!   /*
+-!    * %post
+-!    */
+-!   n = 0;
+-    for (i = dist->num_commands, c = dist->commands; i > 0; i --, c ++)
+-+   {
+-      if (c->type == COMMAND_POST_REMOVE)
+-+     {
+-+       if (1 == ++n)  /* Only write %post if there is at least one command */
+-+         fputs("%postun\n", fp);
+-        fprintf(fp, "%s\n", c->command);
+-+     }
+-+   }
+-  
+-    fputs("%files\n", fp);
+-    for (i = dist->num_files, file = dist->files; i > 0; i --, file ++)
+-***************
+-*** 415,467 ****
+-      }
+-    }
+-  
+--  /*
+--   * Build the distribution from the spec file...
+--   */
+-- 
+--   if (Verbosity)
+--     puts("Building RPM binary distribution...");
+-- 
+--   if (strcmp(platform->machine, "intel") == 0)
+--   {
+--     if (run_command(NULL, EPM_RPMBUILD " %s -bb " EPM_RPMARCH "i386 %s",
+--                     Verbosity == 0 ? "--quiet" : "", specname))
+--       return (1);
+--   }
+--   else if (run_command(NULL, EPM_RPMBUILD " %s -bb " EPM_RPMARCH "%s %s",
+--                        Verbosity == 0 ? "--quiet" : "", platform->machine,
+-- 		       specname))
+--     return (1);
+-- 
+--  /*
+--   * Move the RPM to the local directory and rename the RPM using the
+--   * product name specified by the user...
+--   */
+-- 
+--   if (strcmp(platform->machine, "intel") == 0)
+--     run_command(NULL, "/bin/mv %s/RPMS/i386/%s-%s-%d.i386.rpm %s/%s.rpm",
+--         	rpmdir, prodname, dist->version, dist->relnumber,
+-- 		directory, name);
+--   else
+--     run_command(NULL, "/bin/mv %s/RPMS/%s/%s-%s-%d.%s.rpm %s/%s.rpm",
+--         	rpmdir, platform->machine, prodname, dist->version,
+-- 		dist->relnumber, platform->machine, directory, name);
+-- 
+--  /*
+--   * Remove temporary files...
+--   */
+-- 
+--   if (!KeepFiles)
+--   {
+--     if (Verbosity)
+--       puts("Removing temporary distribution files...");
+-- 
+--     run_command(NULL, "/bin/rm -rf %s/RPMS", directory);
+--     run_command(NULL, "/bin/rm -rf %s/buildroot", directory);
+-- 
+--     unlink(specname);
+--   }
+-- 
+-    return (0);
+-  }
+-  
+---- 457,462 ----
+++
++  /*
++   * Build the distribution from the spec file...
++   */
++diff -urN epm-3.7-old//dist.c epm-3.7/dist.c
++--- misc/epm-3.7/dist.c	2003-08-07 14:14:40.000000000 +0000
+++++ misc/build/epm-3.7/dist.c	2010-04-19 22:52:32.000000000 +0000
++@@ -394,8 +394,13 @@
++   strcpy(platform->machine, "mips");
++ #elif defined(__hpux)
++   strcpy(platform->machine, "hppa");
++-#elif defined(_AIX) || defined(__APPLE__)
+++#elif defined(_AIX)
++   strcpy(platform->machine, "powerpc");
+++#elif defined(__APPLE__)
+++  if (strstr(platform->machine, "86") != NULL)
+++    strcpy(platform->machine, "intel");
+++  else
+++    strcpy(platform->machine, "powerpc");  
++ #else
++   for (temp = platform->machine; *temp != '\0'; temp ++)
++     if (*temp == '-' || *temp == '_')
++@@ -407,7 +412,12 @@
++       *temp = tolower(*temp);
++ 
++   if (strstr(platform->machine, "86") != NULL)
++-    strcpy(platform->machine, "intel");
+++  {
+++    if (strstr(platform->machine, "64") != NULL)
+++      strcpy(platform->machine, "x86_64");
+++    else
+++      strcpy(platform->machine, "intel");
+++  }
++   else if (strncmp(platform->machine, "sun", 3) == 0)
++     strcpy(platform->machine, "sparc");
++ #endif /* __sgi */
++diff -urN epm-3.7-old//epm.c epm-3.7/epm.c
++--- misc/epm-3.7/epm.c	2003-10-28 14:48:30.000000000 +0000
+++++ misc/build/epm-3.7/epm.c	2010-04-19 22:52:32.000000000 +0000
++@@ -547,6 +547,7 @@
++ {
++   puts(EPM_VERSION);
++   puts("Copyright 1999-2003 by Easy Software Products.");
+++  puts("Patched for OpenOffice.org");
++   puts("");
++   puts("EPM is free software and comes with ABSOLUTELY NO WARRANTY; for details");
++   puts("see the GNU General Public License in the file COPYING or at");
++diff -urN epm-3.7-old//file.c epm-3.7/file.c
++--- misc/epm-3.7/file.c	2003-07-23 21:41:08.000000000 +0000
+++++ misc/build/epm-3.7/file.c	2010-04-19 22:52:32.000000000 +0000
++@@ -108,7 +108,6 @@
++   fclose(dstfile);
++ 
++   chmod(dst, mode);
++-  chown(dst, owner, group);
++ 
++   return (0);
++ }
++@@ -138,7 +137,6 @@
++       {
++ 	mkdir(buffer, 0777);
++ 	chmod(buffer, mode | 0700);
++-	chown(buffer, owner, group);
++       }
++     }
++ 
++@@ -151,7 +149,6 @@
++   {
++     mkdir(buffer, 0777);
++     chmod(buffer, mode | 0700);
++-    chown(buffer, owner, group);
++   }
++ 
++   return (0);
++diff -urN epm-3.7-old//osx.c epm-3.7/osx.c
++--- misc/epm-3.7/osx.c	2003-07-23 21:41:08.000000000 +0000
+++++ misc/build/epm-3.7/osx.c	2010-04-19 22:52:32.000000000 +0000
++@@ -373,7 +373,7 @@
++   else
++     snprintf(filename, sizeof(filename), "%s/%s", current, directory);
++ 
++-  run_command(NULL, "/Developer/Applications/PackageMaker.app/"
+++  run_command(NULL, "/Developer/Applications/Utilities/PackageMaker.app/"
++                     "Contents/MacOS/PackageMaker -build "
++ 		    "-p %s/%s.pkg -f %s/Package -r %s/Resources -d %s/%s-desc.plist -i %s/%s-info.plist",
++ 	      filename, prodname, filename, filename, filename, prodname, filename, prodname);
++diff -urN epm-3.7-old//pkg.c epm-3.7/pkg.c
++--- misc/epm-3.7/pkg.c	2002-12-17 18:57:56.000000000 +0000
+++++ misc/build/epm-3.7/pkg.c	2010-04-19 22:52:32.000000000 +0000
++@@ -429,75 +429,6 @@
++ 
++   fclose(fp);
++ 
++- /*
++-  * Build the distribution from the prototype file...
++-  */
++-
++-  if (Verbosity)
++-    puts("Building PKG binary distribution...");
++-
++-  if (run_command(NULL, "pkgmk -o -f %s/%s.prototype -d %s/%s",
++-                  directory, prodname, current, directory))
++-    return (1);
++-
++- /*
++-  * Tar and compress the distribution...
++-  */
++-
++-  if (Verbosity)
++-    puts("Creating tar.gz file for distribution...");
++-
++-  snprintf(filename, sizeof(filename), "%s/%s.tar.gz", directory, name);
++-
++-  if ((tarfile = tar_open(filename, 1)) == NULL)
++-    return (1);
++-
++-  snprintf(filename, sizeof(filename), "%s/%s", directory, prodname);
++-
++-  if (tar_directory(tarfile, filename, prodname))
++-  {
++-    tar_close(tarfile);
++-    return (1);
++-  }
++-
++-  tar_close(tarfile);
++-
++- /*
++-  * Make a package stream file...
++-  */
++-
++-  if (Verbosity)
++-    puts("Copying into package stream file...");
++-
++-  if (run_command(directory, "pkgtrans -s %s/%s %s.pkg %s",
++-                  current, directory, name, prodname))
++-    return (1);
++-
++- /*
++-  * Remove temporary files...
++-  */
++-
++-  if (!KeepFiles)
++-  {
++-    if (Verbosity)
++-      puts("Removing temporary distribution files...");
++-
++-    snprintf(filename, sizeof(filename), "%s/%s.pkginfo", directory, prodname);
++-    unlink(filename);
++-    snprintf(filename, sizeof(filename), "%s/%s.depend", directory, prodname);
++-    unlink(filename);
++-    snprintf(filename, sizeof(filename), "%s/%s.prototype", directory, prodname);
++-    unlink(filename);
++-    if (preinstall[0])
++-      unlink(preinstall);
++-    if (postinstall[0])
++-      unlink(postinstall);
++-    if (preremove[0])
++-      unlink(preremove);
++-    if (postremove[0])
++-      unlink(postremove);
++-  }
++-
++   return (0);
++ }
++ 
++diff -urN epm-3.7-old//qprintf.c epm-3.7/qprintf.c
++--- misc/epm-3.7-old/qprintf.c	2003-01-27 21:48:03.000000000 +0000
+++++ misc/build/epm-3.7/qprintf.c	2010-04-19 22:52:32.000000000 +0000
++@@ -181,12 +181,19 @@
++ 
++             for (i = slen; i > 0; i --, s ++, bytes ++)
++ 	    {
+++#if defined(__FreeBSD__)
+++	      if (strchr("`~!#%^&*()[{]}\\|;\'\"<>? ", *s))
+++	      {
+++	        putc('\\', fp);
+++		bytes ++;
+++	      }
+++#else
++ 	      if (strchr("`~!#$%^&*()[{]}\\|;\'\"<>? ", *s))
++ 	      {
++ 	        putc('\\', fp);
++ 		bytes ++;
++ 	      }
++-
+++#endif
++ 	      putc(*s, fp);
++ 	    }
++ 
++diff -urN epm-3.7-old//rpm.c epm-3.7/rpm.c
++--- misc/epm-3.7/rpm.c	2003-10-01 19:27:15.000000000 +0000
+++++ misc/build/epm-3.7/rpm.c	2010-04-19 22:52:32.000000000 +0000
++@@ -38,7 +38,7 @@
++          dist_t         *dist,		/* I - Distribution information */
++ 	 struct utsname *platform)	/* I - Platform information */
++ {
++-  int		i;			/* Looping var */
+++  int		i,n;			/* Looping vars */
++   FILE		*fp;			/* Spec file */
++   char		name[1024];		/* Full product name */
++   char		specname[1024];		/* Spec filename */
++@@ -160,6 +160,8 @@
++       fprintf(fp, "Requires: %s", dname);
++     else if (d->type == DEPEND_PROVIDES)
++       fprintf(fp, "Provides: %s", dname);
+++    else if (d->type == DEPEND_REPLACES)
+++      fprintf(fp, "Obsoletes: %s", dname);
++     else
++       fprintf(fp, "Conflicts: %s", dname);
++ 
++@@ -186,15 +188,33 @@
++   for (i = 0; i < dist->num_descriptions; i ++)
++     fprintf(fp, "%s\n", dist->descriptions[i]);
++ 
++-  fputs("%pre\n", fp);
+++  /*
+++   * %pre
+++   */
+++  n = 0;
++   for (i = dist->num_commands, c = dist->commands; i > 0; i --, c ++)
+++  {
++     if (c->type == COMMAND_PRE_INSTALL)
+++    {
+++      if (1 == ++n)  /* Only write %pre if there is at least one command */
+++        fputs("%pre\n", fp);
++       fprintf(fp, "%s\n", c->command);
+++    }
+++  }
++ 
++-  fputs("%post\n", fp);
+++  /*
+++   * %post
+++   */
+++  n = 0;
++   for (i = dist->num_commands, c = dist->commands; i > 0; i --, c ++)
+++  {
++     if (c->type == COMMAND_POST_INSTALL)
+++    {
+++      if (1 == ++n)  /* Only write %post if there is at least one command */
+++        fputs("%post\n", fp);
++       fprintf(fp, "%s\n", c->command);
+++    }
+++  }
++ 
++   for (i = dist->num_files, file = dist->files; i > 0; i --, file ++)
++     if (tolower(file->type) == 'i')
++@@ -202,6 +222,8 @@
++ 
++   if (i)
++   {
+++    if (1 == ++n)  /* If not previously done so, write %post here */
+++      fputs("%post\n", fp);
++     fputs("if test \"x$1\" = x1; then\n", fp);
++     fputs("	echo Setting up init scripts...\n", fp);
++ 
++@@ -259,13 +281,17 @@
++     fputs("fi\n", fp);
++   }
++ 
++-  fputs("%preun\n", fp);
+++  /*
+++   * %preun
+++   */
+++  n = 0;
++   for (i = dist->num_files, file = dist->files; i > 0; i --, file ++)
++     if (tolower(file->type) == 'i')
++       break;
++ 
++   if (i)
++   {
+++    fputs("%preun\n", fp); ++n; /* Need to write %preun here */
++     fputs("if test \"x$1\" = x0; then\n", fp);
++     fputs("	echo Cleaning up init scripts...\n", fp);
++ 
++@@ -315,13 +341,29 @@
++   }
++ 
++   for (i = dist->num_commands, c = dist->commands; i > 0; i --, c ++)
+++  {
++     if (c->type == COMMAND_PRE_REMOVE)
+++    {
+++      if (1 == ++n)  /* Only write %preun if not previously done so */
+++        fputs("%preun\n", fp);
+++	    
++       fprintf(fp, "%s\n", c->command);
+++    }
+++  }
++ 
++-  fputs("%postun\n", fp);
+++  /*
+++   * %post
+++   */
+++  n = 0;
++   for (i = dist->num_commands, c = dist->commands; i > 0; i --, c ++)
+++  {
++     if (c->type == COMMAND_POST_REMOVE)
+++    {
+++      if (1 == ++n)  /* Only write %post if there is at least one command */
+++        fputs("%postun\n", fp);
++       fprintf(fp, "%s\n", c->command);
+++    }
+++  }
++ 
++   fputs("%files\n", fp);
++   for (i = dist->num_files, file = dist->files; i > 0; i --, file ++)
++@@ -415,53 +457,6 @@
++     }
++   }
++ 
++- /*
++-  * Build the distribution from the spec file...
++-  */
++-
++-  if (Verbosity)
++-    puts("Building RPM binary distribution...");
++-
++-  if (strcmp(platform->machine, "intel") == 0)
++-  {
++-    if (run_command(NULL, EPM_RPMBUILD " %s -bb " EPM_RPMARCH "i386 %s",
++-                    Verbosity == 0 ? "--quiet" : "", specname))
++-      return (1);
++-  }
++-  else if (run_command(NULL, EPM_RPMBUILD " %s -bb " EPM_RPMARCH "%s %s",
++-                       Verbosity == 0 ? "--quiet" : "", platform->machine,
++-		       specname))
++-    return (1);
++-
++- /*
++-  * Move the RPM to the local directory and rename the RPM using the
++-  * product name specified by the user...
++-  */
++-
++-  if (strcmp(platform->machine, "intel") == 0)
++-    run_command(NULL, "/bin/mv %s/RPMS/i386/%s-%s-%d.i386.rpm %s/%s.rpm",
++-        	rpmdir, prodname, dist->version, dist->relnumber,
++-		directory, name);
++-  else
++-    run_command(NULL, "/bin/mv %s/RPMS/%s/%s-%s-%d.%s.rpm %s/%s.rpm",
++-        	rpmdir, platform->machine, prodname, dist->version,
++-		dist->relnumber, platform->machine, directory, name);
++-
++- /*
++-  * Remove temporary files...
++-  */
++-
++-  if (!KeepFiles)
++-  {
++-    if (Verbosity)
++-      puts("Removing temporary distribution files...");
++-
++-    run_command(NULL, "/bin/rm -rf %s/RPMS", directory);
++-    run_command(NULL, "/bin/rm -rf %s/buildroot", directory);
++-
++-    unlink(specname);
++-  }
++-
++   return (0);
++ }
++ 
