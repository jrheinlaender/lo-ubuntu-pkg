Index: libreoffice-3.3.2/libreoffice-build/patches/dev300/do-not-switch-workspaces-of-wm.diff
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ libreoffice-3.3.2/libreoffice-build/patches/dev300/do-not-switch-workspaces-of-wm.diff	2011-03-22 14:17:45.571328827 +0100
@@ -0,0 +1,157 @@
+
+# HG changeset patch
+# User Philipp Lohmann [pl] <Philipp.Lohmann@Oracle.COM>
+# Date 1288021264 -7200
+# Node ID 173e68c517835e500f593456da9bab11365863e2
+# Parent  59f9607c035c6354ffc8b0389698cb98d2700c16
+vcl116: #i96684# optionally do not switch workspaces of WM
+
+diff -r 59f9607c035c -r 173e68c51783 vcl/unx/inc/wmadaptor.hxx
+--- vcl/unx/inc/wmadaptor.hxx	Fri Oct 22 12:40:16 2010 +0200
++++ vcl/unx/inc/wmadaptor.hxx	Mon Oct 25 17:41:04 2010 +0200
+@@ -165,6 +165,8 @@
+     bool                    m_bLegacyPartialFullscreen;
+     int						m_nWinGravity;
+     int						m_nInitWinGravity;
++    bool                    m_bWMshouldSwitchWorkspace;
++    bool                    m_bWMshouldSwitchWorkspaceInit;
+ 
+     WMAdaptor( SalDisplay * )
+ ;
+@@ -177,6 +179,7 @@
+      */
+     virtual bool isValid() const;
+ 
++    bool getWMshouldSwitchWorkspace() const;
+ public:
+     virtual ~WMAdaptor();
+ 
+@@ -214,8 +217,9 @@
+     
+     /*
+      * attemp to switch the desktop to a certain workarea
++     * if bConsiderWM is true, then on some WMs the call will not result in any action
+      */
+-    void switchToWorkArea( int nWorkArea ) const;
++    void switchToWorkArea( int nWorkArea, bool bConsiderWM = true ) const;
+     
+     /*
+      *  sets window title
+diff -r 59f9607c035c -r 173e68c51783 vcl/unx/source/app/wmadaptor.cxx
+--- vcl/unx/source/app/wmadaptor.cxx	Fri Oct 22 12:40:16 2010 +0200
++++ vcl/unx/source/app/wmadaptor.cxx	Mon Oct 25 17:41:04 2010 +0200
+@@ -32,22 +32,23 @@
+ #include <string.h>
+ #include <stdio.h>
+ #include <stdlib.h>
+-#include <sal/alloca.h>
+-#include <wmadaptor.hxx>
+-#include <saldisp.hxx>
+-#include <saldata.hxx>
+-#include <salframe.h>
+-#include <vcl/salgdi.hxx>
+-#include <osl/thread.h>
+-#include <rtl/locale.h>
+-#include <osl/process.h>
++#include "sal/alloca.h"
++#include "wmadaptor.hxx"
++#include "saldisp.hxx"
++#include "saldata.hxx"
++#include "salframe.h"
++#include "vcl/salgdi.hxx"
++#include "osl/thread.h"
++#include "rtl/locale.h"
++#include "osl/process.h"
++#include "vcl/configsettings.hxx"
+ #include <sal/macros.h>
+ 
+-#include <tools/prex.h>
++#include "tools/prex.h"
+ #include <X11/X.h>
+ #include <X11/Xatom.h>
+ #include <X11/Xresource.h>
+-#include <tools/postx.h>
++#include "tools/postx.h"
+ 
+ #if OSL_DEBUG_LEVEL > 1
+ #include <stdio.h>
+@@ -238,7 +239,9 @@
+         m_bEnableAlwaysOnTopWorks( false ),
+         m_bLegacyPartialFullscreen( false ),
+         m_nWinGravity( StaticGravity ),
+-        m_nInitWinGravity( StaticGravity )
++        m_nInitWinGravity( StaticGravity ),
++        m_bWMshouldSwitchWorkspace( true ),
++        m_bWMshouldSwitchWorkspaceInit( false )
+ {
+     Atom				aRealType	= None;
+     int					nFormat		= 8;
+@@ -965,6 +968,30 @@
+     return bNetWM;
+ }
+ 
++bool WMAdaptor::getWMshouldSwitchWorkspace() const
++{
++    if( ! m_bWMshouldSwitchWorkspaceInit )
++    {
++        WMAdaptor * pWMA = const_cast<WMAdaptor*>(this);
++    
++        pWMA->m_bWMshouldSwitchWorkspace = true;
++        vcl::SettingsConfigItem* pItem = vcl::SettingsConfigItem::get();
++        rtl::OUString aSetting( pItem->getValue( rtl::OUString( RTL_CONSTASCII_USTRINGPARAM( "WM" ) ),
++                                                 rtl::OUString( RTL_CONSTASCII_USTRINGPARAM( "ShouldSwitchWorkspace" ) ) ) );
++        if( aSetting.getLength() == 0 )
++        {
++            if( m_aWMName.EqualsAscii( "awesome" ) )
++            {
++                pWMA->m_bWMshouldSwitchWorkspace = false;
++            }
++        }
++        else
++            pWMA->m_bWMshouldSwitchWorkspace = aSetting.toBoolean();
++        pWMA->m_bWMshouldSwitchWorkspaceInit = true;
++    }
++    return m_bWMshouldSwitchWorkspace;
++}
++
+ /*
+  *  WMAdaptor::isValid()
+  */
+@@ -2338,8 +2365,11 @@
+  *  WMAdaptor::getCurrentWorkArea
+  */
+ // fixme: multi screen case
+-void WMAdaptor::switchToWorkArea( int nWorkArea ) const
++void WMAdaptor::switchToWorkArea( int nWorkArea, bool bConsiderWM ) const
+ {
++    if( bConsiderWM && ! getWMshouldSwitchWorkspace() )
++        return;
++
+     if( m_aWMAtoms[ NET_CURRENT_DESKTOP ] )
+     {
+         XEvent aEvent;
+
+
+# HG changeset patch
+# User Philipp Lohmann [pl] <Philipp.Lohmann@Oracle.COM>
+# Date 1288021859 -7200
+# Node ID aaa0ff2e7c5ccb8f6c0b398bc00b813e5da58006
+# Parent  173e68c517835e500f593456da9bab11365863e2
+vcl116: #i96684# add configuration option for sworkspace switching
+
+diff -r 173e68c51783 -r aaa0ff2e7c5c officecfg/registry/data/org/openoffice/VCL.xcu
+--- officecfg/registry/data/org/openoffice/VCL.xcu	Mon Oct 25 17:41:04 2010 +0200
++++ officecfg/registry/data/org/openoffice/VCL.xcu	Mon Oct 25 17:50:59 2010 +0200
+@@ -60,6 +60,11 @@
+             <value>Default</value>
+         </prop>
+     </node>
++    <node oor:name="WM" oor:op="replace">
++        <prop oor:name="ShouldSwitchWorkspace" oor:op="replace" oor:type="xs:string">
++            <value>false</value>
++        </prop>
++    </node>
+   </node>
+   <node oor:name="DefaultFonts">
+     <node oor:name="en" oor:op="replace">
+
Index: libreoffice-3.3.2/libreoffice-build/patches/dev300/apply
===================================================================
--- libreoffice-3.3.2.orig/libreoffice-build/patches/dev300/apply	2011-03-22 14:17:39.771328827 +0100
+++ libreoffice-3.3.2/libreoffice-build/patches/dev300/apply	2011-03-22 14:17:45.571328827 +0100
@@ -835,6 +835,7 @@
 # prioritize hebrew culmus fonts, Debian bugs #280084, #296152, #300642
 hebrew-culmus.diff, noelpwer
 
+do-not-switch-workspaces-of-wm.diff, #i96684#
 
 [ AddressBooks ]
 # build either the driver for Evolution 1.x or 2.x
