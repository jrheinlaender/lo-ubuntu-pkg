From 3eb5988612a5bf0e59b04f266215272c143be158 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Caol=C3=A1n=20McNamara?= <caolanm@redhat.com>
Date: Thu, 24 Oct 2013 10:23:44 +0100
Subject: [PATCH] fdo#70553 lp#1231799: Fix empty quicklist, update .desktop
 format

Change-Id: Ie036ac3055dfa15a4f80b898870385ec308c8c76

replace libreoffice with UNIXBASISROOTNAME

Change-Id: Idf0fee94ef2c360ce509b34a2828022a8daf04d0
---
 sysui/desktop/menus/base.desktop    | 8 ++++----
 sysui/desktop/menus/calc.desktop    | 8 ++++----
 sysui/desktop/menus/draw.desktop    | 8 ++++----
 sysui/desktop/menus/impress.desktop | 8 ++++----
 sysui/desktop/menus/math.desktop    | 8 ++++----
 sysui/desktop/menus/writer.desktop  | 8 ++++----
 6 files changed, 24 insertions(+), 24 deletions(-)

diff --git a/sysui/desktop/menus/base.desktop b/sysui/desktop/menus/base.desktop
index 848e110..292c13a 100755
--- a/sysui/desktop/menus/base.desktop
+++ b/sysui/desktop/menus/base.desktop
@@ -33,7 +33,7 @@ InitialPreference=5
 X-Ayatana-Desktop-Shortcuts=X-New
 StartupWMClass=libreoffice-base
 X-KDE-Protocols=file,http,smb,ftp,webdav
-[X-New Shortcut Group]
-UnityQuicklist=New Database
-Exec=libreoffice --base %%FILE%%
-TargetEnvironment=Unity
+[Desktop Action NewDatabase]
+Name=New Database
+Exec=${UNIXBASISROOTNAME} --base %%FILE%%
+OnlyShowIn=Unity;
diff --git a/sysui/desktop/menus/calc.desktop b/sysui/desktop/menus/calc.desktop
index 6ce104c..a36318a 100755
--- a/sysui/desktop/menus/calc.desktop
+++ b/sysui/desktop/menus/calc.desktop
@@ -33,7 +33,7 @@ InitialPreference=5
 X-Ayatana-Desktop-Shortcuts=X-New
 StartupWMClass=libreoffice-calc
 X-KDE-Protocols=file,http,smb,ftp,webdav
-[X-New Shortcut Group]
-UnityQuicklist=New Spreadsheet
-Exec=libreoffice --calc %%FILE%%
-TargetEnvironment=Unity
+[Desktop Action NewSpreadsheet]
+Name=New Spreadsheet
+Exec=${UNIXBASISROOTNAME} --calc %%FILE%%
+OnlyShowIn=Unity;
diff --git a/sysui/desktop/menus/draw.desktop b/sysui/desktop/menus/draw.desktop
index 23306a0..57830b8 100755
--- a/sysui/desktop/menus/draw.desktop
+++ b/sysui/desktop/menus/draw.desktop
@@ -33,7 +33,7 @@ InitialPreference=5
 X-Ayatana-Desktop-Shortcuts=X-New
 StartupWMClass=libreoffice-draw
 X-KDE-Protocols=file,http,smb,ftp,webdav
-[X-New Shortcut Group]
-UnityQuicklist=New Drawing
-Exec=libreoffice --draw %%FILE%%
-TargetEnvironment=Unity
+[Desktop Action NewDrawing]
+Name=New Drawing
+Exec=${UNIXBASISROOTNAME} --draw %%FILE%%
+OnlyShowIn=Unity;
diff --git a/sysui/desktop/menus/impress.desktop b/sysui/desktop/menus/impress.desktop
index 4e84c62..09d4894 100755
--- a/sysui/desktop/menus/impress.desktop
+++ b/sysui/desktop/menus/impress.desktop
@@ -33,7 +33,7 @@ InitialPreference=5
 X-Ayatana-Desktop-Shortcuts=X-New
 StartupWMClass=libreoffice-impress
 X-KDE-Protocols=file,http,smb,ftp,webdav
-[X-New Shortcut Group]
-UnityQuicklist=New Presentation
-Exec=libreoffice --impress %%FILE%%
-TargetEnvironment=Unity
+[Desktop Action NewPresentation]
+Name=New Presentation
+Exec=${UNIXBASISROOTNAME} --impress %%FILE%%
+OnlyShowIn=Unity;
diff --git a/sysui/desktop/menus/math.desktop b/sysui/desktop/menus/math.desktop
index d22c257..718a0c8 100755
--- a/sysui/desktop/menus/math.desktop
+++ b/sysui/desktop/menus/math.desktop
@@ -34,7 +34,7 @@ InitialPreference=5
 X-Ayatana-Desktop-Shortcuts=X-New
 StartupWMClass=libreoffice-math
 X-KDE-Protocols=file,http,smb,ftp,webdav
-[X-New Shortcut Group]
-UnityQuicklist=New Formula
-Exec=libreoffice --math %%FILE%%
-TargetEnvironment=Unity
+[Desktop Action NewFormula]
+Name=New Formula
+Exec=${UNIXBASISROOTNAME} --math %%FILE%%
+OnlyShowIn=Unity;
diff --git a/sysui/desktop/menus/writer.desktop b/sysui/desktop/menus/writer.desktop
index e6e1417..6c5365c 100755
--- a/sysui/desktop/menus/writer.desktop
+++ b/sysui/desktop/menus/writer.desktop
@@ -33,7 +33,7 @@ InitialPreference=5
 X-Ayatana-Desktop-Shortcuts=X-New
 StartupWMClass=libreoffice-writer
 X-KDE-Protocols=file,http,smb,ftp,webdav
-[X-New Shortcut Group]
-UnityQuicklist=New Document
-Exec=libreoffice --writer %%FILE%%
-TargetEnvironment=Unity
+[Desktop Action NewDocument]
+Name=New Document
+Exec=${UNIXBASISROOTNAME} --writer %%FILE%%
+OnlyShowIn=Unity;
-- 
1.8.1.5

