--- /dev/null	2011-09-27 10:43:04.452932903 +0200
+++ libreoffice/libreoffice-build/patches/hotfixes/fdo39510.diff	2011-09-27 17:03:55.218832472 +0200
@@ -0,0 +1,46 @@
+From f8f5d96666bff5051cc88d06b10d855548a441de Mon Sep 17 00:00:00 2001
+From: Bjoern Michaelsen <bjoern.michaelsen@canonical.com>
+Date: Thu, 22 Sep 2011 18:47:21 +0200
+Subject: [PATCH 1/2] fdo#39510 lp#854626: crash on closing document with
+ footnotes
+
+Signed-off-by: Michael Stahl <mst@openoffice.org>
+---
+ sw/source/core/layout/newfrm.cxx |    1 +
+ 1 files changed, 1 insertions(+), 0 deletions(-)
+
+From 6a3faed5b459ea133c39ef5243dad8e366ca00c3 Mon Sep 17 00:00:00 2001
+From: Bjoern Michaelsen <bjoern.michaelsen@canonical.com>
+Date: Fri, 23 Sep 2011 01:13:34 +0200
+Subject: [PATCH 2/2] fdo#39510: comment added
+
+Signed-off-by: Michael Stahl <mst@openoffice.org>
+---
+ sw/source/core/layout/newfrm.cxx |   10 ++++++++++
+ 1 files changed, 10 insertions(+), 0 deletions(-)
+
+diff --git a/sw/source/core/layout/newfrm.cxx b/sw/source/core/layout/newfrm.cxx
+index 7f19c1a..3943336 100644
+--- sw/source/core/layout/newfrm.cxx
++++ sw/source/core/layout/newfrm.cxx
+@@ -607,6 +607,17 @@ SwRootFrm::~SwRootFrm()
+ {
+     bTurboAllowed = sal_False;
+     pTurbo = 0;
++    // fdo#39510 crash on document close with footnotes
++    // Object ownership in writer and esp. in layout are a mess: Before the
++    // document/layout split SwDoc and SwRootFrm were essentially one object
++    // and magically/uncleanly worked around their common destruction by call
++    // to SwDoc::IsInDtor() -- even from the layout. As of now destuction of
++    // the layout proceeds forward through the frames. Since SwTxtFtn::DelFrms
++    // also searches backwards to find the master of footnotes, they must be
++    // considered to be owned by the SwRootFrm and also be destroyed here,
++    // before tearing down the (now footnote free) rest of the layout.
++    AllRemoveFtns();
++
+     if(pBlink)
+         pBlink->FrmDelete( this );
+     if ( static_cast<SwFrmFmt*>(GetRegisteredInNonConst()) )
+-- 
+1.7.5.4
+
