From: Debian LibreOffice Maintainers <debian-openoffice@lists.debian.org>
Date: Sat, 9 Nov 2013 02:00:25 +0100
Subject: [PATCH] gcj-safe-jni-h-include.diff

Change-Id: Iccce595463659ce0979694b8e27865b8dd68fec1

---
 configure.ac | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/configure.ac b/configure.ac
--- a/configure.ac
+++ b/configure.ac
@@ -7161,12 +7161,18 @@ if test -n "$ENABLE_JAVA" -a -z "$JAVAINC"; then
     k*bsd*-gnu*)
         JAVAINC="-I$JAVA_HOME/include"
         test -d "$JAVA_HOME/include/native_thread" && JAVAINC="$JAVAINC -I$JAVA_HOME/include/native_thread"
+	if test "$JDK" = "gcj"; then
+		JAVAINC="$JAVAINC -I`$JAVA_HOME/bin/gcj --print-file-name include/jni.h | $SED -e s,\/jni.h,,g`"
+	fi
         ;;
 
     linux-gnu*)
         JAVAINC="-I$JAVA_HOME/include"
         JAVAINC="$JAVAINC -I$JAVA_HOME/include/linux"
         test -d "$JAVA_HOME/include/native_thread" && JAVAINC="$JAVAINC -I$JAVA_HOME/include/native_thread"
+	if test "$JDK" = "gcj"; then
+		JAVAINC="$JAVAINC -I`$JAVA_HOME/bin/gcj --print-file-name include/jni.h | $SED -e s,\/jni.h,,g`"
+	fi
         ;;
 
     mingw*)
-- 
2.5.0

