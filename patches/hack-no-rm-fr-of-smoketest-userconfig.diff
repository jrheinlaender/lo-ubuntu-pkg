Index: libreoffice-3.3.3/libreoffice-build/patches/dev300/hack-no-rm-fr-of-smoketest-userconfig.diff
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ libreoffice-3.3.3/libreoffice-build/patches/dev300/hack-no-rm-fr-of-smoketest-userconfig.diff	2011-06-23 01:55:31.370980349 +0200
@@ -0,0 +1,39 @@
+diff --git a/solenv/inc/installationtest.mk b/solenv/inc/installationtest.mk
+index 80de446..3a7be7f 100644
+--- solenv/inc/installationtest.mk
++++ solenv/inc/installationtest.mk
+@@ -90,14 +90,14 @@ $(MISC)/$(TARGET)/installation.flag : $(shell \
+ .END
+ 
+ cpptest .PHONY : $(MISC)/$(TARGET)/services.rdb
+-    $(RM) -r $(MISC)/$(TARGET)/user
++#    $(RM) -r $(MISC)/$(TARGET)/user
+     $(MKDIRHIER) $(MISC)/$(TARGET)/user
+     $(CPPUNITTESTER) \
+         -env:UNO_SERVICES=$(my_file)$(PWD)/$(MISC)/$(TARGET)/services.rdb \
+         -env:UNO_TYPES=$(my_file)$(SOLARBINDIR)/types.rdb \
+         -env:arg-soffice=$(my_soffice) -env:arg-user=$(MISC)/$(TARGET)/user \
+         $(my_cppenv) $(OOO_CPPTEST_ARGS)
+-    $(RM) -r $(MISC)/$(TARGET)/user
++#    $(RM) -r $(MISC)/$(TARGET)/user
+ .IF "$(OS)" == "WNT" && "$(OOO_TEST_SOFFICE)" == ""
+     $(RM) -r $(installationtest_instpath) $(MISC)/$(TARGET)/installation.flag
+ cpptest : $(MISC)/$(TARGET)/installation.flag
+@@ -111,7 +111,7 @@ $(MISC)/$(TARGET)/services.rdb :
+ 
+ .IF "$(SOLAR_JAVA)" == "TRUE" && "$(OOO_JUNIT_JAR)" != ""
+ javatest .PHONY : $(JAVATARGET)
+-    $(RM) -r $(MISC)/$(TARGET)/user
++#    $(RM) -r $(MISC)/$(TARGET)/user
+     $(MKDIRHIER) $(MISC)/$(TARGET)/user
+     $(JAVAI) $(JAVAIFLAGS) $(JAVACPS) \
+         '$(OOO_JUNIT_JAR)$(PATH_SEPERATOR)$(CLASSPATH)' \
+@@ -119,7 +119,7 @@ javatest .PHONY : $(JAVATARGET)
+         -Dorg.openoffice.test.arg.user=$(my_file)$(PWD)/$(MISC)/$(TARGET)/user \
+         $(my_javaenv) org.junit.runner.JUnitCore \
+         $(foreach,i,$(JAVATESTFILES) $(subst,/,. $(PACKAGE)).$(i:s/.java//))
+-    $(RM) -r $(MISC)/$(TARGET)/user
++#    $(RM) -r $(MISC)/$(TARGET)/user
+ .IF "$(OS)" == "WNT" && "$(OOO_TEST_SOFFICE)" == ""
+     $(RM) -r $(installationtest_instpath) $(MISC)/$(TARGET)/installation.flag
+ javatest : $(MISC)/$(TARGET)/installation.flag
Index: libreoffice-3.3.3/libreoffice-build/patches/dev300/apply
===================================================================
--- libreoffice-3.3.3.orig/libreoffice-build/patches/dev300/apply	2011-06-23 01:55:24.240980351 +0200
+++ libreoffice-3.3.3/libreoffice-build/patches/dev300/apply	2011-06-23 01:55:31.370980349 +0200
@@ -2368,3 +2368,6 @@
 [ Win32Packaging ]
 # patch to create a multilang installer and helppacks by default
 instsetoo_native-win32-packaging.diff, fridrich
+
+[ TemporaryHacks ]
+hack-no-rm-fr-of-smoketest-userconfig.diff
