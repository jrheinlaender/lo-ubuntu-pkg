--- /dev/null	2011-09-14 22:08:43.143634037 +0200
+++ libreoffice-3.4.3/libreoffice-build/patches/hotfixes/handle-NULL-display-gracefully.diff	2011-09-15 21:39:32.000000000 +0200
@@ -0,0 +1,35 @@
+From 253ff23c3a93b5ea45a2451a8bc97fca19856a75 Mon Sep 17 00:00:00 2001
+From: David Tardon <dtardon@redhat.com>
+Date: Tue, 24 May 2011 04:30:46 +0000
+Subject: handle NULL display gracefully
+
+(cherry-picked from core 2daa098c3c1b49ce4d46306eddc45f7a66b7c021)
+
+Signed-off-by: Bjoern Michaelsen <bjoern.michaelsen@canonical.com>
+---
+diff --git a/desktop/unx/source/splashx.c b/desktop/unx/source/splashx.c
+index 4f5d4b2..e975733 100755
+--- desktop/unx/source/splashx.c
++++ desktop/unx/source/splashx.c
+@@ -589,6 +589,9 @@ static void process_events()
+ // Draw the progress
+ void splash_draw_progress( int progress )
+ {
++    if (!display)
++        return;
++
+     // sanity
+     if ( progress < 0 )
+         progress = 0;
+@@ -619,7 +622,8 @@ void splash_draw_progress( int progress )
+ // Close the window & cleanup
+ void splash_close_window()
+ {
+-    XCloseDisplay( display );
++    if (display)
++        XCloseDisplay( display );
+     display = NULL;
+ #ifdef USE_LIBPNG
+     png_destroy_read_struct( &png_ptr, &info_ptr, NULL );
+--
+cgit v0.9.0.2-2-gbebe
