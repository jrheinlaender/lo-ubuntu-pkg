From 1e4b46f5f638b0b2cbb40fd048f44e2d16cf7f02 Mon Sep 17 00:00:00 2001
From: Rene Engelhard <rene@debian.org>
Date: Fri, 17 Feb 2012 15:37:20 +0100
Subject: [PATCH 1/3] fix icu build on arm

(from http://patch-tracker.debian.org/patch/series/view/icu/4.4.1-7/arm-assembler.patch)
---
 icu/arm-assembler.patch |   24 ++++++++++++++++++++++++
 icu/makefile.mk         |    3 ++-
 2 files changed, 26 insertions(+), 1 deletions(-)
 create mode 100644 icu/arm-assembler.patch

diff --git a/icu/arm-assembler.patch b/icu/arm-assembler.patch
new file mode 100644
index 0000000..752f9ad
--- /dev/null
+++ b/icu/arm-assembler.patch
@@ -0,0 +1,24 @@
+Index: icu-4.4.1/source/tools/toolutil/pkg_genc.c
+===================================================================
+--- misc/icu/source/tools/toolutil/pkg_genc.c	2010-04-28 11:27:46.000000000 -0400
++++ misc/build/icu/source/tools/toolutil/pkg_genc.c	2010-07-17 07:31:54.408752610 -0400
+@@ -1,5 +1,5 @@
+ /******************************************************************************
+- *   Copyright (C) 2009, International Business Machines
++ *   Copyright (C) 2009-2010, International Business Machines
+  *   Corporation and others.  All Rights Reserved.
+  *******************************************************************************
+  */
+@@ -118,10 +118,10 @@
+ } assemblyHeader[] = {
+     {"gcc",
+         ".globl %s\n"
+-        "\t.section .note.GNU-stack,\"\",@progbits\n"
++        "\t.section .note.GNU-stack,\"\",%%progbits\n"
+         "\t.section .rodata\n"
+         "\t.align 8\n" /* Either align 8 bytes or 2^8 (256) bytes. 8 bytes is needed. */
+-        "\t.type %s,@object\n"
++        "\t.type %s,%%object\n"
+         "%s:\n\n",
+ 
+         ".long ","",HEX_0X
diff --git a/icu/makefile.mk b/icu/makefile.mk
index 02f94a45..872544c 100644
--- a/icu/makefile.mk
+++ b/icu/makefile.mk
@@ -53,7 +53,8 @@ PATCH_FILES=\
     icu4c-warnings.patch \
     icu4c-escapespace.patch \
     icu4c-strict-c.patch \
-    CVE-2011-4599.patch
+    CVE-2011-4599.patch \
+    arm-assembler.patch
 
 .IF "$(OS)"=="ANDROID"
 PATCH_FILES+=\
-- 
1.7.2.5

