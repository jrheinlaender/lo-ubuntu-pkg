From: =?UTF-8?q?Caol=C3=A1n=20McNamara?= <caolanm@redhat.com>
Date: Wed, 27 Jan 2016 15:17:44 +0000
Subject: [PATCH] Resolves: rhbz#1301346 crash with null ObjList

Change-Id: Ia9446b06087907a2d9d1889ba7d4ccd1f78697d9

---
 svx/source/svdraw/svdedtv2.cxx | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/svx/source/svdraw/svdedtv2.cxx b/svx/source/svdraw/svdedtv2.cxx
--- a/svx/source/svdraw/svdedtv2.cxx
+++ b/svx/source/svdraw/svdedtv2.cxx
@@ -484,8 +484,9 @@ void SdrEditView::ImpCheckToTopBtmPossible()
     { // special-casing for single selection
         SdrObject* pObj=GetMarkedObjectByIndex(0);
         SdrObjList* pOL=pObj->GetObjList();
-        size_t nMax=pOL->GetObjCount();
-        size_t nMin=0;
+        SAL_WARN_IF(!pOL, "svx", "Object somehow has no ObjList");
+        size_t nMax = pOL ? pOL->GetObjCount() : 0;
+        size_t nMin = 0;
         const size_t nObjNum=pObj->GetOrdNum();
         SdrObject* pRestrict=GetMaxToTopObj(pObj);
         if (pRestrict!=nullptr) {
-- 
2.5.0

