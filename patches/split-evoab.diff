From: Debian LibreOffice Maintainers <debian-openoffice@lists.debian.org>
Date: Sat, 9 Nov 2013 02:00:26 +0100
Subject: [PATCH] split-evoab.diff

Change-Id: I6897efcbda7d38f80f92fc6d32da7198a885f98c

---
 postprocess/CustomTarget_registry.mk |  5 +++--
 scp2/InstallModule_gnome.mk          |  1 +
 scp2/source/gnome/file_gnome.scp     | 10 ++++++++++
 scp2/source/gnome/module_gnome.scp   |  3 +++
 4 files changed, 17 insertions(+), 2 deletions(-)

diff --git a/postprocess/CustomTarget_registry.mk b/postprocess/CustomTarget_registry.mk
index 83c0883..28f9163 100644
--- a/postprocess/CustomTarget_registry.mk
+++ b/postprocess/CustomTarget_registry.mk
@@ -338,8 +338,9 @@ postprocess_FILES_main += $(postprocess_MOD)/org/openoffice/ucb/Configuration-ne
 endif
 endif
 ifeq ($(ENABLE_EVOAB2),TRUE)
-postprocess_FILES_main += $(call gb_XcuModuleTarget_get_target,connectivity/registry/evoab2)/org/openoffice/Office/DataAccess/Drivers-evoab2.xcu
-postprocess_FILES_main += $(postprocess_MOD)/org/openoffice/Office/DataAccess-evoab2.xcu
+postprocess_XCDS += evoab.xcd
+postprocess_FILES_evoab += $(call gb_XcuModuleTarget_get_target,connectivity/registry/evoab2)/org/openoffice/Office/DataAccess/Drivers-evoab2.xcu
+postprocess_FILES_evoab += $(postprocess_MOD)/org/openoffice/Office/DataAccess-evoab2.xcu
 postprocess_DRIVERS += evoab
 endif
 ifeq ($(ENABLE_JAVA),TRUE)
diff --git a/scp2/InstallModule_gnome.mk b/scp2/InstallModule_gnome.mk
--- a/scp2/InstallModule_gnome.mk
+++ b/scp2/InstallModule_gnome.mk
@@ -15,6 +15,7 @@ $(eval $(call gb_InstallModule_define_if_set,scp2/gnome,\
 	ENABLE_GIO \
 	ENABLE_GNOMEVFS \
 	ENABLE_LOCKDOWN \
+        ENABLE_EVOAB2 \
         ENABLE_GTK \
 ))
 
diff --git a/scp2/source/gnome/file_gnome.scp b/scp2/source/gnome/file_gnome.scp
--- a/scp2/source/gnome/file_gnome.scp
+++ b/scp2/source/gnome/file_gnome.scp
@@ -25,3 +25,13 @@ File gid_File_Share_Registry_Gnome_Xcd
     Name = "gnome.xcd";
 End
 #endif
+
+#ifdef ENABLE_EVOAB2
+File gid_File_Share_Registry_Evoab_Xcd
+    TXT_FILE_BODY;
+    Styles = (PACKED);
+    Dir = gid_Brand_Dir_Share_Registry;
+    Name = "evoab.xcd";
+End
+#endif
+
diff --git a/scp2/source/gnome/module_gnome.scp b/scp2/source/gnome/module_gnome.scp
--- a/scp2/source/gnome/module_gnome.scp
+++ b/scp2/source/gnome/module_gnome.scp
@@ -33,6 +33,9 @@ Module gid_Module_Optional_Gnome
 #if (defined ENABLE_GNOMEVFS && defined ENABLE_LOCKDOWN) || defined ENABLE_GIO
       gid_File_Share_Registry_Gnome_Xcd,
 #endif
+#ifdef ENABLE_EVOAB2
+     gid_File_Share_Registry_Evoab_Xcd,
+#endif
       gid_File_Bin_Gnome_Open_Url,
       gid_File_Bin_Gnome_Open_Url_Bin,
       gid_File_Bin_XidFullscreen
-- 
1.9.1

