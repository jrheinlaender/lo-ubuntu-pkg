From 9d3fb278999edb233eb1c2612412a06cd150e396 Mon Sep 17 00:00:00 2001
From: Bjoern Michaelsen <bjoern.michaelsen@canonical.com>
Date: Wed, 29 Jun 2011 19:15:31 +0200
Subject: [PATCH 6/9] lp#720716: more translations in desktop files

---
 sysui/desktop/menus/base.desktop                |    5 +
 sysui/desktop/menus/calc.desktop                |    5 +
 sysui/desktop/menus/draw.desktop                |    5 +
 sysui/desktop/menus/impress.desktop             |    5 +
 sysui/desktop/menus/math.desktop                |    5 +
 sysui/desktop/menus/writer.desktop              |    5 +
 sysui/desktop/share/launcher_comment.ulf        |  171 +++++++++++++++++++++++
 sysui/desktop/share/launcher_genericname.ulf    |  168 ++++++++++++++++++++++
 sysui/desktop/share/launcher_unityquicklist.ulf |  168 ++++++++++++++++++++++
 sysui/desktop/share/makefile.mk                 |    4 +-
 sysui/desktop/share/translate.pl                |   18 ++-
 11 files changed, 555 insertions(+), 4 deletions(-)
 create mode 100644 sysui/desktop/share/launcher_unityquicklist.ulf

diff --git a/sysui/desktop/menus/base.desktop b/sysui/desktop/menus/base.desktop
index 40f7e79..9809e4e 100755
--- a/sysui/desktop/menus/base.desktop
+++ b/sysui/desktop/menus/base.desktop
@@ -11,3 +11,8 @@ Name[pt_BR]=%PRODUCTNAME_BR Base
 GenericName=Database Development
 Comment=Manage databases, create queries and reports to track and manage your information by using Base.
 InitialPreference=5
+X-Ayatana-Desktop-Shortcuts=New
+[New Shortcut Group]
+UnityQuicklist=New Database
+Exec=libreoffice --base %U
+TargetEnvironment=Unity
diff --git a/sysui/desktop/menus/calc.desktop b/sysui/desktop/menus/calc.desktop
index 80cc09d..0af1c530 100755
--- a/sysui/desktop/menus/calc.desktop
+++ b/sysui/desktop/menus/calc.desktop
@@ -11,3 +11,8 @@ Name[pt_BR]=%PRODUCTNAME_BR Calc
 GenericName=Spreadsheet
 Comment=Perform calculations, analyze information and manage lists in spreadsheets by using Calc.
 InitialPreference=5
+X-Ayatana-Desktop-Shortcuts=New
+[New Shortcut Group]
+UnityQuicklist=New Spreadsheet
+Exec=libreoffice --calc %U
+TargetEnvironment=Unity
diff --git a/sysui/desktop/menus/draw.desktop b/sysui/desktop/menus/draw.desktop
index 57f7ade..ab4d092 100755
--- a/sysui/desktop/menus/draw.desktop
+++ b/sysui/desktop/menus/draw.desktop
@@ -11,3 +11,8 @@ Name[pt_BR]=%PRODUCTNAME_BR Draw
 GenericName=Drawing Program
 Comment=Create and edit drawings, flow charts, and logos by using Draw.
 InitialPreference=5
+X-Ayatana-Desktop-Shortcuts=New
+[New Shortcut Group]
+UnityQuicklist=New Drawing
+Exec=libreoffice --draw %U
+TargetEnvironment=Unity
diff --git a/sysui/desktop/menus/impress.desktop b/sysui/desktop/menus/impress.desktop
index 025524e..52f11c3 100755
--- a/sysui/desktop/menus/impress.desktop
+++ b/sysui/desktop/menus/impress.desktop
@@ -11,3 +11,8 @@ Name[pt_BR]=%PRODUCTNAME_BR Impress
 GenericName=Presentation
 Comment=Create and edit presentations for slideshows, meeting and Web pages by using Impress.
 InitialPreference=5
+X-Ayatana-Desktop-Shortcuts=New
+[New Shortcut Group]
+UnityQuicklist=New Presentation
+Exec=libreoffice --impress %U
+TargetEnvironment=Unity
diff --git a/sysui/desktop/menus/math.desktop b/sysui/desktop/menus/math.desktop
index 55fcc29..c605994 100755
--- a/sysui/desktop/menus/math.desktop
+++ b/sysui/desktop/menus/math.desktop
@@ -11,3 +11,8 @@ Name[pt_BR]=%PRODUCTNAME_BR Math
 GenericName=Formula Editor
 Comment=Create and edit scientific formulas and equations by using Math.
 InitialPreference=5
+X-Ayatana-Desktop-Shortcuts=New
+[New Shortcut Group]
+UnityQuicklist=New Formula
+Exec=libreoffice --math %U
+TargetEnvironment=Unity
diff --git a/sysui/desktop/menus/writer.desktop b/sysui/desktop/menus/writer.desktop
index 2222019..aae85b9 100755
--- a/sysui/desktop/menus/writer.desktop
+++ b/sysui/desktop/menus/writer.desktop
@@ -11,3 +11,8 @@ Name[pt_BR]=%PRODUCTNAME_BR Writer
 GenericName=Word Processor
 Comment=Create and edit text and graphics in letters, reports, documents and Web pages by using Writer.
 InitialPreference=5
+X-Ayatana-Desktop-Shortcuts=New
+[New Shortcut Group]
+UnityQuicklist=New Document
+Exec=libreoffice --writer %U
+TargetEnvironment=Unity
diff --git a/sysui/desktop/share/launcher_unityquicklist.ulf b/sysui/desktop/share/launcher_unityquicklist.ulf
new file mode 100644
index 0000000..62f07d0
--- /dev/null
+++ b/sysui/desktop/share/launcher_unityquicklist.ulf
@@ -0,0 +1,168 @@
+[writer]
+en-US = "New Document"
+ast = "Documentu nuevu"
+ca = "Document nou"
+da = "Nyt dokument"
+de = "Neues Dokument"
+es = "Documento nuevo"
+el = "Νέο έγγραφο"
+fi = "Uusi tekstiasiakirja"
+fr = "Nouveau document"
+gl = "Novo documento"
+he = "מסמך חדש"
+hr = "Novi dokument"
+hu = "Új dokumentum"
+it = "Nuovo documento"
+is = "Nýtt textaskjal"
+ja = "新規文書を作成"
+ku = "Belgeya nû"
+nl = "Nieuw Document"
+pt_BR = "Novo documento"
+ro = "Document nou"
+ru = "Новый документ"
+sl = "Nov dokument"
+te = "కొత్త పత్రం"
+vi = "Tài liệu mới"
+zh_CN = "新建文档"
+zh_TW = "新增文件"
+
+[impress]
+en-US = "New Presentation"
+ast = "Presentación nueva"
+ca = "Presentació nova"
+da = "Ny præsentation"
+de = "Neue Präsentation"
+el = "Νέα παρουσίαση"
+es = "Presentación nueva"
+fi = "Uusi esitys"
+fr = "Nouvelle présentation"
+gl = "Nova presentación"
+he = "מצגת חדשה"
+hr = "Nova prezentacija"
+hu = "Új bemutató"
+it = "Nuova presentazione"
+is = "Ný skyggnusýning"
+ja = "新規プレゼンテーションを作成"
+nl = "Nieuwe presentatie"
+pt_BR = "Nova apresentação"
+ro = "Prezentare nouă"
+ru = "Новая презентация"
+sl = "Nova predstavitev"
+vi = "Trình diễn mới"
+zh_CN = "新建演示文稿"
+zh_TW = "新增簡報"
+
+[calc]
+en-US = "New Spreadsheet"
+ast = "Fueya de cálculu nueva"
+ca = "Full de càlcul nou"
+da = "Nyt regneark"
+de = "Neue Tabelle"
+el = "Δημιουργία Νέου λογιστικού φύλλου"
+es = "Hoja de cálculo nueva"
+fi = "Uusi taulukko"
+fr = "Nouvelle feuille de calcul"
+gl = "Nova folla de cálculo"
+he = "גיליון אלקטרוני חדש"
+hr = "Nova proračunska tablica"
+hu = "Új táblázat"
+it = "Nuovo foglio di calcolo"
+is = "Nýtt töflureikniblað"
+ja = "新規シートを作成"
+nl = "Nieuw Rekenblad"
+pt_BR = "Nova planilha"
+ro = "Foaie de calcul nouă"
+ru = "Новая электронная таблица"
+sl = "Nova preglednica"
+te = "కొత్త స్ప్రెడ్ షీట్"
+vi = "Bảng tính mới"
+zh_CN = "新建表格"
+zh_TW = "新增試算"
+
+[base]
+en-US = "New Database"
+ast = "Base de datos nueva"
+ca = "Base de dades nova"
+da = "Ny database"
+de = "Neue Datenbank"
+el = "Νέα βάση δεδομένων"
+es = "Base de datos nueva"
+fi = "Uusi tietokanta"
+fr = "Nouvelle base de données"
+gl = "Nova base de datos"
+he = "מסד נתונים חדש"
+hr = "Nova baza podataka"
+hu = "Új adatbázis"
+it = "Nuovo database"
+is = "Nýr Base gagnagrunnur"
+ja = "新規デ>ータベースを作成"
+nl = "Nieuwe database"
+nn = "Ny database"
+pt_BR = "Nova base de dados"
+ro = "Bază de date nouă"
+ru = "Новая база данных"
+sl = "Nova podatkovna zbirka"
+te = "కొత్త డాటాబేస్"
+vi = "Cơ sở dữ liệu mới"
+zn_CN = "新建数据库"
+zh_TW = "新增資料庫"
+
+[math]
+en-US = "New Formula"
+ast = "Fórmula nueva"
+ca = "Fórmula nova"
+da = "Ny formel"
+de = "Neue Formel"
+el = "Νέος τύπος"
+es = "Fórmula nueva"
+fi = "Uusi kaava"
+fr = "Nouvelle formule"
+gl = "Nova fórmula"
+he = "נוסחה חדשה"
+hr = "Nova jednadžba"
+hu = "Új képlet"
+it = "Nuova formula"
+is = "Ný formúla"
+ja = "新しい数式を作成"
+nl = "Nieuwe formule"
+pt_BR = "Nova fórmula"
+ro = "Formulă nouă"
+ru = "Новая формула"
+sl = "Nova formula"
+te = ""కొత్త సూత్రం
+vi = "Công thức mới"
+zh_CN = "新建公式"
+zh_TW = "新增公式"
+
+[draw]
+en-US = "New Drawing"
+ast = "Dibuxu nuevu"
+ca = "Dibuix nou"
+da = "Ny tegning"
+de = "Neue Zeichnung"
+el = "Νέα σχεδίαση"
+es = "Dibujo nuevo"
+fi = "Uusi piirros"
+fr = "Nouveau dessin"
+gl = "Novo debuxo"
+he = "ציור חדש"
+hr = "Nov crtež"
+hu = "Új rajz"
+it = "Nuovo disegno"
+is = "Ný teikning"
+ja = "新規画像を作成"
+nl = "Nieuwe tekening"
+pt_BR = "Novo desenho"
+ro = "Desen nou"
+ru = "Новый рисунок"
+sl = "Nova risba"
+te = "కొత్త చిత్రం"
+vi = "Hình vẽ mới"
+zh_CN = "新建绘图"
+zh_TW = "新增繪圖"
+
+[startcenter]
+en-US = ""
+
+[javafilter]
+en-US = ""
diff --git a/sysui/desktop/share/makefile.mk b/sysui/desktop/share/makefile.mk
index 68cba59..19575ed 100755
--- a/sysui/desktop/share/makefile.mk
+++ b/sysui/desktop/share/makefile.mk
@@ -50,6 +50,7 @@ ULFFILES= \
     documents.ulf \
     launcher_comment.ulf \
     launcher_genericname.ulf \
+    launcher_unityquicklist.ulf \
     launcher_name.ulf
 
 LAUNCHERLIST = writer calc draw impress math base printeradmin qstart startcenter javafilter
@@ -145,7 +146,7 @@ ALLTAR : $(LAUNCHERFLAGFILE) $(SPECFILES) $(COMMONMISC)$/{$(PRODUCTLIST)}$/build
 # merge-in the translations. 
 #
 
-$(LAUNCHERFLAGFILE) : ../productversion.mk brand.pl translate.pl $(ULFDIR)$/launcher_name.ulf $(ULFDIR)$/launcher_comment.ulf $(ULFDIR)/launcher_genericname.ulf
+$(LAUNCHERFLAGFILE) : ../productversion.mk brand.pl translate.pl $(ULFDIR)$/launcher_name.ulf $(ULFDIR)$/launcher_comment.ulf $(ULFDIR)/launcher_genericname.ulf $(ULFDIR)/launcher_unityquicklist.ulf
 $(LAUNCHERFLAGFILE) : $(LAUNCHERDEPN) 
     @@-$(MKDIRHIER) $(@:db).$(INPATH).$(@:f)
     @echo Creating desktop entries for $(@:f) ..
@@ -154,6 +155,7 @@ $(LAUNCHERFLAGFILE) : $(LAUNCHERDEPN)
     @$(PERL) translate.pl -p '$${{PRODUCTNAME}} $${{PRODUCTVERSION}}' -d $(@:db).$(INPATH).$(@:f) --ext "desktop" --key "Name" $(ULFDIR)$/launcher_name.ulf
     @$(PERL) translate.pl -p '$${{PRODUCTNAME}} $${{PRODUCTVERSION}}' -d $(@:db).$(INPATH).$(@:f) --ext "desktop" --key "Comment" $(ULFDIR)$/launcher_comment.ulf
     @$(PERL) translate.pl -p '$${{PRODUCTNAME}} $${{PRODUCTVERSION}}' -d $(@:db).$(INPATH).$(@:f) --ext "desktop" --key "GenericName" $(ULFDIR)$/launcher_genericname.ulf
+    @$(PERL) translate.pl -p '$${{PRODUCTNAME}} $${{PRODUCTVERSION}}' -d $(@:db).$(INPATH).$(@:f) --ext "desktop" --key "UnityQuicklist" $(ULFDIR)$/launcher_unityquicklist.ulf
 .IF "$(WITH_LIBSN)"=="YES"
     @noop x$(foreach,i,$(LAUNCHERLIST) $(shell @echo "StartupNotify=true" >> $(@:db).$(INPATH).$(@:f)/$i.desktop))x
 .ENDIF
diff --git a/sysui/desktop/share/translate.pl b/sysui/desktop/share/translate.pl
index cdc636b..85cc9311 100755
--- a/sysui/desktop/share/translate.pl
+++ b/sysui/desktop/share/translate.pl
@@ -69,6 +69,12 @@ while ($_ = $ARGV[0], /^-/) {
     }
 }
 
+# hack for unity section
+$outkey = $key;
+if ( $outkey eq "UnityQuicklist" ) {
+    $outkey = "Name";
+}
+
 # open input file
 unless (open(SOURCE, $ARGV[0])) {
     print STDERR "Can't open $ARGV[0] file: $!\n";
@@ -111,9 +117,12 @@ while (<SOURCE>) {
 
         # Pass the head of the template to the output file
 KEY:    while (<TEMPLATE>) {
-            print OUTFILE;
+            $keyline = $_;
             last KEY if (/$key/);
+            print OUTFILE;
         }
+        $keyline=~s/^$key/$outkey/;
+        print OUTFILE $keyline;
 
     } else {
         # split locale = "value" into 2 strings
@@ -131,10 +140,13 @@ KEY:    while (<TEMPLATE>) {
             $value=~s/%PRODUCTNAME/$productname/g;
 
             $locale=~s/-/_/;
+
+            if (not $value eq '') {
             if ($ext eq "desktop") {
-                print OUTFILE "$key\[$locale\]=$value\n";
+                print OUTFILE "$outkey\[$locale\]=$value\n";
             } else {
-                print OUTFILE  "\t\[$locale\]$key=$value\n";
+                print OUTFILE  "\t\[$locale\]$outkey=$value\n";
+            }
             }
         }
     }
-- 
1.7.5.4

