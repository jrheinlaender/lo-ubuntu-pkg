Tests: uno
Depends: @builddeps@, ure
Restrictions: allow-stderr, rw-build-tree

Tests: smoketest
Depends: @builddeps@, libreoffice-dev, libreoffice, libreoffice-sdbc-hsqldb, libreoffice-sdbc-firebird [!s390x], libreoffice-smoketest-data
Restrictions: allow-stderr, rw-build-tree, skippable

Tests: pyuno-import, uno-import
Depends: python3, python3-uno

# this is already done by smoketest upstream, but fails when doing it against
# the installed LO. works standalone, though, so it's patched out of the
# smoketest. Do it here separately.
Tests: test-extension
Depends: libreoffice-core, libreoffice-common, libreoffice-java-common, libreoffice-smoketest-data, default-jdk

Tests: test-extension-shared
Depends: libreoffice-core, libreoffice-common, libreoffice-java-common, libreoffice-smoketest-data, default-jdk
Restrictions: needs-root

Tests: uicheck
Depends: @builddeps@, libreoffice, python3-uno, libreoffice-l10n-he, libreoffice-l10n-ja, libreoffice-librelogo
Restrictions: allow-stderr

Tests: junit
Depends: @builddeps@, libreoffice, libreoffice-subsequentcheckbase, libreoffice-sdbc-hsqldb, libreoffice-sdbc-firebird [!s390x]
Restrictions: allow-stderr

Test-Command: export SYSTEM_UCPP=TRUE; export DOXYGEN=`which doxygen`; export ENABLE_JAVA=TRUE; export JDK=sun; export JAVADOC=/usr/lib/jvm/default-java/bin/javadoc; perl odk/util/check.pl /usr/lib/libreoffice/sdk
Depends: libreoffice-dev, libreoffice-dev-doc

Tests: odk-build-examples
Depends: @builddeps@, libreoffice-dev, libreoffice-dev-doc, libreoffice-java-common, python3-uno, libreoffice-officebean
Restrictions: allow-stderr

# inspired by https://salsa.debian.org/apparmor-team/apparmor-profiles-extra/commit/7fbcc4788d0e94764eeeff2f080796601241f986
Test-Command: for i in /etc/apparmor.d/usr.lib.libreoffice.program.*; do /sbin/apparmor_parser --add --skip-cache --skip-kernel-load $i; done
Depends: libreoffice-common, apparmor
Restrictions: allow-stderr
